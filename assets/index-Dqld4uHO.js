(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function Cg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $c={exports:{}},fi={},zc={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp;function V0(){if(jp)return xe;jp=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=y&&O[y]||O["@@iterator"],typeof O=="function"?O:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,_={};function S(O,F,ge){this.props=O,this.context=F,this.refs=_,this.updater=ge||w}S.prototype.isReactComponent={},S.prototype.setState=function(O,F){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,F,"setState")},S.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function T(){}T.prototype=S.prototype;function R(O,F,ge){this.props=O,this.context=F,this.refs=_,this.updater=ge||w}var N=R.prototype=new T;N.constructor=R,E(N,S.prototype),N.isPureReactComponent=!0;var I=Array.isArray,$=Object.prototype.hasOwnProperty,A={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function H(O,F,ge){var we,Q={},se=null,Se=null;if(F!=null)for(we in F.ref!==void 0&&(Se=F.ref),F.key!==void 0&&(se=""+F.key),F)$.call(F,we)&&!M.hasOwnProperty(we)&&(Q[we]=F[we]);var be=arguments.length-2;if(be===1)Q.children=ge;else if(1<be){for(var Te=Array(be),lt=0;lt<be;lt++)Te[lt]=arguments[lt+2];Q.children=Te}if(O&&O.defaultProps)for(we in be=O.defaultProps,be)Q[we]===void 0&&(Q[we]=be[we]);return{$$typeof:n,type:O,key:se,ref:Se,props:Q,_owner:A.current}}function G(O,F){return{$$typeof:n,type:O.type,key:F,ref:O.ref,props:O.props,_owner:O._owner}}function te(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function ee(O){var F={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ge){return F[ge]})}var ve=/\/+/g;function Ae(O,F){return typeof O=="object"&&O!==null&&O.key!=null?ee(""+O.key):F.toString(36)}function Ne(O,F,ge,we,Q){var se=typeof O;(se==="undefined"||se==="boolean")&&(O=null);var Se=!1;if(O===null)Se=!0;else switch(se){case"string":case"number":Se=!0;break;case"object":switch(O.$$typeof){case n:case e:Se=!0}}if(Se)return Se=O,Q=Q(Se),O=we===""?"."+Ae(Se,0):we,I(Q)?(ge="",O!=null&&(ge=O.replace(ve,"$&/")+"/"),Ne(Q,F,ge,"",function(lt){return lt})):Q!=null&&(te(Q)&&(Q=G(Q,ge+(!Q.key||Se&&Se.key===Q.key?"":(""+Q.key).replace(ve,"$&/")+"/")+O)),F.push(Q)),1;if(Se=0,we=we===""?".":we+":",I(O))for(var be=0;be<O.length;be++){se=O[be];var Te=we+Ae(se,be);Se+=Ne(se,F,ge,Te,Q)}else if(Te=b(O),typeof Te=="function")for(O=Te.call(O),be=0;!(se=O.next()).done;)se=se.value,Te=we+Ae(se,be++),Se+=Ne(se,F,ge,Te,Q);else if(se==="object")throw F=String(O),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return Se}function Pe(O,F,ge){if(O==null)return O;var we=[],Q=0;return Ne(O,we,"","",function(se){return F.call(ge,se,Q++)}),we}function ye(O){if(O._status===-1){var F=O._result;F=F(),F.then(function(ge){(O._status===0||O._status===-1)&&(O._status=1,O._result=ge)},function(ge){(O._status===0||O._status===-1)&&(O._status=2,O._result=ge)}),O._status===-1&&(O._status=0,O._result=F)}if(O._status===1)return O._result.default;throw O._result}var me={current:null},K={transition:null},oe={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:K,ReactCurrentOwner:A};function J(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:Pe,forEach:function(O,F,ge){Pe(O,function(){F.apply(this,arguments)},ge)},count:function(O){var F=0;return Pe(O,function(){F++}),F},toArray:function(O){return Pe(O,function(F){return F})||[]},only:function(O){if(!te(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},xe.Component=S,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=R,xe.StrictMode=r,xe.Suspense=h,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,xe.act=J,xe.cloneElement=function(O,F,ge){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var we=E({},O.props),Q=O.key,se=O.ref,Se=O._owner;if(F!=null){if(F.ref!==void 0&&(se=F.ref,Se=A.current),F.key!==void 0&&(Q=""+F.key),O.type&&O.type.defaultProps)var be=O.type.defaultProps;for(Te in F)$.call(F,Te)&&!M.hasOwnProperty(Te)&&(we[Te]=F[Te]===void 0&&be!==void 0?be[Te]:F[Te])}var Te=arguments.length-2;if(Te===1)we.children=ge;else if(1<Te){be=Array(Te);for(var lt=0;lt<Te;lt++)be[lt]=arguments[lt+2];we.children=be}return{$$typeof:n,type:O.type,key:Q,ref:se,props:we,_owner:Se}},xe.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:a,_context:O},O.Consumer=O},xe.createElement=H,xe.createFactory=function(O){var F=H.bind(null,O);return F.type=O,F},xe.createRef=function(){return{current:null}},xe.forwardRef=function(O){return{$$typeof:u,render:O}},xe.isValidElement=te,xe.lazy=function(O){return{$$typeof:m,_payload:{_status:-1,_result:O},_init:ye}},xe.memo=function(O,F){return{$$typeof:p,type:O,compare:F===void 0?null:F}},xe.startTransition=function(O){var F=K.transition;K.transition={};try{O()}finally{K.transition=F}},xe.unstable_act=J,xe.useCallback=function(O,F){return me.current.useCallback(O,F)},xe.useContext=function(O){return me.current.useContext(O)},xe.useDebugValue=function(){},xe.useDeferredValue=function(O){return me.current.useDeferredValue(O)},xe.useEffect=function(O,F){return me.current.useEffect(O,F)},xe.useId=function(){return me.current.useId()},xe.useImperativeHandle=function(O,F,ge){return me.current.useImperativeHandle(O,F,ge)},xe.useInsertionEffect=function(O,F){return me.current.useInsertionEffect(O,F)},xe.useLayoutEffect=function(O,F){return me.current.useLayoutEffect(O,F)},xe.useMemo=function(O,F){return me.current.useMemo(O,F)},xe.useReducer=function(O,F,ge){return me.current.useReducer(O,F,ge)},xe.useRef=function(O){return me.current.useRef(O)},xe.useState=function(O){return me.current.useState(O)},xe.useSyncExternalStore=function(O,F,ge){return me.current.useSyncExternalStore(O,F,ge)},xe.useTransition=function(){return me.current.useTransition()},xe.version="18.3.1",xe}var Ip;function Yu(){return Ip||(Ip=1,zc.exports=V0()),zc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op;function q0(){if(Op)return fi;Op=1;var n=Yu(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,p){var m,y={},b=null,w=null;p!==void 0&&(b=""+p),h.key!==void 0&&(b=""+h.key),h.ref!==void 0&&(w=h.ref);for(m in h)r.call(h,m)&&!a.hasOwnProperty(m)&&(y[m]=h[m]);if(u&&u.defaultProps)for(m in h=u.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:e,type:u,key:b,ref:w,props:y,_owner:o.current}}return fi.Fragment=t,fi.jsx=l,fi.jsxs=l,fi}var Mp;function G0(){return Mp||(Mp=1,$c.exports=q0()),$c.exports}var f=G0(),z=Yu();const pa=Cg(z);var Go={},Fc={exports:{}},_t={},Wc={exports:{}},Vc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function Q0(){return Pp||(Pp=1,(function(n){function e(K,oe){var J=K.length;K.push(oe);e:for(;0<J;){var O=J-1>>>1,F=K[O];if(0<o(F,oe))K[O]=oe,K[J]=F,J=O;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var oe=K[0],J=K.pop();if(J!==oe){K[0]=J;e:for(var O=0,F=K.length,ge=F>>>1;O<ge;){var we=2*(O+1)-1,Q=K[we],se=we+1,Se=K[se];if(0>o(Q,J))se<F&&0>o(Se,Q)?(K[O]=Se,K[se]=J,O=se):(K[O]=Q,K[we]=J,O=we);else if(se<F&&0>o(Se,J))K[O]=Se,K[se]=J,O=se;else break e}}return oe}function o(K,oe){var J=K.sortIndex-oe.sortIndex;return J!==0?J:K.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],p=[],m=1,y=null,b=3,w=!1,E=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(K){for(var oe=t(p);oe!==null;){if(oe.callback===null)r(p);else if(oe.startTime<=K)r(p),oe.sortIndex=oe.expirationTime,e(h,oe);else break;oe=t(p)}}function I(K){if(_=!1,N(K),!E)if(t(h)!==null)E=!0,ye($);else{var oe=t(p);oe!==null&&me(I,oe.startTime-K)}}function $(K,oe){E=!1,_&&(_=!1,T(H),H=-1),w=!0;var J=b;try{for(N(oe),y=t(h);y!==null&&(!(y.expirationTime>oe)||K&&!ee());){var O=y.callback;if(typeof O=="function"){y.callback=null,b=y.priorityLevel;var F=O(y.expirationTime<=oe);oe=n.unstable_now(),typeof F=="function"?y.callback=F:y===t(h)&&r(h),N(oe)}else r(h);y=t(h)}if(y!==null)var ge=!0;else{var we=t(p);we!==null&&me(I,we.startTime-oe),ge=!1}return ge}finally{y=null,b=J,w=!1}}var A=!1,M=null,H=-1,G=5,te=-1;function ee(){return!(n.unstable_now()-te<G)}function ve(){if(M!==null){var K=n.unstable_now();te=K;var oe=!0;try{oe=M(!0,K)}finally{oe?Ae():(A=!1,M=null)}}else A=!1}var Ae;if(typeof R=="function")Ae=function(){R(ve)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,Pe=Ne.port2;Ne.port1.onmessage=ve,Ae=function(){Pe.postMessage(null)}}else Ae=function(){S(ve,0)};function ye(K){M=K,A||(A=!0,Ae())}function me(K,oe){H=S(function(){K(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_continueExecution=function(){E||w||(E=!0,ye($))},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(K){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var J=b;b=oe;try{return K()}finally{b=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(K,oe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var J=b;b=K;try{return oe()}finally{b=J}},n.unstable_scheduleCallback=function(K,oe,J){var O=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?O+J:O):J=O,K){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=J+F,K={id:m++,callback:oe,priorityLevel:K,startTime:J,expirationTime:F,sortIndex:-1},J>O?(K.sortIndex=J,e(p,K),t(h)===null&&K===t(p)&&(_?(T(H),H=-1):_=!0,me(I,J-O))):(K.sortIndex=F,e(h,K),E||w||(E=!0,ye($))),K},n.unstable_shouldYield=ee,n.unstable_wrapCallback=function(K){var oe=b;return function(){var J=b;b=oe;try{return K.apply(this,arguments)}finally{b=J}}}})(Vc)),Vc}var Lp;function Y0(){return Lp||(Lp=1,Wc.exports=Q0()),Wc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Up;function K0(){if(Up)return _t;Up=1;var n=Yu(),e=Y0();function t(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(s,i){l(s,i),l(s+"Capture",i)}function l(s,i){for(o[s]=i,s=0;s<i.length;s++)r.add(i[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function b(s){return h.call(y,s)?!0:h.call(m,s)?!1:p.test(s)?y[s]=!0:(m[s]=!0,!1)}function w(s,i,c,d){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function E(s,i,c,d){if(i===null||typeof i>"u"||w(s,i,c,d))return!0;if(d)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function _(s,i,c,d,g,v,x){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=s,this.type=i,this.sanitizeURL=v,this.removeEmptyString=x}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){S[s]=new _(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];S[i]=new _(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){S[s]=new _(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){S[s]=new _(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){S[s]=new _(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){S[s]=new _(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){S[s]=new _(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){S[s]=new _(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){S[s]=new _(s,5,!1,s.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function R(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(T,R);S[i]=new _(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(T,R);S[i]=new _(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(T,R);S[i]=new _(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){S[s]=new _(s,1,!1,s.toLowerCase(),null,!1,!1)}),S.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){S[s]=new _(s,1,!1,s.toLowerCase(),null,!0,!0)});function N(s,i,c,d){var g=S.hasOwnProperty(i)?S[i]:null;(g!==null?g.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(E(i,c,g,d)&&(c=null),d||g===null?b(i)&&(c===null?s.removeAttribute(i):s.setAttribute(i,""+c)):g.mustUseProperty?s[g.propertyName]=c===null?g.type===3?!1:"":c:(i=g.attributeName,d=g.attributeNamespace,c===null?s.removeAttribute(i):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,d?s.setAttributeNS(d,i,c):s.setAttribute(i,c))))}var I=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),A=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),ee=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),me=Symbol.for("react.offscreen"),K=Symbol.iterator;function oe(s){return s===null||typeof s!="object"?null:(s=K&&s[K]||s["@@iterator"],typeof s=="function"?s:null)}var J=Object.assign,O;function F(s){if(O===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);O=i&&i[1]||""}return`
`+O+s}var ge=!1;function we(s,i){if(!s||ge)return"";ge=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var d=B}Reflect.construct(s,[],i)}else{try{i.call()}catch(B){d=B}s.call(i.prototype)}else{try{throw Error()}catch(B){d=B}s()}}catch(B){if(B&&d&&typeof B.stack=="string"){for(var g=B.stack.split(`
`),v=d.stack.split(`
`),x=g.length-1,k=v.length-1;1<=x&&0<=k&&g[x]!==v[k];)k--;for(;1<=x&&0<=k;x--,k--)if(g[x]!==v[k]){if(x!==1||k!==1)do if(x--,k--,0>k||g[x]!==v[k]){var D=`
`+g[x].replace(" at new "," at ");return s.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",s.displayName)),D}while(1<=x&&0<=k);break}}}finally{ge=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?F(s):""}function Q(s){switch(s.tag){case 5:return F(s.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return s=we(s.type,!1),s;case 11:return s=we(s.type.render,!1),s;case 1:return s=we(s.type,!0),s;default:return""}}function se(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case M:return"Fragment";case A:return"Portal";case G:return"Profiler";case H:return"StrictMode";case Ae:return"Suspense";case Ne:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case ee:return(s.displayName||"Context")+".Consumer";case te:return(s._context.displayName||"Context")+".Provider";case ve:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Pe:return i=s.displayName||null,i!==null?i:se(s.type)||"Memo";case ye:i=s._payload,s=s._init;try{return se(s(i))}catch{}}return null}function Se(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(i);case 8:return i===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function be(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Te(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function lt(s){var i=Te(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),d=""+s[i];if(!s.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,v=c.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(x){d=""+x,v.call(this,x)}}),Object.defineProperty(s,i,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function tr(s){s._valueTracker||(s._valueTracker=lt(s))}function ks(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var c=i.getValue(),d="";return s&&(d=Te(s)?s.checked?"true":"false":s.value),s=d,s!==c?(i.setValue(s),!0):!1}function nr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function jr(s,i){var c=i.checked;return J({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function Cs(s,i){var c=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;c=be(i.value!=null?i.value:c),s._wrapperState={initialChecked:d,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function As(s,i){i=i.checked,i!=null&&N(s,"checked",i,!1)}function Ya(s,i){As(s,i);var c=be(i.value),d=i.type;if(c!=null)d==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?Ka(s,i.type,c):i.hasOwnProperty("defaultValue")&&Ka(s,i.type,be(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function Hd(s,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,c||i===s.value||(s.value=i),s.defaultValue=i}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function Ka(s,i,c){(i!=="number"||nr(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var Ts=Array.isArray;function Ir(s,i,c,d){if(s=s.options,i){i={};for(var g=0;g<c.length;g++)i["$"+c[g]]=!0;for(c=0;c<s.length;c++)g=i.hasOwnProperty("$"+s[c].value),s[c].selected!==g&&(s[c].selected=g),g&&d&&(s[c].defaultSelected=!0)}else{for(c=""+be(c),i=null,g=0;g<s.length;g++){if(s[g].value===c){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function Ja(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function $d(s,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(t(92));if(Ts(c)){if(1<c.length)throw Error(t(93));c=c[0]}i=c}i==null&&(i=""),c=i}s._wrapperState={initialValue:be(c)}}function zd(s,i){var c=be(i.value),d=be(i.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),i.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),d!=null&&(s.defaultValue=""+d)}function Fd(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function Wd(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Za(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?Wd(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Ui,Vd=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,d,g){MSApp.execUnsafeLocalFunction(function(){return s(i,c,d,g)})}:s})(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(Ui=Ui||document.createElement("div"),Ui.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Ui.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function Ds(s,i){if(i){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=i;return}}s.textContent=i}var Rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yy=["Webkit","ms","Moz","O"];Object.keys(Rs).forEach(function(s){Yy.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),Rs[i]=Rs[s]})});function qd(s,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||Rs.hasOwnProperty(s)&&Rs[s]?(""+i).trim():i+"px"}function Gd(s,i){s=s.style;for(var c in i)if(i.hasOwnProperty(c)){var d=c.indexOf("--")===0,g=qd(c,i[c],d);c==="float"&&(c="cssFloat"),d?s.setProperty(c,g):s[c]=g}}var Ky=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xa(s,i){if(i){if(Ky[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function el(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tl=null;function nl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var rl=null,Or=null,Mr=null;function Qd(s){if(s=Zs(s)){if(typeof rl!="function")throw Error(t(280));var i=s.stateNode;i&&(i=ao(i),rl(s.stateNode,s.type,i))}}function Yd(s){Or?Mr?Mr.push(s):Mr=[s]:Or=s}function Kd(){if(Or){var s=Or,i=Mr;if(Mr=Or=null,Qd(s),i)for(s=0;s<i.length;s++)Qd(i[s])}}function Jd(s,i){return s(i)}function Zd(){}var sl=!1;function Xd(s,i,c){if(sl)return s(i,c);sl=!0;try{return Jd(s,i,c)}finally{sl=!1,(Or!==null||Mr!==null)&&(Zd(),Kd())}}function Ns(s,i){var c=s.stateNode;if(c===null)return null;var d=ao(c);if(d===null)return null;c=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(t(231,i,typeof c));return c}var il=!1;if(u)try{var js={};Object.defineProperty(js,"passive",{get:function(){il=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{il=!1}function Jy(s,i,c,d,g,v,x,k,D){var B=Array.prototype.slice.call(arguments,3);try{i.apply(c,B)}catch(V){this.onError(V)}}var Is=!1,Bi=null,Hi=!1,ol=null,Zy={onError:function(s){Is=!0,Bi=s}};function Xy(s,i,c,d,g,v,x,k,D){Is=!1,Bi=null,Jy.apply(Zy,arguments)}function ew(s,i,c,d,g,v,x,k,D){if(Xy.apply(this,arguments),Is){if(Is){var B=Bi;Is=!1,Bi=null}else throw Error(t(198));Hi||(Hi=!0,ol=B)}}function rr(s){var i=s,c=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(c=i.return),s=i.return;while(s)}return i.tag===3?c:null}function eh(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function th(s){if(rr(s)!==s)throw Error(t(188))}function tw(s){var i=s.alternate;if(!i){if(i=rr(s),i===null)throw Error(t(188));return i!==s?null:s}for(var c=s,d=i;;){var g=c.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===c)return th(g),s;if(v===d)return th(g),i;v=v.sibling}throw Error(t(188))}if(c.return!==d.return)c=g,d=v;else{for(var x=!1,k=g.child;k;){if(k===c){x=!0,c=g,d=v;break}if(k===d){x=!0,d=g,c=v;break}k=k.sibling}if(!x){for(k=v.child;k;){if(k===c){x=!0,c=v,d=g;break}if(k===d){x=!0,d=v,c=g;break}k=k.sibling}if(!x)throw Error(t(189))}}if(c.alternate!==d)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?s:i}function nh(s){return s=tw(s),s!==null?rh(s):null}function rh(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=rh(s);if(i!==null)return i;s=s.sibling}return null}var sh=e.unstable_scheduleCallback,ih=e.unstable_cancelCallback,nw=e.unstable_shouldYield,rw=e.unstable_requestPaint,Ge=e.unstable_now,sw=e.unstable_getCurrentPriorityLevel,al=e.unstable_ImmediatePriority,oh=e.unstable_UserBlockingPriority,$i=e.unstable_NormalPriority,iw=e.unstable_LowPriority,ah=e.unstable_IdlePriority,zi=null,en=null;function ow(s){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(zi,s,void 0,(s.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:cw,aw=Math.log,lw=Math.LN2;function cw(s){return s>>>=0,s===0?32:31-(aw(s)/lw|0)|0}var Fi=64,Wi=4194304;function Os(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Vi(s,i){var c=s.pendingLanes;if(c===0)return 0;var d=0,g=s.suspendedLanes,v=s.pingedLanes,x=c&268435455;if(x!==0){var k=x&~g;k!==0?d=Os(k):(v&=x,v!==0&&(d=Os(v)))}else x=c&~g,x!==0?d=Os(x):v!==0&&(d=Os(v));if(d===0)return 0;if(i!==0&&i!==d&&(i&g)===0&&(g=d&-d,v=i&-i,g>=v||g===16&&(v&4194240)!==0))return i;if((d&4)!==0&&(d|=c&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=d;0<i;)c=31-Ht(i),g=1<<c,d|=s[c],i&=~g;return d}function uw(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dw(s,i){for(var c=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes;0<v;){var x=31-Ht(v),k=1<<x,D=g[x];D===-1?((k&c)===0||(k&d)!==0)&&(g[x]=uw(k,i)):D<=i&&(s.expiredLanes|=k),v&=~k}}function ll(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function lh(){var s=Fi;return Fi<<=1,(Fi&4194240)===0&&(Fi=64),s}function cl(s){for(var i=[],c=0;31>c;c++)i.push(s);return i}function Ms(s,i,c){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-Ht(i),s[i]=c}function hw(s,i){var c=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<c;){var g=31-Ht(c),v=1<<g;i[g]=0,d[g]=-1,s[g]=-1,c&=~v}}function ul(s,i){var c=s.entangledLanes|=i;for(s=s.entanglements;c;){var d=31-Ht(c),g=1<<d;g&i|s[d]&i&&(s[d]|=i),c&=~g}}var De=0;function ch(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var uh,dl,dh,hh,fh,hl=!1,qi=[],kn=null,Cn=null,An=null,Ps=new Map,Ls=new Map,Tn=[],fw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ph(s,i){switch(s){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":Ps.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ls.delete(i.pointerId)}}function Us(s,i,c,d,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:i,domEventName:c,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},i!==null&&(i=Zs(i),i!==null&&dl(i)),s):(s.eventSystemFlags|=d,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function pw(s,i,c,d,g){switch(i){case"focusin":return kn=Us(kn,s,i,c,d,g),!0;case"dragenter":return Cn=Us(Cn,s,i,c,d,g),!0;case"mouseover":return An=Us(An,s,i,c,d,g),!0;case"pointerover":var v=g.pointerId;return Ps.set(v,Us(Ps.get(v)||null,s,i,c,d,g)),!0;case"gotpointercapture":return v=g.pointerId,Ls.set(v,Us(Ls.get(v)||null,s,i,c,d,g)),!0}return!1}function mh(s){var i=sr(s.target);if(i!==null){var c=rr(i);if(c!==null){if(i=c.tag,i===13){if(i=eh(c),i!==null){s.blockedOn=i,fh(s.priority,function(){dh(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Gi(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var c=pl(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var d=new c.constructor(c.type,c);tl=d,c.target.dispatchEvent(d),tl=null}else return i=Zs(c),i!==null&&dl(i),s.blockedOn=c,!1;i.shift()}return!0}function gh(s,i,c){Gi(s)&&c.delete(i)}function mw(){hl=!1,kn!==null&&Gi(kn)&&(kn=null),Cn!==null&&Gi(Cn)&&(Cn=null),An!==null&&Gi(An)&&(An=null),Ps.forEach(gh),Ls.forEach(gh)}function Bs(s,i){s.blockedOn===i&&(s.blockedOn=null,hl||(hl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mw)))}function Hs(s){function i(g){return Bs(g,s)}if(0<qi.length){Bs(qi[0],s);for(var c=1;c<qi.length;c++){var d=qi[c];d.blockedOn===s&&(d.blockedOn=null)}}for(kn!==null&&Bs(kn,s),Cn!==null&&Bs(Cn,s),An!==null&&Bs(An,s),Ps.forEach(i),Ls.forEach(i),c=0;c<Tn.length;c++)d=Tn[c],d.blockedOn===s&&(d.blockedOn=null);for(;0<Tn.length&&(c=Tn[0],c.blockedOn===null);)mh(c),c.blockedOn===null&&Tn.shift()}var Pr=I.ReactCurrentBatchConfig,Qi=!0;function gw(s,i,c,d){var g=De,v=Pr.transition;Pr.transition=null;try{De=1,fl(s,i,c,d)}finally{De=g,Pr.transition=v}}function vw(s,i,c,d){var g=De,v=Pr.transition;Pr.transition=null;try{De=4,fl(s,i,c,d)}finally{De=g,Pr.transition=v}}function fl(s,i,c,d){if(Qi){var g=pl(s,i,c,d);if(g===null)Nl(s,i,d,Yi,c),ph(s,d);else if(pw(g,s,i,c,d))d.stopPropagation();else if(ph(s,d),i&4&&-1<fw.indexOf(s)){for(;g!==null;){var v=Zs(g);if(v!==null&&uh(v),v=pl(s,i,c,d),v===null&&Nl(s,i,d,Yi,c),v===g)break;g=v}g!==null&&d.stopPropagation()}else Nl(s,i,d,null,c)}}var Yi=null;function pl(s,i,c,d){if(Yi=null,s=nl(d),s=sr(s),s!==null)if(i=rr(s),i===null)s=null;else if(c=i.tag,c===13){if(s=eh(i),s!==null)return s;s=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return Yi=s,null}function vh(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sw()){case al:return 1;case oh:return 4;case $i:case iw:return 16;case ah:return 536870912;default:return 16}default:return 16}}var Dn=null,ml=null,Ki=null;function yh(){if(Ki)return Ki;var s,i=ml,c=i.length,d,g="value"in Dn?Dn.value:Dn.textContent,v=g.length;for(s=0;s<c&&i[s]===g[s];s++);var x=c-s;for(d=1;d<=x&&i[c-d]===g[v-d];d++);return Ki=g.slice(s,1<d?1-d:void 0)}function Ji(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Zi(){return!0}function wh(){return!1}function kt(s){function i(c,d,g,v,x){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=x,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(c=s[k],this[k]=c?c(v):v[k]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Zi:wh,this.isPropagationStopped=wh,this}return J(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),i}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gl=kt(Lr),$s=J({},Lr,{view:0,detail:0}),yw=kt($s),vl,yl,zs,Xi=J({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bl,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==zs&&(zs&&s.type==="mousemove"?(vl=s.screenX-zs.screenX,yl=s.screenY-zs.screenY):yl=vl=0,zs=s),vl)},movementY:function(s){return"movementY"in s?s.movementY:yl}}),bh=kt(Xi),ww=J({},Xi,{dataTransfer:0}),bw=kt(ww),xw=J({},$s,{relatedTarget:0}),wl=kt(xw),Sw=J({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),_w=kt(Sw),Ew=J({},Lr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),kw=kt(Ew),Cw=J({},Lr,{data:0}),xh=kt(Cw),Aw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rw(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Dw[s])?!!i[s]:!1}function bl(){return Rw}var Nw=J({},$s,{key:function(s){if(s.key){var i=Aw[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Ji(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Tw[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bl,charCode:function(s){return s.type==="keypress"?Ji(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ji(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),jw=kt(Nw),Iw=J({},Xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sh=kt(Iw),Ow=J({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bl}),Mw=kt(Ow),Pw=J({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lw=kt(Pw),Uw=J({},Xi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Bw=kt(Uw),Hw=[9,13,27,32],xl=u&&"CompositionEvent"in window,Fs=null;u&&"documentMode"in document&&(Fs=document.documentMode);var $w=u&&"TextEvent"in window&&!Fs,_h=u&&(!xl||Fs&&8<Fs&&11>=Fs),Eh=" ",kh=!1;function Ch(s,i){switch(s){case"keyup":return Hw.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ah(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ur=!1;function zw(s,i){switch(s){case"compositionend":return Ah(i);case"keypress":return i.which!==32?null:(kh=!0,Eh);case"textInput":return s=i.data,s===Eh&&kh?null:s;default:return null}}function Fw(s,i){if(Ur)return s==="compositionend"||!xl&&Ch(s,i)?(s=yh(),Ki=ml=Dn=null,Ur=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _h&&i.locale!=="ko"?null:i.data;default:return null}}var Ww={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Th(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!Ww[s.type]:i==="textarea"}function Dh(s,i,c,d){Yd(d),i=so(i,"onChange"),0<i.length&&(c=new gl("onChange","change",null,c,d),s.push({event:c,listeners:i}))}var Ws=null,Vs=null;function Vw(s){Gh(s,0)}function eo(s){var i=Fr(s);if(ks(i))return s}function qw(s,i){if(s==="change")return i}var Rh=!1;if(u){var Sl;if(u){var _l="oninput"in document;if(!_l){var Nh=document.createElement("div");Nh.setAttribute("oninput","return;"),_l=typeof Nh.oninput=="function"}Sl=_l}else Sl=!1;Rh=Sl&&(!document.documentMode||9<document.documentMode)}function jh(){Ws&&(Ws.detachEvent("onpropertychange",Ih),Vs=Ws=null)}function Ih(s){if(s.propertyName==="value"&&eo(Vs)){var i=[];Dh(i,Vs,s,nl(s)),Xd(Vw,i)}}function Gw(s,i,c){s==="focusin"?(jh(),Ws=i,Vs=c,Ws.attachEvent("onpropertychange",Ih)):s==="focusout"&&jh()}function Qw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return eo(Vs)}function Yw(s,i){if(s==="click")return eo(i)}function Kw(s,i){if(s==="input"||s==="change")return eo(i)}function Jw(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var $t=typeof Object.is=="function"?Object.is:Jw;function qs(s,i){if($t(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var c=Object.keys(s),d=Object.keys(i);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!h.call(i,g)||!$t(s[g],i[g]))return!1}return!0}function Oh(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Mh(s,i){var c=Oh(s);s=0;for(var d;c;){if(c.nodeType===3){if(d=s+c.textContent.length,s<=i&&d>=i)return{node:c,offset:i-s};s=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Oh(c)}}function Ph(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Ph(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Lh(){for(var s=window,i=nr();i instanceof s.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)s=i.contentWindow;else break;i=nr(s.document)}return i}function El(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function Zw(s){var i=Lh(),c=s.focusedElem,d=s.selectionRange;if(i!==c&&c&&c.ownerDocument&&Ph(c.ownerDocument.documentElement,c)){if(d!==null&&El(c)){if(i=d.start,s=d.end,s===void 0&&(s=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(s,c.value.length);else if(s=(i=c.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var g=c.textContent.length,v=Math.min(d.start,g);d=d.end===void 0?v:Math.min(d.end,g),!s.extend&&v>d&&(g=d,d=v,v=g),g=Mh(c,v);var x=Mh(c,d);g&&x&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==x.node||s.focusOffset!==x.offset)&&(i=i.createRange(),i.setStart(g.node,g.offset),s.removeAllRanges(),v>d?(s.addRange(i),s.extend(x.node,x.offset)):(i.setEnd(x.node,x.offset),s.addRange(i)))}}for(i=[],s=c;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)s=i[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Xw=u&&"documentMode"in document&&11>=document.documentMode,Br=null,kl=null,Gs=null,Cl=!1;function Uh(s,i,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Cl||Br==null||Br!==nr(d)||(d=Br,"selectionStart"in d&&El(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Gs&&qs(Gs,d)||(Gs=d,d=so(kl,"onSelect"),0<d.length&&(i=new gl("onSelect","select",null,i,c),s.push({event:i,listeners:d}),i.target=Br)))}function to(s,i){var c={};return c[s.toLowerCase()]=i.toLowerCase(),c["Webkit"+s]="webkit"+i,c["Moz"+s]="moz"+i,c}var Hr={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionend:to("Transition","TransitionEnd")},Al={},Bh={};u&&(Bh=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function no(s){if(Al[s])return Al[s];if(!Hr[s])return s;var i=Hr[s],c;for(c in i)if(i.hasOwnProperty(c)&&c in Bh)return Al[s]=i[c];return s}var Hh=no("animationend"),$h=no("animationiteration"),zh=no("animationstart"),Fh=no("transitionend"),Wh=new Map,Vh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rn(s,i){Wh.set(s,i),a(i,[s])}for(var Tl=0;Tl<Vh.length;Tl++){var Dl=Vh[Tl],e0=Dl.toLowerCase(),t0=Dl[0].toUpperCase()+Dl.slice(1);Rn(e0,"on"+t0)}Rn(Hh,"onAnimationEnd"),Rn($h,"onAnimationIteration"),Rn(zh,"onAnimationStart"),Rn("dblclick","onDoubleClick"),Rn("focusin","onFocus"),Rn("focusout","onBlur"),Rn(Fh,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qs));function qh(s,i,c){var d=s.type||"unknown-event";s.currentTarget=c,ew(d,i,void 0,s),s.currentTarget=null}function Gh(s,i){i=(i&4)!==0;for(var c=0;c<s.length;c++){var d=s[c],g=d.event;d=d.listeners;e:{var v=void 0;if(i)for(var x=d.length-1;0<=x;x--){var k=d[x],D=k.instance,B=k.currentTarget;if(k=k.listener,D!==v&&g.isPropagationStopped())break e;qh(g,k,B),v=D}else for(x=0;x<d.length;x++){if(k=d[x],D=k.instance,B=k.currentTarget,k=k.listener,D!==v&&g.isPropagationStopped())break e;qh(g,k,B),v=D}}}if(Hi)throw s=ol,Hi=!1,ol=null,s}function Le(s,i){var c=i[Ll];c===void 0&&(c=i[Ll]=new Set);var d=s+"__bubble";c.has(d)||(Qh(i,s,2,!1),c.add(d))}function Rl(s,i,c){var d=0;i&&(d|=4),Qh(c,s,d,i)}var ro="_reactListening"+Math.random().toString(36).slice(2);function Ys(s){if(!s[ro]){s[ro]=!0,r.forEach(function(c){c!=="selectionchange"&&(n0.has(c)||Rl(c,!1,s),Rl(c,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[ro]||(i[ro]=!0,Rl("selectionchange",!1,i))}}function Qh(s,i,c,d){switch(vh(i)){case 1:var g=gw;break;case 4:g=vw;break;default:g=fl}c=g.bind(null,i,c,s),g=void 0,!il||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(i,c,{capture:!0,passive:g}):s.addEventListener(i,c,!0):g!==void 0?s.addEventListener(i,c,{passive:g}):s.addEventListener(i,c,!1)}function Nl(s,i,c,d,g){var v=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var k=d.stateNode.containerInfo;if(k===g||k.nodeType===8&&k.parentNode===g)break;if(x===4)for(x=d.return;x!==null;){var D=x.tag;if((D===3||D===4)&&(D=x.stateNode.containerInfo,D===g||D.nodeType===8&&D.parentNode===g))return;x=x.return}for(;k!==null;){if(x=sr(k),x===null)return;if(D=x.tag,D===5||D===6){d=v=x;continue e}k=k.parentNode}}d=d.return}Xd(function(){var B=v,V=nl(c),q=[];e:{var W=Wh.get(s);if(W!==void 0){var Z=gl,ne=s;switch(s){case"keypress":if(Ji(c)===0)break e;case"keydown":case"keyup":Z=jw;break;case"focusin":ne="focus",Z=wl;break;case"focusout":ne="blur",Z=wl;break;case"beforeblur":case"afterblur":Z=wl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=bh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=bw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Mw;break;case Hh:case $h:case zh:Z=_w;break;case Fh:Z=Lw;break;case"scroll":Z=yw;break;case"wheel":Z=Bw;break;case"copy":case"cut":case"paste":Z=kw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Sh}var re=(i&4)!==0,Qe=!re&&s==="scroll",P=re?W!==null?W+"Capture":null:W;re=[];for(var j=B,L;j!==null;){L=j;var Y=L.stateNode;if(L.tag===5&&Y!==null&&(L=Y,P!==null&&(Y=Ns(j,P),Y!=null&&re.push(Ks(j,Y,L)))),Qe)break;j=j.return}0<re.length&&(W=new Z(W,ne,null,c,V),q.push({event:W,listeners:re}))}}if((i&7)===0){e:{if(W=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",W&&c!==tl&&(ne=c.relatedTarget||c.fromElement)&&(sr(ne)||ne[un]))break e;if((Z||W)&&(W=V.window===V?V:(W=V.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(ne=c.relatedTarget||c.toElement,Z=B,ne=ne?sr(ne):null,ne!==null&&(Qe=rr(ne),ne!==Qe||ne.tag!==5&&ne.tag!==6)&&(ne=null)):(Z=null,ne=B),Z!==ne)){if(re=bh,Y="onMouseLeave",P="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(re=Sh,Y="onPointerLeave",P="onPointerEnter",j="pointer"),Qe=Z==null?W:Fr(Z),L=ne==null?W:Fr(ne),W=new re(Y,j+"leave",Z,c,V),W.target=Qe,W.relatedTarget=L,Y=null,sr(V)===B&&(re=new re(P,j+"enter",ne,c,V),re.target=L,re.relatedTarget=Qe,Y=re),Qe=Y,Z&&ne)t:{for(re=Z,P=ne,j=0,L=re;L;L=$r(L))j++;for(L=0,Y=P;Y;Y=$r(Y))L++;for(;0<j-L;)re=$r(re),j--;for(;0<L-j;)P=$r(P),L--;for(;j--;){if(re===P||P!==null&&re===P.alternate)break t;re=$r(re),P=$r(P)}re=null}else re=null;Z!==null&&Yh(q,W,Z,re,!1),ne!==null&&Qe!==null&&Yh(q,Qe,ne,re,!0)}}e:{if(W=B?Fr(B):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var ie=qw;else if(Th(W))if(Rh)ie=Kw;else{ie=Qw;var ce=Gw}else(Z=W.nodeName)&&Z.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(ie=Yw);if(ie&&(ie=ie(s,B))){Dh(q,ie,c,V);break e}ce&&ce(s,W,B),s==="focusout"&&(ce=W._wrapperState)&&ce.controlled&&W.type==="number"&&Ka(W,"number",W.value)}switch(ce=B?Fr(B):window,s){case"focusin":(Th(ce)||ce.contentEditable==="true")&&(Br=ce,kl=B,Gs=null);break;case"focusout":Gs=kl=Br=null;break;case"mousedown":Cl=!0;break;case"contextmenu":case"mouseup":case"dragend":Cl=!1,Uh(q,c,V);break;case"selectionchange":if(Xw)break;case"keydown":case"keyup":Uh(q,c,V)}var ue;if(xl)e:{switch(s){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else Ur?Ch(s,c)&&(pe="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(pe="onCompositionStart");pe&&(_h&&c.locale!=="ko"&&(Ur||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&Ur&&(ue=yh()):(Dn=V,ml="value"in Dn?Dn.value:Dn.textContent,Ur=!0)),ce=so(B,pe),0<ce.length&&(pe=new xh(pe,s,null,c,V),q.push({event:pe,listeners:ce}),ue?pe.data=ue:(ue=Ah(c),ue!==null&&(pe.data=ue)))),(ue=$w?zw(s,c):Fw(s,c))&&(B=so(B,"onBeforeInput"),0<B.length&&(V=new xh("onBeforeInput","beforeinput",null,c,V),q.push({event:V,listeners:B}),V.data=ue))}Gh(q,i)})}function Ks(s,i,c){return{instance:s,listener:i,currentTarget:c}}function so(s,i){for(var c=i+"Capture",d=[];s!==null;){var g=s,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Ns(s,c),v!=null&&d.unshift(Ks(s,v,g)),v=Ns(s,i),v!=null&&d.push(Ks(s,v,g))),s=s.return}return d}function $r(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Yh(s,i,c,d,g){for(var v=i._reactName,x=[];c!==null&&c!==d;){var k=c,D=k.alternate,B=k.stateNode;if(D!==null&&D===d)break;k.tag===5&&B!==null&&(k=B,g?(D=Ns(c,v),D!=null&&x.unshift(Ks(c,D,k))):g||(D=Ns(c,v),D!=null&&x.push(Ks(c,D,k)))),c=c.return}x.length!==0&&s.push({event:i,listeners:x})}var r0=/\r\n?/g,s0=/\u0000|\uFFFD/g;function Kh(s){return(typeof s=="string"?s:""+s).replace(r0,`
`).replace(s0,"")}function io(s,i,c){if(i=Kh(i),Kh(s)!==i&&c)throw Error(t(425))}function oo(){}var jl=null,Il=null;function Ol(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ml=typeof setTimeout=="function"?setTimeout:void 0,i0=typeof clearTimeout=="function"?clearTimeout:void 0,Jh=typeof Promise=="function"?Promise:void 0,o0=typeof queueMicrotask=="function"?queueMicrotask:typeof Jh<"u"?function(s){return Jh.resolve(null).then(s).catch(a0)}:Ml;function a0(s){setTimeout(function(){throw s})}function Pl(s,i){var c=i,d=0;do{var g=c.nextSibling;if(s.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(d===0){s.removeChild(g),Hs(i);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=g}while(c);Hs(i)}function Nn(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function Zh(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return s;i--}else c==="/$"&&i++}s=s.previousSibling}return null}var zr=Math.random().toString(36).slice(2),tn="__reactFiber$"+zr,Js="__reactProps$"+zr,un="__reactContainer$"+zr,Ll="__reactEvents$"+zr,l0="__reactListeners$"+zr,c0="__reactHandles$"+zr;function sr(s){var i=s[tn];if(i)return i;for(var c=s.parentNode;c;){if(i=c[un]||c[tn]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(s=Zh(s);s!==null;){if(c=s[tn])return c;s=Zh(s)}return i}s=c,c=s.parentNode}return null}function Zs(s){return s=s[tn]||s[un],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Fr(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function ao(s){return s[Js]||null}var Ul=[],Wr=-1;function jn(s){return{current:s}}function Ue(s){0>Wr||(s.current=Ul[Wr],Ul[Wr]=null,Wr--)}function Oe(s,i){Wr++,Ul[Wr]=s.current,s.current=i}var In={},ct=jn(In),yt=jn(!1),ir=In;function Vr(s,i){var c=s.type.contextTypes;if(!c)return In;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in c)g[v]=i[v];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=g),g}function wt(s){return s=s.childContextTypes,s!=null}function lo(){Ue(yt),Ue(ct)}function Xh(s,i,c){if(ct.current!==In)throw Error(t(168));Oe(ct,i),Oe(yt,c)}function ef(s,i,c){var d=s.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return c;d=d.getChildContext();for(var g in d)if(!(g in i))throw Error(t(108,Se(s)||"Unknown",g));return J({},c,d)}function co(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||In,ir=ct.current,Oe(ct,s),Oe(yt,yt.current),!0}function tf(s,i,c){var d=s.stateNode;if(!d)throw Error(t(169));c?(s=ef(s,i,ir),d.__reactInternalMemoizedMergedChildContext=s,Ue(yt),Ue(ct),Oe(ct,s)):Ue(yt),Oe(yt,c)}var dn=null,uo=!1,Bl=!1;function nf(s){dn===null?dn=[s]:dn.push(s)}function u0(s){uo=!0,nf(s)}function On(){if(!Bl&&dn!==null){Bl=!0;var s=0,i=De;try{var c=dn;for(De=1;s<c.length;s++){var d=c[s];do d=d(!0);while(d!==null)}dn=null,uo=!1}catch(g){throw dn!==null&&(dn=dn.slice(s+1)),sh(al,On),g}finally{De=i,Bl=!1}}return null}var qr=[],Gr=0,ho=null,fo=0,Ot=[],Mt=0,or=null,hn=1,fn="";function ar(s,i){qr[Gr++]=fo,qr[Gr++]=ho,ho=s,fo=i}function rf(s,i,c){Ot[Mt++]=hn,Ot[Mt++]=fn,Ot[Mt++]=or,or=s;var d=hn;s=fn;var g=32-Ht(d)-1;d&=~(1<<g),c+=1;var v=32-Ht(i)+g;if(30<v){var x=g-g%5;v=(d&(1<<x)-1).toString(32),d>>=x,g-=x,hn=1<<32-Ht(i)+g|c<<g|d,fn=v+s}else hn=1<<v|c<<g|d,fn=s}function Hl(s){s.return!==null&&(ar(s,1),rf(s,1,0))}function $l(s){for(;s===ho;)ho=qr[--Gr],qr[Gr]=null,fo=qr[--Gr],qr[Gr]=null;for(;s===or;)or=Ot[--Mt],Ot[Mt]=null,fn=Ot[--Mt],Ot[Mt]=null,hn=Ot[--Mt],Ot[Mt]=null}var Ct=null,At=null,He=!1,zt=null;function sf(s,i){var c=Bt(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=s,i=s.deletions,i===null?(s.deletions=[c],s.flags|=16):i.push(c)}function of(s,i){switch(s.tag){case 5:var c=s.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,Ct=s,At=Nn(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,Ct=s,At=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=or!==null?{id:hn,overflow:fn}:null,s.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=Bt(18,null,null,0),c.stateNode=i,c.return=s,s.child=c,Ct=s,At=null,!0):!1;default:return!1}}function zl(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Fl(s){if(He){var i=At;if(i){var c=i;if(!of(s,i)){if(zl(s))throw Error(t(418));i=Nn(c.nextSibling);var d=Ct;i&&of(s,i)?sf(d,c):(s.flags=s.flags&-4097|2,He=!1,Ct=s)}}else{if(zl(s))throw Error(t(418));s.flags=s.flags&-4097|2,He=!1,Ct=s}}}function af(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ct=s}function po(s){if(s!==Ct)return!1;if(!He)return af(s),He=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!Ol(s.type,s.memoizedProps)),i&&(i=At)){if(zl(s))throw lf(),Error(t(418));for(;i;)sf(s,i),i=Nn(i.nextSibling)}if(af(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(i===0){At=Nn(s.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}s=s.nextSibling}At=null}}else At=Ct?Nn(s.stateNode.nextSibling):null;return!0}function lf(){for(var s=At;s;)s=Nn(s.nextSibling)}function Qr(){At=Ct=null,He=!1}function Wl(s){zt===null?zt=[s]:zt.push(s)}var d0=I.ReactCurrentBatchConfig;function Xs(s,i,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var d=c.stateNode}if(!d)throw Error(t(147,s));var g=d,v=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===v?i.ref:(i=function(x){var k=g.refs;x===null?delete k[v]:k[v]=x},i._stringRef=v,i)}if(typeof s!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,s))}return s}function mo(s,i){throw s=Object.prototype.toString.call(i),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function cf(s){var i=s._init;return i(s._payload)}function uf(s){function i(P,j){if(s){var L=P.deletions;L===null?(P.deletions=[j],P.flags|=16):L.push(j)}}function c(P,j){if(!s)return null;for(;j!==null;)i(P,j),j=j.sibling;return null}function d(P,j){for(P=new Map;j!==null;)j.key!==null?P.set(j.key,j):P.set(j.index,j),j=j.sibling;return P}function g(P,j){return P=zn(P,j),P.index=0,P.sibling=null,P}function v(P,j,L){return P.index=L,s?(L=P.alternate,L!==null?(L=L.index,L<j?(P.flags|=2,j):L):(P.flags|=2,j)):(P.flags|=1048576,j)}function x(P){return s&&P.alternate===null&&(P.flags|=2),P}function k(P,j,L,Y){return j===null||j.tag!==6?(j=Mc(L,P.mode,Y),j.return=P,j):(j=g(j,L),j.return=P,j)}function D(P,j,L,Y){var ie=L.type;return ie===M?V(P,j,L.props.children,Y,L.key):j!==null&&(j.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ye&&cf(ie)===j.type)?(Y=g(j,L.props),Y.ref=Xs(P,j,L),Y.return=P,Y):(Y=Bo(L.type,L.key,L.props,null,P.mode,Y),Y.ref=Xs(P,j,L),Y.return=P,Y)}function B(P,j,L,Y){return j===null||j.tag!==4||j.stateNode.containerInfo!==L.containerInfo||j.stateNode.implementation!==L.implementation?(j=Pc(L,P.mode,Y),j.return=P,j):(j=g(j,L.children||[]),j.return=P,j)}function V(P,j,L,Y,ie){return j===null||j.tag!==7?(j=mr(L,P.mode,Y,ie),j.return=P,j):(j=g(j,L),j.return=P,j)}function q(P,j,L){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Mc(""+j,P.mode,L),j.return=P,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case $:return L=Bo(j.type,j.key,j.props,null,P.mode,L),L.ref=Xs(P,null,j),L.return=P,L;case A:return j=Pc(j,P.mode,L),j.return=P,j;case ye:var Y=j._init;return q(P,Y(j._payload),L)}if(Ts(j)||oe(j))return j=mr(j,P.mode,L,null),j.return=P,j;mo(P,j)}return null}function W(P,j,L,Y){var ie=j!==null?j.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return ie!==null?null:k(P,j,""+L,Y);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case $:return L.key===ie?D(P,j,L,Y):null;case A:return L.key===ie?B(P,j,L,Y):null;case ye:return ie=L._init,W(P,j,ie(L._payload),Y)}if(Ts(L)||oe(L))return ie!==null?null:V(P,j,L,Y,null);mo(P,L)}return null}function Z(P,j,L,Y,ie){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return P=P.get(L)||null,k(j,P,""+Y,ie);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case $:return P=P.get(Y.key===null?L:Y.key)||null,D(j,P,Y,ie);case A:return P=P.get(Y.key===null?L:Y.key)||null,B(j,P,Y,ie);case ye:var ce=Y._init;return Z(P,j,L,ce(Y._payload),ie)}if(Ts(Y)||oe(Y))return P=P.get(L)||null,V(j,P,Y,ie,null);mo(j,Y)}return null}function ne(P,j,L,Y){for(var ie=null,ce=null,ue=j,pe=j=0,rt=null;ue!==null&&pe<L.length;pe++){ue.index>pe?(rt=ue,ue=null):rt=ue.sibling;var ke=W(P,ue,L[pe],Y);if(ke===null){ue===null&&(ue=rt);break}s&&ue&&ke.alternate===null&&i(P,ue),j=v(ke,j,pe),ce===null?ie=ke:ce.sibling=ke,ce=ke,ue=rt}if(pe===L.length)return c(P,ue),He&&ar(P,pe),ie;if(ue===null){for(;pe<L.length;pe++)ue=q(P,L[pe],Y),ue!==null&&(j=v(ue,j,pe),ce===null?ie=ue:ce.sibling=ue,ce=ue);return He&&ar(P,pe),ie}for(ue=d(P,ue);pe<L.length;pe++)rt=Z(ue,P,pe,L[pe],Y),rt!==null&&(s&&rt.alternate!==null&&ue.delete(rt.key===null?pe:rt.key),j=v(rt,j,pe),ce===null?ie=rt:ce.sibling=rt,ce=rt);return s&&ue.forEach(function(Fn){return i(P,Fn)}),He&&ar(P,pe),ie}function re(P,j,L,Y){var ie=oe(L);if(typeof ie!="function")throw Error(t(150));if(L=ie.call(L),L==null)throw Error(t(151));for(var ce=ie=null,ue=j,pe=j=0,rt=null,ke=L.next();ue!==null&&!ke.done;pe++,ke=L.next()){ue.index>pe?(rt=ue,ue=null):rt=ue.sibling;var Fn=W(P,ue,ke.value,Y);if(Fn===null){ue===null&&(ue=rt);break}s&&ue&&Fn.alternate===null&&i(P,ue),j=v(Fn,j,pe),ce===null?ie=Fn:ce.sibling=Fn,ce=Fn,ue=rt}if(ke.done)return c(P,ue),He&&ar(P,pe),ie;if(ue===null){for(;!ke.done;pe++,ke=L.next())ke=q(P,ke.value,Y),ke!==null&&(j=v(ke,j,pe),ce===null?ie=ke:ce.sibling=ke,ce=ke);return He&&ar(P,pe),ie}for(ue=d(P,ue);!ke.done;pe++,ke=L.next())ke=Z(ue,P,pe,ke.value,Y),ke!==null&&(s&&ke.alternate!==null&&ue.delete(ke.key===null?pe:ke.key),j=v(ke,j,pe),ce===null?ie=ke:ce.sibling=ke,ce=ke);return s&&ue.forEach(function(W0){return i(P,W0)}),He&&ar(P,pe),ie}function Qe(P,j,L,Y){if(typeof L=="object"&&L!==null&&L.type===M&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case $:e:{for(var ie=L.key,ce=j;ce!==null;){if(ce.key===ie){if(ie=L.type,ie===M){if(ce.tag===7){c(P,ce.sibling),j=g(ce,L.props.children),j.return=P,P=j;break e}}else if(ce.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===ye&&cf(ie)===ce.type){c(P,ce.sibling),j=g(ce,L.props),j.ref=Xs(P,ce,L),j.return=P,P=j;break e}c(P,ce);break}else i(P,ce);ce=ce.sibling}L.type===M?(j=mr(L.props.children,P.mode,Y,L.key),j.return=P,P=j):(Y=Bo(L.type,L.key,L.props,null,P.mode,Y),Y.ref=Xs(P,j,L),Y.return=P,P=Y)}return x(P);case A:e:{for(ce=L.key;j!==null;){if(j.key===ce)if(j.tag===4&&j.stateNode.containerInfo===L.containerInfo&&j.stateNode.implementation===L.implementation){c(P,j.sibling),j=g(j,L.children||[]),j.return=P,P=j;break e}else{c(P,j);break}else i(P,j);j=j.sibling}j=Pc(L,P.mode,Y),j.return=P,P=j}return x(P);case ye:return ce=L._init,Qe(P,j,ce(L._payload),Y)}if(Ts(L))return ne(P,j,L,Y);if(oe(L))return re(P,j,L,Y);mo(P,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,j!==null&&j.tag===6?(c(P,j.sibling),j=g(j,L),j.return=P,P=j):(c(P,j),j=Mc(L,P.mode,Y),j.return=P,P=j),x(P)):c(P,j)}return Qe}var Yr=uf(!0),df=uf(!1),go=jn(null),vo=null,Kr=null,Vl=null;function ql(){Vl=Kr=vo=null}function Gl(s){var i=go.current;Ue(go),s._currentValue=i}function Ql(s,i,c){for(;s!==null;){var d=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),s===c)break;s=s.return}}function Jr(s,i){vo=s,Vl=Kr=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(bt=!0),s.firstContext=null)}function Pt(s){var i=s._currentValue;if(Vl!==s)if(s={context:s,memoizedValue:i,next:null},Kr===null){if(vo===null)throw Error(t(308));Kr=s,vo.dependencies={lanes:0,firstContext:s}}else Kr=Kr.next=s;return i}var lr=null;function Yl(s){lr===null?lr=[s]:lr.push(s)}function hf(s,i,c,d){var g=i.interleaved;return g===null?(c.next=c,Yl(i)):(c.next=g.next,g.next=c),i.interleaved=c,pn(s,d)}function pn(s,i){s.lanes|=i;var c=s.alternate;for(c!==null&&(c.lanes|=i),c=s,s=s.return;s!==null;)s.childLanes|=i,c=s.alternate,c!==null&&(c.childLanes|=i),c=s,s=s.return;return c.tag===3?c.stateNode:null}var Mn=!1;function Kl(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ff(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function mn(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function Pn(s,i,c){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Ee&2)!==0){var g=d.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),d.pending=i,pn(s,c)}return g=d.interleaved,g===null?(i.next=i,Yl(d)):(i.next=g.next,g.next=i),d.interleaved=i,pn(s,c)}function yo(s,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var d=i.lanes;d&=s.pendingLanes,c|=d,i.lanes=c,ul(s,c)}}function pf(s,i){var c=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var x={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};v===null?g=v=x:v=v.next=x,c=c.next}while(c!==null);v===null?g=v=i:v=v.next=i}else g=v=i;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,effects:d.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=i:s.next=i,c.lastBaseUpdate=i}function wo(s,i,c,d){var g=s.updateQueue;Mn=!1;var v=g.firstBaseUpdate,x=g.lastBaseUpdate,k=g.shared.pending;if(k!==null){g.shared.pending=null;var D=k,B=D.next;D.next=null,x===null?v=B:x.next=B,x=D;var V=s.alternate;V!==null&&(V=V.updateQueue,k=V.lastBaseUpdate,k!==x&&(k===null?V.firstBaseUpdate=B:k.next=B,V.lastBaseUpdate=D))}if(v!==null){var q=g.baseState;x=0,V=B=D=null,k=v;do{var W=k.lane,Z=k.eventTime;if((d&W)===W){V!==null&&(V=V.next={eventTime:Z,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var ne=s,re=k;switch(W=i,Z=c,re.tag){case 1:if(ne=re.payload,typeof ne=="function"){q=ne.call(Z,q,W);break e}q=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=re.payload,W=typeof ne=="function"?ne.call(Z,q,W):ne,W==null)break e;q=J({},q,W);break e;case 2:Mn=!0}}k.callback!==null&&k.lane!==0&&(s.flags|=64,W=g.effects,W===null?g.effects=[k]:W.push(k))}else Z={eventTime:Z,lane:W,tag:k.tag,payload:k.payload,callback:k.callback,next:null},V===null?(B=V=Z,D=q):V=V.next=Z,x|=W;if(k=k.next,k===null){if(k=g.shared.pending,k===null)break;W=k,k=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);if(V===null&&(D=q),g.baseState=D,g.firstBaseUpdate=B,g.lastBaseUpdate=V,i=g.shared.interleaved,i!==null){g=i;do x|=g.lane,g=g.next;while(g!==i)}else v===null&&(g.shared.lanes=0);dr|=x,s.lanes=x,s.memoizedState=q}}function mf(s,i,c){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var d=s[i],g=d.callback;if(g!==null){if(d.callback=null,d=c,typeof g!="function")throw Error(t(191,g));g.call(d)}}}var ei={},nn=jn(ei),ti=jn(ei),ni=jn(ei);function cr(s){if(s===ei)throw Error(t(174));return s}function Jl(s,i){switch(Oe(ni,i),Oe(ti,s),Oe(nn,ei),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Za(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=Za(i,s)}Ue(nn),Oe(nn,i)}function Zr(){Ue(nn),Ue(ti),Ue(ni)}function gf(s){cr(ni.current);var i=cr(nn.current),c=Za(i,s.type);i!==c&&(Oe(ti,s),Oe(nn,c))}function Zl(s){ti.current===s&&(Ue(nn),Ue(ti))}var ze=jn(0);function bo(s){for(var i=s;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Xl=[];function ec(){for(var s=0;s<Xl.length;s++)Xl[s]._workInProgressVersionPrimary=null;Xl.length=0}var xo=I.ReactCurrentDispatcher,tc=I.ReactCurrentBatchConfig,ur=0,Fe=null,Ze=null,tt=null,So=!1,ri=!1,si=0,h0=0;function ut(){throw Error(t(321))}function nc(s,i){if(i===null)return!1;for(var c=0;c<i.length&&c<s.length;c++)if(!$t(s[c],i[c]))return!1;return!0}function rc(s,i,c,d,g,v){if(ur=v,Fe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,xo.current=s===null||s.memoizedState===null?g0:v0,s=c(d,g),ri){v=0;do{if(ri=!1,si=0,25<=v)throw Error(t(301));v+=1,tt=Ze=null,i.updateQueue=null,xo.current=y0,s=c(d,g)}while(ri)}if(xo.current=ko,i=Ze!==null&&Ze.next!==null,ur=0,tt=Ze=Fe=null,So=!1,i)throw Error(t(300));return s}function sc(){var s=si!==0;return si=0,s}function rn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Fe.memoizedState=tt=s:tt=tt.next=s,tt}function Lt(){if(Ze===null){var s=Fe.alternate;s=s!==null?s.memoizedState:null}else s=Ze.next;var i=tt===null?Fe.memoizedState:tt.next;if(i!==null)tt=i,Ze=s;else{if(s===null)throw Error(t(310));Ze=s,s={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},tt===null?Fe.memoizedState=tt=s:tt=tt.next=s}return tt}function ii(s,i){return typeof i=="function"?i(s):i}function ic(s){var i=Lt(),c=i.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var d=Ze,g=d.baseQueue,v=c.pending;if(v!==null){if(g!==null){var x=g.next;g.next=v.next,v.next=x}d.baseQueue=g=v,c.pending=null}if(g!==null){v=g.next,d=d.baseState;var k=x=null,D=null,B=v;do{var V=B.lane;if((ur&V)===V)D!==null&&(D=D.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),d=B.hasEagerState?B.eagerState:s(d,B.action);else{var q={lane:V,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};D===null?(k=D=q,x=d):D=D.next=q,Fe.lanes|=V,dr|=V}B=B.next}while(B!==null&&B!==v);D===null?x=d:D.next=k,$t(d,i.memoizedState)||(bt=!0),i.memoizedState=d,i.baseState=x,i.baseQueue=D,c.lastRenderedState=d}if(s=c.interleaved,s!==null){g=s;do v=g.lane,Fe.lanes|=v,dr|=v,g=g.next;while(g!==s)}else g===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function oc(s){var i=Lt(),c=i.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=s;var d=c.dispatch,g=c.pending,v=i.memoizedState;if(g!==null){c.pending=null;var x=g=g.next;do v=s(v,x.action),x=x.next;while(x!==g);$t(v,i.memoizedState)||(bt=!0),i.memoizedState=v,i.baseQueue===null&&(i.baseState=v),c.lastRenderedState=v}return[v,d]}function vf(){}function yf(s,i){var c=Fe,d=Lt(),g=i(),v=!$t(d.memoizedState,g);if(v&&(d.memoizedState=g,bt=!0),d=d.queue,ac(xf.bind(null,c,d,s),[s]),d.getSnapshot!==i||v||tt!==null&&tt.memoizedState.tag&1){if(c.flags|=2048,oi(9,bf.bind(null,c,d,g,i),void 0,null),nt===null)throw Error(t(349));(ur&30)!==0||wf(c,i,g)}return g}function wf(s,i,c){s.flags|=16384,s={getSnapshot:i,value:c},i=Fe.updateQueue,i===null?(i={lastEffect:null,stores:null},Fe.updateQueue=i,i.stores=[s]):(c=i.stores,c===null?i.stores=[s]:c.push(s))}function bf(s,i,c,d){i.value=c,i.getSnapshot=d,Sf(i)&&_f(s)}function xf(s,i,c){return c(function(){Sf(i)&&_f(s)})}function Sf(s){var i=s.getSnapshot;s=s.value;try{var c=i();return!$t(s,c)}catch{return!0}}function _f(s){var i=pn(s,1);i!==null&&qt(i,s,1,-1)}function Ef(s){var i=rn();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:s},i.queue=s,s=s.dispatch=m0.bind(null,Fe,s),[i.memoizedState,s]}function oi(s,i,c,d){return s={tag:s,create:i,destroy:c,deps:d,next:null},i=Fe.updateQueue,i===null?(i={lastEffect:null,stores:null},Fe.updateQueue=i,i.lastEffect=s.next=s):(c=i.lastEffect,c===null?i.lastEffect=s.next=s:(d=c.next,c.next=s,s.next=d,i.lastEffect=s)),s}function kf(){return Lt().memoizedState}function _o(s,i,c,d){var g=rn();Fe.flags|=s,g.memoizedState=oi(1|i,c,void 0,d===void 0?null:d)}function Eo(s,i,c,d){var g=Lt();d=d===void 0?null:d;var v=void 0;if(Ze!==null){var x=Ze.memoizedState;if(v=x.destroy,d!==null&&nc(d,x.deps)){g.memoizedState=oi(i,c,v,d);return}}Fe.flags|=s,g.memoizedState=oi(1|i,c,v,d)}function Cf(s,i){return _o(8390656,8,s,i)}function ac(s,i){return Eo(2048,8,s,i)}function Af(s,i){return Eo(4,2,s,i)}function Tf(s,i){return Eo(4,4,s,i)}function Df(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Rf(s,i,c){return c=c!=null?c.concat([s]):null,Eo(4,4,Df.bind(null,i,s),c)}function lc(){}function Nf(s,i){var c=Lt();i=i===void 0?null:i;var d=c.memoizedState;return d!==null&&i!==null&&nc(i,d[1])?d[0]:(c.memoizedState=[s,i],s)}function jf(s,i){var c=Lt();i=i===void 0?null:i;var d=c.memoizedState;return d!==null&&i!==null&&nc(i,d[1])?d[0]:(s=s(),c.memoizedState=[s,i],s)}function If(s,i,c){return(ur&21)===0?(s.baseState&&(s.baseState=!1,bt=!0),s.memoizedState=c):($t(c,i)||(c=lh(),Fe.lanes|=c,dr|=c,s.baseState=!0),i)}function f0(s,i){var c=De;De=c!==0&&4>c?c:4,s(!0);var d=tc.transition;tc.transition={};try{s(!1),i()}finally{De=c,tc.transition=d}}function Of(){return Lt().memoizedState}function p0(s,i,c){var d=Hn(s);if(c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},Mf(s))Pf(i,c);else if(c=hf(s,i,c,d),c!==null){var g=gt();qt(c,s,d,g),Lf(c,i,d)}}function m0(s,i,c){var d=Hn(s),g={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Mf(s))Pf(i,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=i.lastRenderedReducer,v!==null))try{var x=i.lastRenderedState,k=v(x,c);if(g.hasEagerState=!0,g.eagerState=k,$t(k,x)){var D=i.interleaved;D===null?(g.next=g,Yl(i)):(g.next=D.next,D.next=g),i.interleaved=g;return}}catch{}finally{}c=hf(s,i,g,d),c!==null&&(g=gt(),qt(c,s,d,g),Lf(c,i,d))}}function Mf(s){var i=s.alternate;return s===Fe||i!==null&&i===Fe}function Pf(s,i){ri=So=!0;var c=s.pending;c===null?i.next=i:(i.next=c.next,c.next=i),s.pending=i}function Lf(s,i,c){if((c&4194240)!==0){var d=i.lanes;d&=s.pendingLanes,c|=d,i.lanes=c,ul(s,c)}}var ko={readContext:Pt,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},g0={readContext:Pt,useCallback:function(s,i){return rn().memoizedState=[s,i===void 0?null:i],s},useContext:Pt,useEffect:Cf,useImperativeHandle:function(s,i,c){return c=c!=null?c.concat([s]):null,_o(4194308,4,Df.bind(null,i,s),c)},useLayoutEffect:function(s,i){return _o(4194308,4,s,i)},useInsertionEffect:function(s,i){return _o(4,2,s,i)},useMemo:function(s,i){var c=rn();return i=i===void 0?null:i,s=s(),c.memoizedState=[s,i],s},useReducer:function(s,i,c){var d=rn();return i=c!==void 0?c(i):i,d.memoizedState=d.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},d.queue=s,s=s.dispatch=p0.bind(null,Fe,s),[d.memoizedState,s]},useRef:function(s){var i=rn();return s={current:s},i.memoizedState=s},useState:Ef,useDebugValue:lc,useDeferredValue:function(s){return rn().memoizedState=s},useTransition:function(){var s=Ef(!1),i=s[0];return s=f0.bind(null,s[1]),rn().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,c){var d=Fe,g=rn();if(He){if(c===void 0)throw Error(t(407));c=c()}else{if(c=i(),nt===null)throw Error(t(349));(ur&30)!==0||wf(d,i,c)}g.memoizedState=c;var v={value:c,getSnapshot:i};return g.queue=v,Cf(xf.bind(null,d,v,s),[s]),d.flags|=2048,oi(9,bf.bind(null,d,v,c,i),void 0,null),c},useId:function(){var s=rn(),i=nt.identifierPrefix;if(He){var c=fn,d=hn;c=(d&~(1<<32-Ht(d)-1)).toString(32)+c,i=":"+i+"R"+c,c=si++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=h0++,i=":"+i+"r"+c.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},v0={readContext:Pt,useCallback:Nf,useContext:Pt,useEffect:ac,useImperativeHandle:Rf,useInsertionEffect:Af,useLayoutEffect:Tf,useMemo:jf,useReducer:ic,useRef:kf,useState:function(){return ic(ii)},useDebugValue:lc,useDeferredValue:function(s){var i=Lt();return If(i,Ze.memoizedState,s)},useTransition:function(){var s=ic(ii)[0],i=Lt().memoizedState;return[s,i]},useMutableSource:vf,useSyncExternalStore:yf,useId:Of,unstable_isNewReconciler:!1},y0={readContext:Pt,useCallback:Nf,useContext:Pt,useEffect:ac,useImperativeHandle:Rf,useInsertionEffect:Af,useLayoutEffect:Tf,useMemo:jf,useReducer:oc,useRef:kf,useState:function(){return oc(ii)},useDebugValue:lc,useDeferredValue:function(s){var i=Lt();return Ze===null?i.memoizedState=s:If(i,Ze.memoizedState,s)},useTransition:function(){var s=oc(ii)[0],i=Lt().memoizedState;return[s,i]},useMutableSource:vf,useSyncExternalStore:yf,useId:Of,unstable_isNewReconciler:!1};function Ft(s,i){if(s&&s.defaultProps){i=J({},i),s=s.defaultProps;for(var c in s)i[c]===void 0&&(i[c]=s[c]);return i}return i}function cc(s,i,c,d){i=s.memoizedState,c=c(d,i),c=c==null?i:J({},i,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Co={isMounted:function(s){return(s=s._reactInternals)?rr(s)===s:!1},enqueueSetState:function(s,i,c){s=s._reactInternals;var d=gt(),g=Hn(s),v=mn(d,g);v.payload=i,c!=null&&(v.callback=c),i=Pn(s,v,g),i!==null&&(qt(i,s,g,d),yo(i,s,g))},enqueueReplaceState:function(s,i,c){s=s._reactInternals;var d=gt(),g=Hn(s),v=mn(d,g);v.tag=1,v.payload=i,c!=null&&(v.callback=c),i=Pn(s,v,g),i!==null&&(qt(i,s,g,d),yo(i,s,g))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var c=gt(),d=Hn(s),g=mn(c,d);g.tag=2,i!=null&&(g.callback=i),i=Pn(s,g,d),i!==null&&(qt(i,s,d,c),yo(i,s,d))}};function Uf(s,i,c,d,g,v,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,v,x):i.prototype&&i.prototype.isPureReactComponent?!qs(c,d)||!qs(g,v):!0}function Bf(s,i,c){var d=!1,g=In,v=i.contextType;return typeof v=="object"&&v!==null?v=Pt(v):(g=wt(i)?ir:ct.current,d=i.contextTypes,v=(d=d!=null)?Vr(s,g):In),i=new i(c,v),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Co,s.stateNode=i,i._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=v),i}function Hf(s,i,c,d){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,d),i.state!==s&&Co.enqueueReplaceState(i,i.state,null)}function uc(s,i,c,d){var g=s.stateNode;g.props=c,g.state=s.memoizedState,g.refs={},Kl(s);var v=i.contextType;typeof v=="object"&&v!==null?g.context=Pt(v):(v=wt(i)?ir:ct.current,g.context=Vr(s,v)),g.state=s.memoizedState,v=i.getDerivedStateFromProps,typeof v=="function"&&(cc(s,i,v,c),g.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(i=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),i!==g.state&&Co.enqueueReplaceState(g,g.state,null),wo(s,c,g,d),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function Xr(s,i){try{var c="",d=i;do c+=Q(d),d=d.return;while(d);var g=c}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:i,stack:g,digest:null}}function dc(s,i,c){return{value:s,source:null,stack:c??null,digest:i??null}}function hc(s,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var w0=typeof WeakMap=="function"?WeakMap:Map;function $f(s,i,c){c=mn(-1,c),c.tag=3,c.payload={element:null};var d=i.value;return c.callback=function(){Io||(Io=!0,Ac=d),hc(s,i)},c}function zf(s,i,c){c=mn(-1,c),c.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var g=i.value;c.payload=function(){return d(g)},c.callback=function(){hc(s,i)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(c.callback=function(){hc(s,i),typeof d!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var x=i.stack;this.componentDidCatch(i.value,{componentStack:x!==null?x:""})}),c}function Ff(s,i,c){var d=s.pingCache;if(d===null){d=s.pingCache=new w0;var g=new Set;d.set(i,g)}else g=d.get(i),g===void 0&&(g=new Set,d.set(i,g));g.has(c)||(g.add(c),s=I0.bind(null,s,i,c),i.then(s,s))}function Wf(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function Vf(s,i,c,d,g){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=mn(-1,1),i.tag=2,Pn(c,i,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var b0=I.ReactCurrentOwner,bt=!1;function mt(s,i,c,d){i.child=s===null?df(i,null,c,d):Yr(i,s.child,c,d)}function qf(s,i,c,d,g){c=c.render;var v=i.ref;return Jr(i,g),d=rc(s,i,c,d,v,g),c=sc(),s!==null&&!bt?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,gn(s,i,g)):(He&&c&&Hl(i),i.flags|=1,mt(s,i,d,g),i.child)}function Gf(s,i,c,d,g){if(s===null){var v=c.type;return typeof v=="function"&&!Oc(v)&&v.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=v,Qf(s,i,v,d,g)):(s=Bo(c.type,null,d,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(v=s.child,(s.lanes&g)===0){var x=v.memoizedProps;if(c=c.compare,c=c!==null?c:qs,c(x,d)&&s.ref===i.ref)return gn(s,i,g)}return i.flags|=1,s=zn(v,d),s.ref=i.ref,s.return=i,i.child=s}function Qf(s,i,c,d,g){if(s!==null){var v=s.memoizedProps;if(qs(v,d)&&s.ref===i.ref)if(bt=!1,i.pendingProps=d=v,(s.lanes&g)!==0)(s.flags&131072)!==0&&(bt=!0);else return i.lanes=s.lanes,gn(s,i,g)}return fc(s,i,c,d,g)}function Yf(s,i,c){var d=i.pendingProps,g=d.children,v=s!==null?s.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(ts,Tt),Tt|=c;else{if((c&1073741824)===0)return s=v!==null?v.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,Oe(ts,Tt),Tt|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:c,Oe(ts,Tt),Tt|=d}else v!==null?(d=v.baseLanes|c,i.memoizedState=null):d=c,Oe(ts,Tt),Tt|=d;return mt(s,i,g,c),i.child}function Kf(s,i){var c=i.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function fc(s,i,c,d,g){var v=wt(c)?ir:ct.current;return v=Vr(i,v),Jr(i,g),c=rc(s,i,c,d,v,g),d=sc(),s!==null&&!bt?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~g,gn(s,i,g)):(He&&d&&Hl(i),i.flags|=1,mt(s,i,c,g),i.child)}function Jf(s,i,c,d,g){if(wt(c)){var v=!0;co(i)}else v=!1;if(Jr(i,g),i.stateNode===null)To(s,i),Bf(i,c,d),uc(i,c,d,g),d=!0;else if(s===null){var x=i.stateNode,k=i.memoizedProps;x.props=k;var D=x.context,B=c.contextType;typeof B=="object"&&B!==null?B=Pt(B):(B=wt(c)?ir:ct.current,B=Vr(i,B));var V=c.getDerivedStateFromProps,q=typeof V=="function"||typeof x.getSnapshotBeforeUpdate=="function";q||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==d||D!==B)&&Hf(i,x,d,B),Mn=!1;var W=i.memoizedState;x.state=W,wo(i,d,x,g),D=i.memoizedState,k!==d||W!==D||yt.current||Mn?(typeof V=="function"&&(cc(i,c,V,d),D=i.memoizedState),(k=Mn||Uf(i,c,k,d,W,D,B))?(q||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(i.flags|=4194308)):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=D),x.props=d,x.state=D,x.context=B,d=k):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{x=i.stateNode,ff(s,i),k=i.memoizedProps,B=i.type===i.elementType?k:Ft(i.type,k),x.props=B,q=i.pendingProps,W=x.context,D=c.contextType,typeof D=="object"&&D!==null?D=Pt(D):(D=wt(c)?ir:ct.current,D=Vr(i,D));var Z=c.getDerivedStateFromProps;(V=typeof Z=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k!==q||W!==D)&&Hf(i,x,d,D),Mn=!1,W=i.memoizedState,x.state=W,wo(i,d,x,g);var ne=i.memoizedState;k!==q||W!==ne||yt.current||Mn?(typeof Z=="function"&&(cc(i,c,Z,d),ne=i.memoizedState),(B=Mn||Uf(i,c,B,d,W,ne,D)||!1)?(V||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,ne,D),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,ne,D)),typeof x.componentDidUpdate=="function"&&(i.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof x.componentDidUpdate!="function"||k===s.memoizedProps&&W===s.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&W===s.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=ne),x.props=d,x.state=ne,x.context=D,d=B):(typeof x.componentDidUpdate!="function"||k===s.memoizedProps&&W===s.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&W===s.memoizedState||(i.flags|=1024),d=!1)}return pc(s,i,c,d,v,g)}function pc(s,i,c,d,g,v){Kf(s,i);var x=(i.flags&128)!==0;if(!d&&!x)return g&&tf(i,c,!1),gn(s,i,v);d=i.stateNode,b0.current=i;var k=x&&typeof c.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,s!==null&&x?(i.child=Yr(i,s.child,null,v),i.child=Yr(i,null,k,v)):mt(s,i,k,v),i.memoizedState=d.state,g&&tf(i,c,!0),i.child}function Zf(s){var i=s.stateNode;i.pendingContext?Xh(s,i.pendingContext,i.pendingContext!==i.context):i.context&&Xh(s,i.context,!1),Jl(s,i.containerInfo)}function Xf(s,i,c,d,g){return Qr(),Wl(g),i.flags|=256,mt(s,i,c,d),i.child}var mc={dehydrated:null,treeContext:null,retryLane:0};function gc(s){return{baseLanes:s,cachePool:null,transitions:null}}function ep(s,i,c){var d=i.pendingProps,g=ze.current,v=!1,x=(i.flags&128)!==0,k;if((k=x)||(k=s!==null&&s.memoizedState===null?!1:(g&2)!==0),k?(v=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),Oe(ze,g&1),s===null)return Fl(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(x=d.children,s=d.fallback,v?(d=i.mode,v=i.child,x={mode:"hidden",children:x},(d&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=x):v=Ho(x,d,0,null),s=mr(s,d,c,null),v.return=i,s.return=i,v.sibling=s,i.child=v,i.child.memoizedState=gc(c),i.memoizedState=mc,s):vc(i,x));if(g=s.memoizedState,g!==null&&(k=g.dehydrated,k!==null))return x0(s,i,x,d,k,g,c);if(v){v=d.fallback,x=i.mode,g=s.child,k=g.sibling;var D={mode:"hidden",children:d.children};return(x&1)===0&&i.child!==g?(d=i.child,d.childLanes=0,d.pendingProps=D,i.deletions=null):(d=zn(g,D),d.subtreeFlags=g.subtreeFlags&14680064),k!==null?v=zn(k,v):(v=mr(v,x,c,null),v.flags|=2),v.return=i,d.return=i,d.sibling=v,i.child=d,d=v,v=i.child,x=s.child.memoizedState,x=x===null?gc(c):{baseLanes:x.baseLanes|c,cachePool:null,transitions:x.transitions},v.memoizedState=x,v.childLanes=s.childLanes&~c,i.memoizedState=mc,d}return v=s.child,s=v.sibling,d=zn(v,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=c),d.return=i,d.sibling=null,s!==null&&(c=i.deletions,c===null?(i.deletions=[s],i.flags|=16):c.push(s)),i.child=d,i.memoizedState=null,d}function vc(s,i){return i=Ho({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function Ao(s,i,c,d){return d!==null&&Wl(d),Yr(i,s.child,null,c),s=vc(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function x0(s,i,c,d,g,v,x){if(c)return i.flags&256?(i.flags&=-257,d=dc(Error(t(422))),Ao(s,i,x,d)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(v=d.fallback,g=i.mode,d=Ho({mode:"visible",children:d.children},g,0,null),v=mr(v,g,x,null),v.flags|=2,d.return=i,v.return=i,d.sibling=v,i.child=d,(i.mode&1)!==0&&Yr(i,s.child,null,x),i.child.memoizedState=gc(x),i.memoizedState=mc,v);if((i.mode&1)===0)return Ao(s,i,x,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var k=d.dgst;return d=k,v=Error(t(419)),d=dc(v,d,void 0),Ao(s,i,x,d)}if(k=(x&s.childLanes)!==0,bt||k){if(d=nt,d!==null){switch(x&-x){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(d.suspendedLanes|x))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,pn(s,g),qt(d,s,g,-1))}return Ic(),d=dc(Error(t(421))),Ao(s,i,x,d)}return g.data==="$?"?(i.flags|=128,i.child=s.child,i=O0.bind(null,s),g._reactRetry=i,null):(s=v.treeContext,At=Nn(g.nextSibling),Ct=i,He=!0,zt=null,s!==null&&(Ot[Mt++]=hn,Ot[Mt++]=fn,Ot[Mt++]=or,hn=s.id,fn=s.overflow,or=i),i=vc(i,d.children),i.flags|=4096,i)}function tp(s,i,c){s.lanes|=i;var d=s.alternate;d!==null&&(d.lanes|=i),Ql(s.return,i,c)}function yc(s,i,c,d,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=c,v.tailMode=g)}function np(s,i,c){var d=i.pendingProps,g=d.revealOrder,v=d.tail;if(mt(s,i,d.children,c),d=ze.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&tp(s,c,i);else if(s.tag===19)tp(s,c,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(Oe(ze,d),(i.mode&1)===0)i.memoizedState=null;else switch(g){case"forwards":for(c=i.child,g=null;c!==null;)s=c.alternate,s!==null&&bo(s)===null&&(g=c),c=c.sibling;c=g,c===null?(g=i.child,i.child=null):(g=c.sibling,c.sibling=null),yc(i,!1,g,c,v);break;case"backwards":for(c=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&bo(s)===null){i.child=g;break}s=g.sibling,g.sibling=c,c=g,g=s}yc(i,!0,c,null,v);break;case"together":yc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function To(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function gn(s,i,c){if(s!==null&&(i.dependencies=s.dependencies),dr|=i.lanes,(c&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(t(153));if(i.child!==null){for(s=i.child,c=zn(s,s.pendingProps),i.child=c,c.return=i;s.sibling!==null;)s=s.sibling,c=c.sibling=zn(s,s.pendingProps),c.return=i;c.sibling=null}return i.child}function S0(s,i,c){switch(i.tag){case 3:Zf(i),Qr();break;case 5:gf(i);break;case 1:wt(i.type)&&co(i);break;case 4:Jl(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,g=i.memoizedProps.value;Oe(go,d._currentValue),d._currentValue=g;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Oe(ze,ze.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?ep(s,i,c):(Oe(ze,ze.current&1),s=gn(s,i,c),s!==null?s.sibling:null);Oe(ze,ze.current&1);break;case 19:if(d=(c&i.childLanes)!==0,(s.flags&128)!==0){if(d)return np(s,i,c);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Oe(ze,ze.current),d)break;return null;case 22:case 23:return i.lanes=0,Yf(s,i,c)}return gn(s,i,c)}var rp,wc,sp,ip;rp=function(s,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},wc=function(){},sp=function(s,i,c,d){var g=s.memoizedProps;if(g!==d){s=i.stateNode,cr(nn.current);var v=null;switch(c){case"input":g=jr(s,g),d=jr(s,d),v=[];break;case"select":g=J({},g,{value:void 0}),d=J({},d,{value:void 0}),v=[];break;case"textarea":g=Ja(s,g),d=Ja(s,d),v=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=oo)}Xa(c,d);var x;c=null;for(B in g)if(!d.hasOwnProperty(B)&&g.hasOwnProperty(B)&&g[B]!=null)if(B==="style"){var k=g[B];for(x in k)k.hasOwnProperty(x)&&(c||(c={}),c[x]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?v||(v=[]):(v=v||[]).push(B,null));for(B in d){var D=d[B];if(k=g!=null?g[B]:void 0,d.hasOwnProperty(B)&&D!==k&&(D!=null||k!=null))if(B==="style")if(k){for(x in k)!k.hasOwnProperty(x)||D&&D.hasOwnProperty(x)||(c||(c={}),c[x]="");for(x in D)D.hasOwnProperty(x)&&k[x]!==D[x]&&(c||(c={}),c[x]=D[x])}else c||(v||(v=[]),v.push(B,c)),c=D;else B==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,k=k?k.__html:void 0,D!=null&&k!==D&&(v=v||[]).push(B,D)):B==="children"?typeof D!="string"&&typeof D!="number"||(v=v||[]).push(B,""+D):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(D!=null&&B==="onScroll"&&Le("scroll",s),v||k===D||(v=[])):(v=v||[]).push(B,D))}c&&(v=v||[]).push("style",c);var B=v;(i.updateQueue=B)&&(i.flags|=4)}},ip=function(s,i,c,d){c!==d&&(i.flags|=4)};function ai(s,i){if(!He)switch(s.tailMode){case"hidden":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function dt(s){var i=s.alternate!==null&&s.alternate.child===s.child,c=0,d=0;if(i)for(var g=s.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=c,i}function _0(s,i,c){var d=i.pendingProps;switch($l(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(i),null;case 1:return wt(i.type)&&lo(),dt(i),null;case 3:return d=i.stateNode,Zr(),Ue(yt),Ue(ct),ec(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(po(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,zt!==null&&(Rc(zt),zt=null))),wc(s,i),dt(i),null;case 5:Zl(i);var g=cr(ni.current);if(c=i.type,s!==null&&i.stateNode!=null)sp(s,i,c,d,g),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(t(166));return dt(i),null}if(s=cr(nn.current),po(i)){d=i.stateNode,c=i.type;var v=i.memoizedProps;switch(d[tn]=i,d[Js]=v,s=(i.mode&1)!==0,c){case"dialog":Le("cancel",d),Le("close",d);break;case"iframe":case"object":case"embed":Le("load",d);break;case"video":case"audio":for(g=0;g<Qs.length;g++)Le(Qs[g],d);break;case"source":Le("error",d);break;case"img":case"image":case"link":Le("error",d),Le("load",d);break;case"details":Le("toggle",d);break;case"input":Cs(d,v),Le("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},Le("invalid",d);break;case"textarea":$d(d,v),Le("invalid",d)}Xa(c,v),g=null;for(var x in v)if(v.hasOwnProperty(x)){var k=v[x];x==="children"?typeof k=="string"?d.textContent!==k&&(v.suppressHydrationWarning!==!0&&io(d.textContent,k,s),g=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(v.suppressHydrationWarning!==!0&&io(d.textContent,k,s),g=["children",""+k]):o.hasOwnProperty(x)&&k!=null&&x==="onScroll"&&Le("scroll",d)}switch(c){case"input":tr(d),Hd(d,v,!0);break;case"textarea":tr(d),Fd(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=oo)}d=g,i.updateQueue=d,d!==null&&(i.flags|=4)}else{x=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Wd(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=x.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=x.createElement(c,{is:d.is}):(s=x.createElement(c),c==="select"&&(x=s,d.multiple?x.multiple=!0:d.size&&(x.size=d.size))):s=x.createElementNS(s,c),s[tn]=i,s[Js]=d,rp(s,i,!1,!1),i.stateNode=s;e:{switch(x=el(c,d),c){case"dialog":Le("cancel",s),Le("close",s),g=d;break;case"iframe":case"object":case"embed":Le("load",s),g=d;break;case"video":case"audio":for(g=0;g<Qs.length;g++)Le(Qs[g],s);g=d;break;case"source":Le("error",s),g=d;break;case"img":case"image":case"link":Le("error",s),Le("load",s),g=d;break;case"details":Le("toggle",s),g=d;break;case"input":Cs(s,d),g=jr(s,d),Le("invalid",s);break;case"option":g=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},g=J({},d,{value:void 0}),Le("invalid",s);break;case"textarea":$d(s,d),g=Ja(s,d),Le("invalid",s);break;default:g=d}Xa(c,g),k=g;for(v in k)if(k.hasOwnProperty(v)){var D=k[v];v==="style"?Gd(s,D):v==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Vd(s,D)):v==="children"?typeof D=="string"?(c!=="textarea"||D!=="")&&Ds(s,D):typeof D=="number"&&Ds(s,""+D):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(o.hasOwnProperty(v)?D!=null&&v==="onScroll"&&Le("scroll",s):D!=null&&N(s,v,D,x))}switch(c){case"input":tr(s),Hd(s,d,!1);break;case"textarea":tr(s),Fd(s);break;case"option":d.value!=null&&s.setAttribute("value",""+be(d.value));break;case"select":s.multiple=!!d.multiple,v=d.value,v!=null?Ir(s,!!d.multiple,v,!1):d.defaultValue!=null&&Ir(s,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=oo)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return dt(i),null;case 6:if(s&&i.stateNode!=null)ip(s,i,s.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(t(166));if(c=cr(ni.current),cr(nn.current),po(i)){if(d=i.stateNode,c=i.memoizedProps,d[tn]=i,(v=d.nodeValue!==c)&&(s=Ct,s!==null))switch(s.tag){case 3:io(d.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&io(d.nodeValue,c,(s.mode&1)!==0)}v&&(i.flags|=4)}else d=(c.nodeType===9?c:c.ownerDocument).createTextNode(d),d[tn]=i,i.stateNode=d}return dt(i),null;case 13:if(Ue(ze),d=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(He&&At!==null&&(i.mode&1)!==0&&(i.flags&128)===0)lf(),Qr(),i.flags|=98560,v=!1;else if(v=po(i),d!==null&&d.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[tn]=i}else Qr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;dt(i),v=!1}else zt!==null&&(Rc(zt),zt=null),v=!0;if(!v)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(ze.current&1)!==0?Xe===0&&(Xe=3):Ic())),i.updateQueue!==null&&(i.flags|=4),dt(i),null);case 4:return Zr(),wc(s,i),s===null&&Ys(i.stateNode.containerInfo),dt(i),null;case 10:return Gl(i.type._context),dt(i),null;case 17:return wt(i.type)&&lo(),dt(i),null;case 19:if(Ue(ze),v=i.memoizedState,v===null)return dt(i),null;if(d=(i.flags&128)!==0,x=v.rendering,x===null)if(d)ai(v,!1);else{if(Xe!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(x=bo(s),x!==null){for(i.flags|=128,ai(v,!1),d=x.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=c,c=i.child;c!==null;)v=c,s=d,v.flags&=14680066,x=v.alternate,x===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=x.childLanes,v.lanes=x.lanes,v.child=x.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=x.memoizedProps,v.memoizedState=x.memoizedState,v.updateQueue=x.updateQueue,v.type=x.type,s=x.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return Oe(ze,ze.current&1|2),i.child}s=s.sibling}v.tail!==null&&Ge()>ns&&(i.flags|=128,d=!0,ai(v,!1),i.lanes=4194304)}else{if(!d)if(s=bo(x),s!==null){if(i.flags|=128,d=!0,c=s.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),ai(v,!0),v.tail===null&&v.tailMode==="hidden"&&!x.alternate&&!He)return dt(i),null}else 2*Ge()-v.renderingStartTime>ns&&c!==1073741824&&(i.flags|=128,d=!0,ai(v,!1),i.lanes=4194304);v.isBackwards?(x.sibling=i.child,i.child=x):(c=v.last,c!==null?c.sibling=x:i.child=x,v.last=x)}return v.tail!==null?(i=v.tail,v.rendering=i,v.tail=i.sibling,v.renderingStartTime=Ge(),i.sibling=null,c=ze.current,Oe(ze,d?c&1|2:c&1),i):(dt(i),null);case 22:case 23:return jc(),d=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(Tt&1073741824)!==0&&(dt(i),i.subtreeFlags&6&&(i.flags|=8192)):dt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function E0(s,i){switch($l(i),i.tag){case 1:return wt(i.type)&&lo(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Zr(),Ue(yt),Ue(ct),ec(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return Zl(i),null;case 13:if(Ue(ze),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Qr()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return Ue(ze),null;case 4:return Zr(),null;case 10:return Gl(i.type._context),null;case 22:case 23:return jc(),null;case 24:return null;default:return null}}var Do=!1,ht=!1,k0=typeof WeakSet=="function"?WeakSet:Set,X=null;function es(s,i){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d){Ve(s,i,d)}else c.current=null}function bc(s,i,c){try{c()}catch(d){Ve(s,i,d)}}var op=!1;function C0(s,i){if(jl=Qi,s=Lh(),El(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var x=0,k=-1,D=-1,B=0,V=0,q=s,W=null;t:for(;;){for(var Z;q!==c||g!==0&&q.nodeType!==3||(k=x+g),q!==v||d!==0&&q.nodeType!==3||(D=x+d),q.nodeType===3&&(x+=q.nodeValue.length),(Z=q.firstChild)!==null;)W=q,q=Z;for(;;){if(q===s)break t;if(W===c&&++B===g&&(k=x),W===v&&++V===d&&(D=x),(Z=q.nextSibling)!==null)break;q=W,W=q.parentNode}q=Z}c=k===-1||D===-1?null:{start:k,end:D}}else c=null}c=c||{start:0,end:0}}else c=null;for(Il={focusedElem:s,selectionRange:c},Qi=!1,X=i;X!==null;)if(i=X,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,X=s;else for(;X!==null;){i=X;try{var ne=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ne!==null){var re=ne.memoizedProps,Qe=ne.memoizedState,P=i.stateNode,j=P.getSnapshotBeforeUpdate(i.elementType===i.type?re:Ft(i.type,re),Qe);P.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var L=i.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Y){Ve(i,i.return,Y)}if(s=i.sibling,s!==null){s.return=i.return,X=s;break}X=i.return}return ne=op,op=!1,ne}function li(s,i,c){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&s)===s){var v=g.destroy;g.destroy=void 0,v!==void 0&&bc(i,c,v)}g=g.next}while(g!==d)}}function Ro(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&s)===s){var d=c.create;c.destroy=d()}c=c.next}while(c!==i)}}function xc(s){var i=s.ref;if(i!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof i=="function"?i(s):i.current=s}}function ap(s){var i=s.alternate;i!==null&&(s.alternate=null,ap(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[tn],delete i[Js],delete i[Ll],delete i[l0],delete i[c0])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function lp(s){return s.tag===5||s.tag===3||s.tag===4}function cp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||lp(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Sc(s,i,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(s,i):c.insertBefore(s,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(s,c)):(i=c,i.appendChild(s)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=oo));else if(d!==4&&(s=s.child,s!==null))for(Sc(s,i,c),s=s.sibling;s!==null;)Sc(s,i,c),s=s.sibling}function _c(s,i,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,i?c.insertBefore(s,i):c.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(_c(s,i,c),s=s.sibling;s!==null;)_c(s,i,c),s=s.sibling}var st=null,Wt=!1;function Ln(s,i,c){for(c=c.child;c!==null;)up(s,i,c),c=c.sibling}function up(s,i,c){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(zi,c)}catch{}switch(c.tag){case 5:ht||es(c,i);case 6:var d=st,g=Wt;st=null,Ln(s,i,c),st=d,Wt=g,st!==null&&(Wt?(s=st,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):st.removeChild(c.stateNode));break;case 18:st!==null&&(Wt?(s=st,c=c.stateNode,s.nodeType===8?Pl(s.parentNode,c):s.nodeType===1&&Pl(s,c),Hs(s)):Pl(st,c.stateNode));break;case 4:d=st,g=Wt,st=c.stateNode.containerInfo,Wt=!0,Ln(s,i,c),st=d,Wt=g;break;case 0:case 11:case 14:case 15:if(!ht&&(d=c.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var v=g,x=v.destroy;v=v.tag,x!==void 0&&((v&2)!==0||(v&4)!==0)&&bc(c,i,x),g=g.next}while(g!==d)}Ln(s,i,c);break;case 1:if(!ht&&(es(c,i),d=c.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(k){Ve(c,i,k)}Ln(s,i,c);break;case 21:Ln(s,i,c);break;case 22:c.mode&1?(ht=(d=ht)||c.memoizedState!==null,Ln(s,i,c),ht=d):Ln(s,i,c);break;default:Ln(s,i,c)}}function dp(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new k0),i.forEach(function(d){var g=M0.bind(null,s,d);c.has(d)||(c.add(d),d.then(g,g))})}}function Vt(s,i){var c=i.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d];try{var v=s,x=i,k=x;e:for(;k!==null;){switch(k.tag){case 5:st=k.stateNode,Wt=!1;break e;case 3:st=k.stateNode.containerInfo,Wt=!0;break e;case 4:st=k.stateNode.containerInfo,Wt=!0;break e}k=k.return}if(st===null)throw Error(t(160));up(v,x,g),st=null,Wt=!1;var D=g.alternate;D!==null&&(D.return=null),g.return=null}catch(B){Ve(g,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)hp(i,s),i=i.sibling}function hp(s,i){var c=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Vt(i,s),sn(s),d&4){try{li(3,s,s.return),Ro(3,s)}catch(re){Ve(s,s.return,re)}try{li(5,s,s.return)}catch(re){Ve(s,s.return,re)}}break;case 1:Vt(i,s),sn(s),d&512&&c!==null&&es(c,c.return);break;case 5:if(Vt(i,s),sn(s),d&512&&c!==null&&es(c,c.return),s.flags&32){var g=s.stateNode;try{Ds(g,"")}catch(re){Ve(s,s.return,re)}}if(d&4&&(g=s.stateNode,g!=null)){var v=s.memoizedProps,x=c!==null?c.memoizedProps:v,k=s.type,D=s.updateQueue;if(s.updateQueue=null,D!==null)try{k==="input"&&v.type==="radio"&&v.name!=null&&As(g,v),el(k,x);var B=el(k,v);for(x=0;x<D.length;x+=2){var V=D[x],q=D[x+1];V==="style"?Gd(g,q):V==="dangerouslySetInnerHTML"?Vd(g,q):V==="children"?Ds(g,q):N(g,V,q,B)}switch(k){case"input":Ya(g,v);break;case"textarea":zd(g,v);break;case"select":var W=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var Z=v.value;Z!=null?Ir(g,!!v.multiple,Z,!1):W!==!!v.multiple&&(v.defaultValue!=null?Ir(g,!!v.multiple,v.defaultValue,!0):Ir(g,!!v.multiple,v.multiple?[]:"",!1))}g[Js]=v}catch(re){Ve(s,s.return,re)}}break;case 6:if(Vt(i,s),sn(s),d&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,v=s.memoizedProps;try{g.nodeValue=v}catch(re){Ve(s,s.return,re)}}break;case 3:if(Vt(i,s),sn(s),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Hs(i.containerInfo)}catch(re){Ve(s,s.return,re)}break;case 4:Vt(i,s),sn(s);break;case 13:Vt(i,s),sn(s),g=s.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(Cc=Ge())),d&4&&dp(s);break;case 22:if(V=c!==null&&c.memoizedState!==null,s.mode&1?(ht=(B=ht)||V,Vt(i,s),ht=B):Vt(i,s),sn(s),d&8192){if(B=s.memoizedState!==null,(s.stateNode.isHidden=B)&&!V&&(s.mode&1)!==0)for(X=s,V=s.child;V!==null;){for(q=X=V;X!==null;){switch(W=X,Z=W.child,W.tag){case 0:case 11:case 14:case 15:li(4,W,W.return);break;case 1:es(W,W.return);var ne=W.stateNode;if(typeof ne.componentWillUnmount=="function"){d=W,c=W.return;try{i=d,ne.props=i.memoizedProps,ne.state=i.memoizedState,ne.componentWillUnmount()}catch(re){Ve(d,c,re)}}break;case 5:es(W,W.return);break;case 22:if(W.memoizedState!==null){mp(q);continue}}Z!==null?(Z.return=W,X=Z):mp(q)}V=V.sibling}e:for(V=null,q=s;;){if(q.tag===5){if(V===null){V=q;try{g=q.stateNode,B?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(k=q.stateNode,D=q.memoizedProps.style,x=D!=null&&D.hasOwnProperty("display")?D.display:null,k.style.display=qd("display",x))}catch(re){Ve(s,s.return,re)}}}else if(q.tag===6){if(V===null)try{q.stateNode.nodeValue=B?"":q.memoizedProps}catch(re){Ve(s,s.return,re)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===s)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===s)break e;for(;q.sibling===null;){if(q.return===null||q.return===s)break e;V===q&&(V=null),q=q.return}V===q&&(V=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:Vt(i,s),sn(s),d&4&&dp(s);break;case 21:break;default:Vt(i,s),sn(s)}}function sn(s){var i=s.flags;if(i&2){try{e:{for(var c=s.return;c!==null;){if(lp(c)){var d=c;break e}c=c.return}throw Error(t(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(Ds(g,""),d.flags&=-33);var v=cp(s);_c(s,v,g);break;case 3:case 4:var x=d.stateNode.containerInfo,k=cp(s);Sc(s,k,x);break;default:throw Error(t(161))}}catch(D){Ve(s,s.return,D)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function A0(s,i,c){X=s,fp(s)}function fp(s,i,c){for(var d=(s.mode&1)!==0;X!==null;){var g=X,v=g.child;if(g.tag===22&&d){var x=g.memoizedState!==null||Do;if(!x){var k=g.alternate,D=k!==null&&k.memoizedState!==null||ht;k=Do;var B=ht;if(Do=x,(ht=D)&&!B)for(X=g;X!==null;)x=X,D=x.child,x.tag===22&&x.memoizedState!==null?gp(g):D!==null?(D.return=x,X=D):gp(g);for(;v!==null;)X=v,fp(v),v=v.sibling;X=g,Do=k,ht=B}pp(s)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,X=v):pp(s)}}function pp(s){for(;X!==null;){var i=X;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ht||Ro(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!ht)if(c===null)d.componentDidMount();else{var g=i.elementType===i.type?c.memoizedProps:Ft(i.type,c.memoizedProps);d.componentDidUpdate(g,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=i.updateQueue;v!==null&&mf(i,v,d);break;case 3:var x=i.updateQueue;if(x!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}mf(i,x,c)}break;case 5:var k=i.stateNode;if(c===null&&i.flags&4){c=k;var D=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&c.focus();break;case"img":D.src&&(c.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var V=B.memoizedState;if(V!==null){var q=V.dehydrated;q!==null&&Hs(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ht||i.flags&512&&xc(i)}catch(W){Ve(i,i.return,W)}}if(i===s){X=null;break}if(c=i.sibling,c!==null){c.return=i.return,X=c;break}X=i.return}}function mp(s){for(;X!==null;){var i=X;if(i===s){X=null;break}var c=i.sibling;if(c!==null){c.return=i.return,X=c;break}X=i.return}}function gp(s){for(;X!==null;){var i=X;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{Ro(4,i)}catch(D){Ve(i,c,D)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var g=i.return;try{d.componentDidMount()}catch(D){Ve(i,g,D)}}var v=i.return;try{xc(i)}catch(D){Ve(i,v,D)}break;case 5:var x=i.return;try{xc(i)}catch(D){Ve(i,x,D)}}}catch(D){Ve(i,i.return,D)}if(i===s){X=null;break}var k=i.sibling;if(k!==null){k.return=i.return,X=k;break}X=i.return}}var T0=Math.ceil,No=I.ReactCurrentDispatcher,Ec=I.ReactCurrentOwner,Ut=I.ReactCurrentBatchConfig,Ee=0,nt=null,Ye=null,it=0,Tt=0,ts=jn(0),Xe=0,ci=null,dr=0,jo=0,kc=0,ui=null,xt=null,Cc=0,ns=1/0,vn=null,Io=!1,Ac=null,Un=null,Oo=!1,Bn=null,Mo=0,di=0,Tc=null,Po=-1,Lo=0;function gt(){return(Ee&6)!==0?Ge():Po!==-1?Po:Po=Ge()}function Hn(s){return(s.mode&1)===0?1:(Ee&2)!==0&&it!==0?it&-it:d0.transition!==null?(Lo===0&&(Lo=lh()),Lo):(s=De,s!==0||(s=window.event,s=s===void 0?16:vh(s.type)),s)}function qt(s,i,c,d){if(50<di)throw di=0,Tc=null,Error(t(185));Ms(s,c,d),((Ee&2)===0||s!==nt)&&(s===nt&&((Ee&2)===0&&(jo|=c),Xe===4&&$n(s,it)),St(s,d),c===1&&Ee===0&&(i.mode&1)===0&&(ns=Ge()+500,uo&&On()))}function St(s,i){var c=s.callbackNode;dw(s,i);var d=Vi(s,s===nt?it:0);if(d===0)c!==null&&ih(c),s.callbackNode=null,s.callbackPriority=0;else if(i=d&-d,s.callbackPriority!==i){if(c!=null&&ih(c),i===1)s.tag===0?u0(yp.bind(null,s)):nf(yp.bind(null,s)),o0(function(){(Ee&6)===0&&On()}),c=null;else{switch(ch(d)){case 1:c=al;break;case 4:c=oh;break;case 16:c=$i;break;case 536870912:c=ah;break;default:c=$i}c=Cp(c,vp.bind(null,s))}s.callbackPriority=i,s.callbackNode=c}}function vp(s,i){if(Po=-1,Lo=0,(Ee&6)!==0)throw Error(t(327));var c=s.callbackNode;if(rs()&&s.callbackNode!==c)return null;var d=Vi(s,s===nt?it:0);if(d===0)return null;if((d&30)!==0||(d&s.expiredLanes)!==0||i)i=Uo(s,d);else{i=d;var g=Ee;Ee|=2;var v=bp();(nt!==s||it!==i)&&(vn=null,ns=Ge()+500,fr(s,i));do try{N0();break}catch(k){wp(s,k)}while(!0);ql(),No.current=v,Ee=g,Ye!==null?i=0:(nt=null,it=0,i=Xe)}if(i!==0){if(i===2&&(g=ll(s),g!==0&&(d=g,i=Dc(s,g))),i===1)throw c=ci,fr(s,0),$n(s,d),St(s,Ge()),c;if(i===6)$n(s,d);else{if(g=s.current.alternate,(d&30)===0&&!D0(g)&&(i=Uo(s,d),i===2&&(v=ll(s),v!==0&&(d=v,i=Dc(s,v))),i===1))throw c=ci,fr(s,0),$n(s,d),St(s,Ge()),c;switch(s.finishedWork=g,s.finishedLanes=d,i){case 0:case 1:throw Error(t(345));case 2:pr(s,xt,vn);break;case 3:if($n(s,d),(d&130023424)===d&&(i=Cc+500-Ge(),10<i)){if(Vi(s,0)!==0)break;if(g=s.suspendedLanes,(g&d)!==d){gt(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Ml(pr.bind(null,s,xt,vn),i);break}pr(s,xt,vn);break;case 4:if($n(s,d),(d&4194240)===d)break;for(i=s.eventTimes,g=-1;0<d;){var x=31-Ht(d);v=1<<x,x=i[x],x>g&&(g=x),d&=~v}if(d=g,d=Ge()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*T0(d/1960))-d,10<d){s.timeoutHandle=Ml(pr.bind(null,s,xt,vn),d);break}pr(s,xt,vn);break;case 5:pr(s,xt,vn);break;default:throw Error(t(329))}}}return St(s,Ge()),s.callbackNode===c?vp.bind(null,s):null}function Dc(s,i){var c=ui;return s.current.memoizedState.isDehydrated&&(fr(s,i).flags|=256),s=Uo(s,i),s!==2&&(i=xt,xt=c,i!==null&&Rc(i)),s}function Rc(s){xt===null?xt=s:xt.push.apply(xt,s)}function D0(s){for(var i=s;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d=0;d<c.length;d++){var g=c[d],v=g.getSnapshot;g=g.value;try{if(!$t(v(),g))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $n(s,i){for(i&=~kc,i&=~jo,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var c=31-Ht(i),d=1<<c;s[c]=-1,i&=~d}}function yp(s){if((Ee&6)!==0)throw Error(t(327));rs();var i=Vi(s,0);if((i&1)===0)return St(s,Ge()),null;var c=Uo(s,i);if(s.tag!==0&&c===2){var d=ll(s);d!==0&&(i=d,c=Dc(s,d))}if(c===1)throw c=ci,fr(s,0),$n(s,i),St(s,Ge()),c;if(c===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,pr(s,xt,vn),St(s,Ge()),null}function Nc(s,i){var c=Ee;Ee|=1;try{return s(i)}finally{Ee=c,Ee===0&&(ns=Ge()+500,uo&&On())}}function hr(s){Bn!==null&&Bn.tag===0&&(Ee&6)===0&&rs();var i=Ee;Ee|=1;var c=Ut.transition,d=De;try{if(Ut.transition=null,De=1,s)return s()}finally{De=d,Ut.transition=c,Ee=i,(Ee&6)===0&&On()}}function jc(){Tt=ts.current,Ue(ts)}function fr(s,i){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,i0(c)),Ye!==null)for(c=Ye.return;c!==null;){var d=c;switch($l(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&lo();break;case 3:Zr(),Ue(yt),Ue(ct),ec();break;case 5:Zl(d);break;case 4:Zr();break;case 13:Ue(ze);break;case 19:Ue(ze);break;case 10:Gl(d.type._context);break;case 22:case 23:jc()}c=c.return}if(nt=s,Ye=s=zn(s.current,null),it=Tt=i,Xe=0,ci=null,kc=jo=dr=0,xt=ui=null,lr!==null){for(i=0;i<lr.length;i++)if(c=lr[i],d=c.interleaved,d!==null){c.interleaved=null;var g=d.next,v=c.pending;if(v!==null){var x=v.next;v.next=g,d.next=x}c.pending=d}lr=null}return s}function wp(s,i){do{var c=Ye;try{if(ql(),xo.current=ko,So){for(var d=Fe.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}So=!1}if(ur=0,tt=Ze=Fe=null,ri=!1,si=0,Ec.current=null,c===null||c.return===null){Xe=1,ci=i,Ye=null;break}e:{var v=s,x=c.return,k=c,D=i;if(i=it,k.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var B=D,V=k,q=V.tag;if((V.mode&1)===0&&(q===0||q===11||q===15)){var W=V.alternate;W?(V.updateQueue=W.updateQueue,V.memoizedState=W.memoizedState,V.lanes=W.lanes):(V.updateQueue=null,V.memoizedState=null)}var Z=Wf(x);if(Z!==null){Z.flags&=-257,Vf(Z,x,k,v,i),Z.mode&1&&Ff(v,B,i),i=Z,D=B;var ne=i.updateQueue;if(ne===null){var re=new Set;re.add(D),i.updateQueue=re}else ne.add(D);break e}else{if((i&1)===0){Ff(v,B,i),Ic();break e}D=Error(t(426))}}else if(He&&k.mode&1){var Qe=Wf(x);if(Qe!==null){(Qe.flags&65536)===0&&(Qe.flags|=256),Vf(Qe,x,k,v,i),Wl(Xr(D,k));break e}}v=D=Xr(D,k),Xe!==4&&(Xe=2),ui===null?ui=[v]:ui.push(v),v=x;do{switch(v.tag){case 3:v.flags|=65536,i&=-i,v.lanes|=i;var P=$f(v,D,i);pf(v,P);break e;case 1:k=D;var j=v.type,L=v.stateNode;if((v.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Un===null||!Un.has(L)))){v.flags|=65536,i&=-i,v.lanes|=i;var Y=zf(v,k,i);pf(v,Y);break e}}v=v.return}while(v!==null)}Sp(c)}catch(ie){i=ie,Ye===c&&c!==null&&(Ye=c=c.return);continue}break}while(!0)}function bp(){var s=No.current;return No.current=ko,s===null?ko:s}function Ic(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),nt===null||(dr&268435455)===0&&(jo&268435455)===0||$n(nt,it)}function Uo(s,i){var c=Ee;Ee|=2;var d=bp();(nt!==s||it!==i)&&(vn=null,fr(s,i));do try{R0();break}catch(g){wp(s,g)}while(!0);if(ql(),Ee=c,No.current=d,Ye!==null)throw Error(t(261));return nt=null,it=0,Xe}function R0(){for(;Ye!==null;)xp(Ye)}function N0(){for(;Ye!==null&&!nw();)xp(Ye)}function xp(s){var i=kp(s.alternate,s,Tt);s.memoizedProps=s.pendingProps,i===null?Sp(s):Ye=i,Ec.current=null}function Sp(s){var i=s;do{var c=i.alternate;if(s=i.return,(i.flags&32768)===0){if(c=_0(c,i,Tt),c!==null){Ye=c;return}}else{if(c=E0(c,i),c!==null){c.flags&=32767,Ye=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Xe=6,Ye=null;return}}if(i=i.sibling,i!==null){Ye=i;return}Ye=i=s}while(i!==null);Xe===0&&(Xe=5)}function pr(s,i,c){var d=De,g=Ut.transition;try{Ut.transition=null,De=1,j0(s,i,c,d)}finally{Ut.transition=g,De=d}return null}function j0(s,i,c,d){do rs();while(Bn!==null);if((Ee&6)!==0)throw Error(t(327));c=s.finishedWork;var g=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=c.lanes|c.childLanes;if(hw(s,v),s===nt&&(Ye=nt=null,it=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Oo||(Oo=!0,Cp($i,function(){return rs(),null})),v=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||v){v=Ut.transition,Ut.transition=null;var x=De;De=1;var k=Ee;Ee|=4,Ec.current=null,C0(s,c),hp(c,s),Zw(Il),Qi=!!jl,Il=jl=null,s.current=c,A0(c),rw(),Ee=k,De=x,Ut.transition=v}else s.current=c;if(Oo&&(Oo=!1,Bn=s,Mo=g),v=s.pendingLanes,v===0&&(Un=null),ow(c.stateNode),St(s,Ge()),i!==null)for(d=s.onRecoverableError,c=0;c<i.length;c++)g=i[c],d(g.value,{componentStack:g.stack,digest:g.digest});if(Io)throw Io=!1,s=Ac,Ac=null,s;return(Mo&1)!==0&&s.tag!==0&&rs(),v=s.pendingLanes,(v&1)!==0?s===Tc?di++:(di=0,Tc=s):di=0,On(),null}function rs(){if(Bn!==null){var s=ch(Mo),i=Ut.transition,c=De;try{if(Ut.transition=null,De=16>s?16:s,Bn===null)var d=!1;else{if(s=Bn,Bn=null,Mo=0,(Ee&6)!==0)throw Error(t(331));var g=Ee;for(Ee|=4,X=s.current;X!==null;){var v=X,x=v.child;if((X.flags&16)!==0){var k=v.deletions;if(k!==null){for(var D=0;D<k.length;D++){var B=k[D];for(X=B;X!==null;){var V=X;switch(V.tag){case 0:case 11:case 15:li(8,V,v)}var q=V.child;if(q!==null)q.return=V,X=q;else for(;X!==null;){V=X;var W=V.sibling,Z=V.return;if(ap(V),V===B){X=null;break}if(W!==null){W.return=Z,X=W;break}X=Z}}}var ne=v.alternate;if(ne!==null){var re=ne.child;if(re!==null){ne.child=null;do{var Qe=re.sibling;re.sibling=null,re=Qe}while(re!==null)}}X=v}}if((v.subtreeFlags&2064)!==0&&x!==null)x.return=v,X=x;else e:for(;X!==null;){if(v=X,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:li(9,v,v.return)}var P=v.sibling;if(P!==null){P.return=v.return,X=P;break e}X=v.return}}var j=s.current;for(X=j;X!==null;){x=X;var L=x.child;if((x.subtreeFlags&2064)!==0&&L!==null)L.return=x,X=L;else e:for(x=j;X!==null;){if(k=X,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Ro(9,k)}}catch(ie){Ve(k,k.return,ie)}if(k===x){X=null;break e}var Y=k.sibling;if(Y!==null){Y.return=k.return,X=Y;break e}X=k.return}}if(Ee=g,On(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(zi,s)}catch{}d=!0}return d}finally{De=c,Ut.transition=i}}return!1}function _p(s,i,c){i=Xr(c,i),i=$f(s,i,1),s=Pn(s,i,1),i=gt(),s!==null&&(Ms(s,1,i),St(s,i))}function Ve(s,i,c){if(s.tag===3)_p(s,s,c);else for(;i!==null;){if(i.tag===3){_p(i,s,c);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Un===null||!Un.has(d))){s=Xr(c,s),s=zf(i,s,1),i=Pn(i,s,1),s=gt(),i!==null&&(Ms(i,1,s),St(i,s));break}}i=i.return}}function I0(s,i,c){var d=s.pingCache;d!==null&&d.delete(i),i=gt(),s.pingedLanes|=s.suspendedLanes&c,nt===s&&(it&c)===c&&(Xe===4||Xe===3&&(it&130023424)===it&&500>Ge()-Cc?fr(s,0):kc|=c),St(s,i)}function Ep(s,i){i===0&&((s.mode&1)===0?i=1:(i=Wi,Wi<<=1,(Wi&130023424)===0&&(Wi=4194304)));var c=gt();s=pn(s,i),s!==null&&(Ms(s,i,c),St(s,c))}function O0(s){var i=s.memoizedState,c=0;i!==null&&(c=i.retryLane),Ep(s,c)}function M0(s,i){var c=0;switch(s.tag){case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(i),Ep(s,c)}var kp;kp=function(s,i,c){if(s!==null)if(s.memoizedProps!==i.pendingProps||yt.current)bt=!0;else{if((s.lanes&c)===0&&(i.flags&128)===0)return bt=!1,S0(s,i,c);bt=(s.flags&131072)!==0}else bt=!1,He&&(i.flags&1048576)!==0&&rf(i,fo,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;To(s,i),s=i.pendingProps;var g=Vr(i,ct.current);Jr(i,c),g=rc(null,i,d,s,g,c);var v=sc();return i.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,wt(d)?(v=!0,co(i)):v=!1,i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Kl(i),g.updater=Co,i.stateNode=g,g._reactInternals=i,uc(i,d,s,c),i=pc(null,i,d,!0,v,c)):(i.tag=0,He&&v&&Hl(i),mt(null,i,g,c),i=i.child),i;case 16:d=i.elementType;e:{switch(To(s,i),s=i.pendingProps,g=d._init,d=g(d._payload),i.type=d,g=i.tag=L0(d),s=Ft(d,s),g){case 0:i=fc(null,i,d,s,c);break e;case 1:i=Jf(null,i,d,s,c);break e;case 11:i=qf(null,i,d,s,c);break e;case 14:i=Gf(null,i,d,Ft(d.type,s),c);break e}throw Error(t(306,d,""))}return i;case 0:return d=i.type,g=i.pendingProps,g=i.elementType===d?g:Ft(d,g),fc(s,i,d,g,c);case 1:return d=i.type,g=i.pendingProps,g=i.elementType===d?g:Ft(d,g),Jf(s,i,d,g,c);case 3:e:{if(Zf(i),s===null)throw Error(t(387));d=i.pendingProps,v=i.memoizedState,g=v.element,ff(s,i),wo(i,d,null,c);var x=i.memoizedState;if(d=x.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},i.updateQueue.baseState=v,i.memoizedState=v,i.flags&256){g=Xr(Error(t(423)),i),i=Xf(s,i,d,c,g);break e}else if(d!==g){g=Xr(Error(t(424)),i),i=Xf(s,i,d,c,g);break e}else for(At=Nn(i.stateNode.containerInfo.firstChild),Ct=i,He=!0,zt=null,c=df(i,null,d,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Qr(),d===g){i=gn(s,i,c);break e}mt(s,i,d,c)}i=i.child}return i;case 5:return gf(i),s===null&&Fl(i),d=i.type,g=i.pendingProps,v=s!==null?s.memoizedProps:null,x=g.children,Ol(d,g)?x=null:v!==null&&Ol(d,v)&&(i.flags|=32),Kf(s,i),mt(s,i,x,c),i.child;case 6:return s===null&&Fl(i),null;case 13:return ep(s,i,c);case 4:return Jl(i,i.stateNode.containerInfo),d=i.pendingProps,s===null?i.child=Yr(i,null,d,c):mt(s,i,d,c),i.child;case 11:return d=i.type,g=i.pendingProps,g=i.elementType===d?g:Ft(d,g),qf(s,i,d,g,c);case 7:return mt(s,i,i.pendingProps,c),i.child;case 8:return mt(s,i,i.pendingProps.children,c),i.child;case 12:return mt(s,i,i.pendingProps.children,c),i.child;case 10:e:{if(d=i.type._context,g=i.pendingProps,v=i.memoizedProps,x=g.value,Oe(go,d._currentValue),d._currentValue=x,v!==null)if($t(v.value,x)){if(v.children===g.children&&!yt.current){i=gn(s,i,c);break e}}else for(v=i.child,v!==null&&(v.return=i);v!==null;){var k=v.dependencies;if(k!==null){x=v.child;for(var D=k.firstContext;D!==null;){if(D.context===d){if(v.tag===1){D=mn(-1,c&-c),D.tag=2;var B=v.updateQueue;if(B!==null){B=B.shared;var V=B.pending;V===null?D.next=D:(D.next=V.next,V.next=D),B.pending=D}}v.lanes|=c,D=v.alternate,D!==null&&(D.lanes|=c),Ql(v.return,c,i),k.lanes|=c;break}D=D.next}}else if(v.tag===10)x=v.type===i.type?null:v.child;else if(v.tag===18){if(x=v.return,x===null)throw Error(t(341));x.lanes|=c,k=x.alternate,k!==null&&(k.lanes|=c),Ql(x,c,i),x=v.sibling}else x=v.child;if(x!==null)x.return=v;else for(x=v;x!==null;){if(x===i){x=null;break}if(v=x.sibling,v!==null){v.return=x.return,x=v;break}x=x.return}v=x}mt(s,i,g.children,c),i=i.child}return i;case 9:return g=i.type,d=i.pendingProps.children,Jr(i,c),g=Pt(g),d=d(g),i.flags|=1,mt(s,i,d,c),i.child;case 14:return d=i.type,g=Ft(d,i.pendingProps),g=Ft(d.type,g),Gf(s,i,d,g,c);case 15:return Qf(s,i,i.type,i.pendingProps,c);case 17:return d=i.type,g=i.pendingProps,g=i.elementType===d?g:Ft(d,g),To(s,i),i.tag=1,wt(d)?(s=!0,co(i)):s=!1,Jr(i,c),Bf(i,d,g),uc(i,d,g,c),pc(null,i,d,!0,s,c);case 19:return np(s,i,c);case 22:return Yf(s,i,c)}throw Error(t(156,i.tag))};function Cp(s,i){return sh(s,i)}function P0(s,i,c,d){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(s,i,c,d){return new P0(s,i,c,d)}function Oc(s){return s=s.prototype,!(!s||!s.isReactComponent)}function L0(s){if(typeof s=="function")return Oc(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ve)return 11;if(s===Pe)return 14}return 2}function zn(s,i){var c=s.alternate;return c===null?(c=Bt(s.tag,i,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=i,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,i=s.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function Bo(s,i,c,d,g,v){var x=2;if(d=s,typeof s=="function")Oc(s)&&(x=1);else if(typeof s=="string")x=5;else e:switch(s){case M:return mr(c.children,g,v,i);case H:x=8,g|=8;break;case G:return s=Bt(12,c,i,g|2),s.elementType=G,s.lanes=v,s;case Ae:return s=Bt(13,c,i,g),s.elementType=Ae,s.lanes=v,s;case Ne:return s=Bt(19,c,i,g),s.elementType=Ne,s.lanes=v,s;case me:return Ho(c,g,v,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case te:x=10;break e;case ee:x=9;break e;case ve:x=11;break e;case Pe:x=14;break e;case ye:x=16,d=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return i=Bt(x,c,i,g),i.elementType=s,i.type=d,i.lanes=v,i}function mr(s,i,c,d){return s=Bt(7,s,d,i),s.lanes=c,s}function Ho(s,i,c,d){return s=Bt(22,s,d,i),s.elementType=me,s.lanes=c,s.stateNode={isHidden:!1},s}function Mc(s,i,c){return s=Bt(6,s,null,i),s.lanes=c,s}function Pc(s,i,c){return i=Bt(4,s.children!==null?s.children:[],s.key,i),i.lanes=c,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function U0(s,i,c,d,g){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cl(0),this.expirationTimes=cl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cl(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Lc(s,i,c,d,g,v,x,k,D){return s=new U0(s,i,c,k,D),i===1?(i=1,v===!0&&(i|=8)):i=0,v=Bt(3,null,null,i),s.current=v,v.stateNode=s,v.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kl(v),s}function B0(s,i,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:d==null?null:""+d,children:s,containerInfo:i,implementation:c}}function Ap(s){if(!s)return In;s=s._reactInternals;e:{if(rr(s)!==s||s.tag!==1)throw Error(t(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(wt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(s.tag===1){var c=s.type;if(wt(c))return ef(s,c,i)}return i}function Tp(s,i,c,d,g,v,x,k,D){return s=Lc(c,d,!0,s,g,v,x,k,D),s.context=Ap(null),c=s.current,d=gt(),g=Hn(c),v=mn(d,g),v.callback=i??null,Pn(c,v,g),s.current.lanes=g,Ms(s,g,d),St(s,d),s}function $o(s,i,c,d){var g=i.current,v=gt(),x=Hn(g);return c=Ap(c),i.context===null?i.context=c:i.pendingContext=c,i=mn(v,x),i.payload={element:s},d=d===void 0?null:d,d!==null&&(i.callback=d),s=Pn(g,i,x),s!==null&&(qt(s,g,x,v),yo(s,g,x)),x}function zo(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Dp(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<i?c:i}}function Uc(s,i){Dp(s,i),(s=s.alternate)&&Dp(s,i)}function H0(){return null}var Rp=typeof reportError=="function"?reportError:function(s){console.error(s)};function Bc(s){this._internalRoot=s}Fo.prototype.render=Bc.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(t(409));$o(s,i,null,null)},Fo.prototype.unmount=Bc.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;hr(function(){$o(null,s,null,null)}),i[un]=null}};function Fo(s){this._internalRoot=s}Fo.prototype.unstable_scheduleHydration=function(s){if(s){var i=hh();s={blockedOn:null,target:s,priority:i};for(var c=0;c<Tn.length&&i!==0&&i<Tn[c].priority;c++);Tn.splice(c,0,s),c===0&&mh(s)}};function Hc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Wo(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Np(){}function $0(s,i,c,d,g){if(g){if(typeof d=="function"){var v=d;d=function(){var B=zo(x);v.call(B)}}var x=Tp(i,d,s,0,null,!1,!1,"",Np);return s._reactRootContainer=x,s[un]=x.current,Ys(s.nodeType===8?s.parentNode:s),hr(),x}for(;g=s.lastChild;)s.removeChild(g);if(typeof d=="function"){var k=d;d=function(){var B=zo(D);k.call(B)}}var D=Lc(s,0,!1,null,null,!1,!1,"",Np);return s._reactRootContainer=D,s[un]=D.current,Ys(s.nodeType===8?s.parentNode:s),hr(function(){$o(i,D,c,d)}),D}function Vo(s,i,c,d,g){var v=c._reactRootContainer;if(v){var x=v;if(typeof g=="function"){var k=g;g=function(){var D=zo(x);k.call(D)}}$o(i,x,s,g)}else x=$0(c,i,s,g,d);return zo(x)}uh=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var c=Os(i.pendingLanes);c!==0&&(ul(i,c|1),St(i,Ge()),(Ee&6)===0&&(ns=Ge()+500,On()))}break;case 13:hr(function(){var d=pn(s,1);if(d!==null){var g=gt();qt(d,s,1,g)}}),Uc(s,1)}},dl=function(s){if(s.tag===13){var i=pn(s,134217728);if(i!==null){var c=gt();qt(i,s,134217728,c)}Uc(s,134217728)}},dh=function(s){if(s.tag===13){var i=Hn(s),c=pn(s,i);if(c!==null){var d=gt();qt(c,s,i,d)}Uc(s,i)}},hh=function(){return De},fh=function(s,i){var c=De;try{return De=s,i()}finally{De=c}},rl=function(s,i,c){switch(i){case"input":if(Ya(s,c),i=c.name,c.type==="radio"&&i!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var d=c[i];if(d!==s&&d.form===s.form){var g=ao(d);if(!g)throw Error(t(90));ks(d),Ya(d,g)}}}break;case"textarea":zd(s,c);break;case"select":i=c.value,i!=null&&Ir(s,!!c.multiple,i,!1)}},Jd=Nc,Zd=hr;var z0={usingClientEntryPoint:!1,Events:[Zs,Fr,ao,Yd,Kd,Nc]},hi={findFiberByHostInstance:sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F0={bundleType:hi.bundleType,version:hi.version,rendererPackageName:hi.rendererPackageName,rendererConfig:hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=nh(s),s===null?null:s.stateNode},findFiberByHostInstance:hi.findFiberByHostInstance||H0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qo.isDisabled&&qo.supportsFiber)try{zi=qo.inject(F0),en=qo}catch{}}return _t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z0,_t.createPortal=function(s,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hc(i))throw Error(t(200));return B0(s,i,null,c)},_t.createRoot=function(s,i){if(!Hc(s))throw Error(t(299));var c=!1,d="",g=Rp;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=Lc(s,1,!1,null,null,c,!1,d,g),s[un]=i.current,Ys(s.nodeType===8?s.parentNode:s),new Bc(i)},_t.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=nh(i),s=s===null?null:s.stateNode,s},_t.flushSync=function(s){return hr(s)},_t.hydrate=function(s,i,c){if(!Wo(i))throw Error(t(200));return Vo(null,s,i,!0,c)},_t.hydrateRoot=function(s,i,c){if(!Hc(s))throw Error(t(405));var d=c!=null&&c.hydratedSources||null,g=!1,v="",x=Rp;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onRecoverableError!==void 0&&(x=c.onRecoverableError)),i=Tp(i,null,s,1,c??null,g,!1,v,x),s[un]=i.current,Ys(s),d)for(s=0;s<d.length;s++)c=d[s],g=c._getVersion,g=g(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,g]:i.mutableSourceEagerHydrationData.push(c,g);return new Fo(i)},_t.render=function(s,i,c){if(!Wo(i))throw Error(t(200));return Vo(null,s,i,!1,c)},_t.unmountComponentAtNode=function(s){if(!Wo(s))throw Error(t(40));return s._reactRootContainer?(hr(function(){Vo(null,null,s,!1,function(){s._reactRootContainer=null,s[un]=null})}),!0):!1},_t.unstable_batchedUpdates=Nc,_t.unstable_renderSubtreeIntoContainer=function(s,i,c,d){if(!Wo(c))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Vo(s,i,c,!1,d)},_t.version="18.3.1-next-f1338f8080-20240426",_t}var Bp;function Ag(){if(Bp)return Fc.exports;Bp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Fc.exports=K0(),Fc.exports}var Hp;function J0(){if(Hp)return Go;Hp=1;var n=Ag();return Go.createRoot=n.createRoot,Go.hydrateRoot=n.hydrateRoot,Go}var Z0=J0();const X0=Cg(Z0);function Ia(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function eb(n,e,t,r){function o(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(m){try{p(r.next(m))}catch(y){l(y)}}function h(m){try{p(r.throw(m))}catch(y){l(y)}}function p(m){m.done?a(m.value):o(m.value).then(u,h)}p((r=r.apply(n,e||[])).next())})}const tb=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class Ku extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class nb extends Ku{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class $p extends Ku{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class zp extends Ku{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xu;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(xu||(xu={}));class rb{constructor(e,{headers:t={},customFetch:r,region:o=xu.Any}={}){this.url=e,this.headers=t,this.region=o,this.fetch=tb(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return eb(this,arguments,void 0,function*(t,r={}){var o;let a,l;try{const{headers:u,method:h,body:p,signal:m,timeout:y}=r;let b={},{region:w}=r;w||(w=this.region);const E=new URL(`${this.url}/${t}`);w&&w!=="any"&&(b["x-region"]=w,E.searchParams.set("forceFunctionRegion",w));let _;p&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",_=p):typeof p=="string"?(b["Content-Type"]="text/plain",_=p):typeof FormData<"u"&&p instanceof FormData?_=p:(b["Content-Type"]="application/json",_=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?_=JSON.stringify(p):_=p;let S=m;y&&(l=new AbortController,a=setTimeout(()=>l.abort(),y),m?(S=l.signal,m.addEventListener("abort",()=>l.abort())):S=l.signal);const T=yield this.fetch(E.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),u),body:_,signal:S}).catch($=>{throw new nb($)}),R=T.headers.get("x-relay-error");if(R&&R==="true")throw new $p(T);if(!T.ok)throw new zp(T);let N=((o=T.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),I;return N==="application/json"?I=yield T.json():N==="application/octet-stream"||N==="application/pdf"?I=yield T.blob():N==="text/event-stream"?I=T:N==="multipart/form-data"?I=yield T.formData():I=yield T.text(),{data:I,error:null,response:T}}catch(u){return{data:null,error:u,response:u instanceof zp||u instanceof $p?u.context:void 0}}finally{a&&clearTimeout(a)}})}}var sb=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},ib=class{constructor(n){var e,t;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(t=n.isMaybeSingle)!==null&&t!==void 0?t:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let l=null,u=null,h=null,p=a.status,m=a.statusText;if(a.ok){var y,b;if(t.method!=="HEAD"){var w;const T=await a.text();T===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((w=t.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?u=T:u=JSON.parse(T))}const _=(y=t.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),S=(b=a.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");_&&S&&S.length>1&&(h=parseInt(S[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,p=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var E;const _=await a.text();try{l=JSON.parse(_),Array.isArray(l)&&a.status===404&&(u=[],l=null,p=200,m="OK")}catch{a.status===404&&_===""?(p=204,m="No Content"):l={message:_}}if(l&&t.isMaybeSingle&&(!(l==null||(E=l.details)===null||E===void 0)&&E.includes("0 rows"))&&(l=null,p=200,m="OK"),l&&t.shouldThrowOnError)throw new sb(l)}return{error:l,data:u,count:h,status:p,statusText:m}});return this.shouldThrowOnError||(o=o.catch(a=>{var l;let u="";const h=a==null?void 0:a.cause;if(h){var p,m,y,b;const E=(p=h==null?void 0:h.message)!==null&&p!==void 0?p:"",_=(m=h==null?void 0:h.code)!==null&&m!==void 0?m:"";u=`${(y=a==null?void 0:a.name)!==null&&y!==void 0?y:"FetchError"}: ${a==null?void 0:a.message}`,u+=`

Caused by: ${(b=h==null?void 0:h.name)!==null&&b!==void 0?b:"Error"}: ${E}`,_&&(u+=` (${_})`),h!=null&&h.stack&&(u+=`
${h.stack}`)}else{var w;u=(w=a==null?void 0:a.stack)!==null&&w!==void 0?w:""}return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(n,e)}returns(){return this}overrideTypes(){return this}},ob=class extends ib{select(n){let e=!1;const t=(n??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:t,foreignTable:r,referencedTable:o=r}={}){const a=o?`${o}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${n}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:t=e}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${n}`),this}range(n,e,{foreignTable:t,referencedTable:r=t}={}){const o=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${n}`),this.url.searchParams.set(a,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:t=!1,buffers:r=!1,wal:o=!1,format:a="text"}={}){var l;const u=[n?"analyze":null,e?"verbose":null,t?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${h}"; options=${u};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const Fp=new RegExp("[,()]");var us=class extends ob{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&Fp.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`in.(${t})`),this}notIn(n,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&Fp.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`not.in.(${t})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:t,type:r}={}){let o="";r==="plain"?o="pl":r==="phrase"?o="ph":r==="websearch"&&(o="w");const a=t===void 0?"":`(${t})`;return this.url.searchParams.append(n,`${o}fts${a}.${e}`),this}match(n){return Object.entries(n).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(n,e,t){return this.url.searchParams.append(n,`not.${e}.${t}`),this}or(n,{foreignTable:e,referencedTable:t=e}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${n})`),this}filter(n,e,t){return this.url.searchParams.append(n,`${e}.${t}`),this}},ab=class{constructor(n,{headers:e={},schema:t,fetch:r}){this.url=n,this.headers=new Headers(e),this.schema=t,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,e){const{head:t=!1,count:r}=e??{},o=t?"HEAD":"GET";let a=!1;const l=(n??"*").split("").map(p=>/\s/.test(p)&&!a?"":(p==='"'&&(a=!a),p)).join(""),{url:u,headers:h}=this.cloneRequestState();return u.searchParams.set("select",l),r&&h.append("Prefer",`count=${r}`),new us({method:o,url:u,headers:h,schema:this.schema,fetch:this.fetch})}insert(n,{count:e,defaultToNull:t=!0}={}){var r;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),t||l.append("Prefer","missing=default"),Array.isArray(n)){const u=n.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(u.length>0){const h=[...new Set(u)].map(p=>`"${p}"`);a.searchParams.set("columns",h.join(","))}}return new us({method:o,url:a,headers:l,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(n,{onConflict:e,ignoreDuplicates:t=!1,count:r,defaultToNull:o=!0}={}){var a;const l="POST",{url:u,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&u.searchParams.set("on_conflict",e),r&&h.append("Prefer",`count=${r}`),o||h.append("Prefer","missing=default"),Array.isArray(n)){const p=n.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(p.length>0){const m=[...new Set(p)].map(y=>`"${y}"`);u.searchParams.set("columns",m.join(","))}}return new us({method:l,url:u,headers:h,schema:this.schema,body:n,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(n,{count:e}={}){var t;const r="PATCH",{url:o,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new us({method:r,url:o,headers:a,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:n}={}){var e;const t="DELETE",{url:r,headers:o}=this.cloneRequestState();return n&&o.append("Prefer",`count=${n}`),new us({method:t,url:r,headers:o,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},lb=class Tg{constructor(e,{headers:t={},schema:r,fetch:o}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=o}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new ab(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Tg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:o=!1,count:a}={}){var l;let u;const h=new URL(`${this.url}/rpc/${e}`);let p;const m=w=>w!==null&&typeof w=="object"&&(!Array.isArray(w)||w.some(m)),y=r&&Object.values(t).some(m);y?(u="POST",p=t):r||o?(u=r?"HEAD":"GET",Object.entries(t).filter(([w,E])=>E!==void 0).map(([w,E])=>[w,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([w,E])=>{h.searchParams.append(w,E)})):(u="POST",p=t);const b=new Headers(this.headers);return y?b.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&b.set("Prefer",`count=${a}`),new us({method:u,url:h,headers:b,schema:this.schemaName,body:p,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class cb{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const r=t.versions;if(r&&r.node){const o=r.node,a=parseInt(o.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ub="2.90.1",db=`realtime-js/${ub}`,Dg="1.0.0",hb="2.0.0",Wp=Dg,Su=1e4,fb=1e3,pb=100;var Wn;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Wn||(Wn={}));var et;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(et||(et={}));var Kt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Kt||(Kt={}));var _u;(function(n){n.websocket="websocket"})(_u||(_u={}));var xr;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(xr||(xr={}));class mb{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const o=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var t,r;const o=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,t,r){var o,a;const l=e.topic,u=(o=e.ref)!==null&&o!==void 0?o:"",h=(a=e.join_ref)!==null&&a!==void 0?a:"",p=e.payload.event,m=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(m).length===0?"":JSON.stringify(m);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+u.length+l.length+p.length+y.length,w=new ArrayBuffer(this.HEADER_LENGTH+b);let E=new DataView(w),_=0;E.setUint8(_++,this.KINDS.userBroadcastPush),E.setUint8(_++,h.length),E.setUint8(_++,u.length),E.setUint8(_++,l.length),E.setUint8(_++,p.length),E.setUint8(_++,y.length),E.setUint8(_++,t),Array.from(h,T=>E.setUint8(_++,T.charCodeAt(0))),Array.from(u,T=>E.setUint8(_++,T.charCodeAt(0))),Array.from(l,T=>E.setUint8(_++,T.charCodeAt(0))),Array.from(p,T=>E.setUint8(_++,T.charCodeAt(0))),Array.from(y,T=>E.setUint8(_++,T.charCodeAt(0)));var S=new Uint8Array(w.byteLength+r.byteLength);return S.set(new Uint8Array(w),0),S.set(new Uint8Array(r),w.byteLength),S.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[o,a,l,u,h]=r;return t({join_ref:o,ref:a,topic:l,event:u,payload:h})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),o=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,o)}}_decodeUserBroadcast(e,t,r){const o=t.getUint8(1),a=t.getUint8(2),l=t.getUint8(3),u=t.getUint8(4);let h=this.HEADER_LENGTH+4;const p=r.decode(e.slice(h,h+o));h=h+o;const m=r.decode(e.slice(h,h+a));h=h+a;const y=r.decode(e.slice(h,h+l));h=h+l;const b=e.slice(h,e.byteLength),w=u===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,E={type:this.BROADCAST_EVENT,event:m,payload:w};return l>0&&(E.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}}class Rg{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Me;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Me||(Me={}));const Vp=(n,e,t={})=>{var r;const o=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=gb(l,n,e,o),a),{}):{}},gb=(n,e,t,r)=>{const o=e.find(u=>u.name===n),a=o==null?void 0:o.type,l=t[n];return a&&!r.includes(a)?Ng(a,l):Eu(l)},Ng=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return bb(e,t)}switch(n){case Me.bool:return vb(e);case Me.float4:case Me.float8:case Me.int2:case Me.int4:case Me.int8:case Me.numeric:case Me.oid:return yb(e);case Me.json:case Me.jsonb:return wb(e);case Me.timestamp:return xb(e);case Me.abstime:case Me.date:case Me.daterange:case Me.int4range:case Me.int8range:case Me.money:case Me.reltime:case Me.text:case Me.time:case Me.timestamptz:case Me.timetz:case Me.tsrange:case Me.tstzrange:return Eu(e);default:return Eu(e)}},Eu=n=>n,vb=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},yb=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},wb=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},bb=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let a;const l=n.slice(1,t);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>Ng(e,u))}return n},xb=n=>typeof n=="string"?n.replace(" ","T"):n,jg=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class qc{constructor(e,t,r={},o=Su){this.channel=e,this.event=t,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var qp;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(qp||(qp={}));class vi{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vi.syncState(this.state,o,a,l),this.pendingDiffs.forEach(h=>{this.state=vi.syncDiff(this.state,h,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},o=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=vi.syncDiff(this.state,o,a,l),u())}),this.onJoin((o,a,l)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:l})}),this.onLeave((o,a,l)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,o){const a=this.cloneDeep(e),l=this.transformState(t),u={},h={};return this.map(a,(p,m)=>{l[p]||(h[p]=m)}),this.map(l,(p,m)=>{const y=a[p];if(y){const b=m.map(S=>S.presence_ref),w=y.map(S=>S.presence_ref),E=m.filter(S=>w.indexOf(S.presence_ref)<0),_=y.filter(S=>b.indexOf(S.presence_ref)<0);E.length>0&&(u[p]=E),_.length>0&&(h[p]=_)}else u[p]=m}),this.syncDiff(a,{joins:u,leaves:h},r,o)}static syncDiff(e,t,r,o){const{joins:a,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(a,(u,h)=>{var p;const m=(p=e[u])!==null&&p!==void 0?p:[];if(e[u]=this.cloneDeep(h),m.length>0){const y=e[u].map(w=>w.presence_ref),b=m.filter(w=>y.indexOf(w.presence_ref)<0);e[u].unshift(...b)}r(u,m,h)}),this.map(l,(u,h)=>{let p=e[u];if(!p)return;const m=h.map(y=>y.presence_ref);p=p.filter(y=>m.indexOf(y.presence_ref)<0),e[u]=p,o(u,p,h),p.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const o=e[r];return"metas"in o?t[r]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[r]=o,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Gp;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Gp||(Gp={}));var yi;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(yi||(yi={}));var yn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(yn||(yn={}));class ps{constructor(e,t={config:{}},r){var o,a;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new qc(this,Kt.join,this.params,this.timeout),this.rejoinTimer=new Rg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=et.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kt.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new vi(this),this.broadcastEndpointURL=jg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==et.closed){const{config:{broadcast:l,presence:u,private:h}}=this.params,p=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(w=>w.filter))!==null&&o!==void 0?o:[],m=!!this.bindings[yi.PRESENCE]&&this.bindings[yi.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,y={},b={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:m}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(yn.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(yn.CLOSED)),this.updateJoinPayload(Object.assign({config:b},y)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:w})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),w===void 0){e==null||e(yn.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(E=_==null?void 0:_.length)!==null&&E!==void 0?E:0,T=[];for(let R=0;R<S;R++){const N=_[R],{filter:{event:I,schema:$,table:A,filter:M}}=N,H=w&&w[R];if(H&&H.event===I&&ps.isFilterValueEqual(H.schema,$)&&ps.isFilterValueEqual(H.table,A)&&ps.isFilterValueEqual(H.filter,M))T.push(Object.assign(Object.assign({},N),{id:H.id}));else{this.unsubscribe(),this.state=et.errored,e==null||e(yn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(yn.SUBSCRIBED);return}}).receive("error",w=>{this.state=et.errored,e==null||e(yn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(yn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===et.joined&&e===yi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var o;if(t==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);if(u.status===202)return{success:!0};let h=u.statusText;try{const p=await u.json();h=p.error||p.message||h}catch{}return Promise.reject(new Error(h))}async send(e,t={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,h;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=et.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new qc(this,Kt.leave,{},e),r.receive("ok",()=>{t(),o("ok")}).receive("timeout",()=>{t(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=et.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const o=new AbortController,a=setTimeout(()=>o.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:o.signal}));return clearTimeout(a),l}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new qc(this,e,t,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>pb){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var o,a;const l=e.toLocaleLowerCase(),{close:u,error:h,leave:p,join:m}=Kt;if(r&&[u,h,p,m].indexOf(l)>=0&&r!==this._joinRef())return;let b=this._onMessage(l,t,r);if(t&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(w=>{var E,_,S;return((E=w.filter)===null||E===void 0?void 0:E.event)==="*"||((S=(_=w.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(w=>w.callback(b,r)):(a=this.bindings[l])===null||a===void 0||a.filter(w=>{var E,_,S,T,R,N,I,$;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in w){const A=w.id,M=(E=w.filter)===null||E===void 0?void 0:E.event;return A&&((_=t.ids)===null||_===void 0?void 0:_.includes(A))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((S=t.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))&&(!(!((T=w.filter)===null||T===void 0)&&T.table)||w.filter.table===((R=t.data)===null||R===void 0?void 0:R.table))}else{const A=(I=(N=w==null?void 0:w.filter)===null||N===void 0?void 0:N.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return A==="*"||A===(($=t==null?void 0:t.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===l}).map(w=>{if(typeof b=="object"&&"ids"in b){const E=b.data,{schema:_,table:S,commit_timestamp:T,type:R,errors:N}=E;b=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:T,eventType:R,new:{},old:{},errors:N}),this._getPayloadRecords(E))}w.callback(b,r)})}_isClosed(){return this.state===et.closed}_isJoined(){return this.state===et.joined}_isJoining(){return this.state===et.joining}_isLeaving(){return this.state===et.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const o=e.toLocaleLowerCase(),a={type:o,filter:t,callback:r};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ps.isEqual(o.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Kt.close,{},e)}_onError(e){this._on(Kt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=et.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Vp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Vp(e.columns,e.old_record)),t}}const Gc=()=>{},Qo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Sb=[1e3,2e3,5e3,1e4],_b=1e4,Eb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kb{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Su,this.transport=null,this.heartbeatIntervalMs=Qo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gc,this.ref=0,this.reconnectTimer=null,this.vsn=Wp,this.logger=Gc,this.conn=null,this.sendBuffer=[],this.serializer=new mb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...a)=>o(...a):(...a)=>fetch(...a),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${_u.websocket}`,this.httpEndpoint=jg(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=cb.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Wn.connecting:return xr.Connecting;case Wn.open:return xr.Open;case Wn.closing:return xr.Closing;default:return xr.Closed}}isConnected(){return this.connectionState()===xr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(a=>a.topic===r);if(o)return o;{const a=new ps(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:r,payload:o,ref:a}=e,l=()=>{this.encode(e,u=>{var h;(h=this.conn)===null||h===void 0||h.send(u)})};this.log("push",`${t} ${r} (${a})`,o),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(fb,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Qo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",p)}catch(m){this.log("error","error in heartbeat callback",m)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:o,payload:a,ref:l}=t,u=l?`(${l})`:"",h=a.status||"";this.log("receive",`${h} ${r} ${o} ${u}`.trim(),a),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(o,a,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Wn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Wn.open||this.conn.readyState===Wn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Kt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(t);return`${e}${r}${o}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Eb],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(o=>{const a={access_token:t,version:db};t&&o.updateJoinPayload(a),o.joinedOnce&&o._isJoined()&&o._push(Kt.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Rg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,o,a,l,u,h,p,m,y,b,w;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Su,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:Qo.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:Gc,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:Wp,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(E=>Sb[E-1]||_b),this.vsn){case Dg:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:((E,_)=>_(JSON.stringify(E))),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:((E,_)=>_(JSON.parse(E)));break;case hb:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var _i=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Cb(n,e,t){const r=new URL(e,n);if(t)for(const[o,a]of Object.entries(t))a!==void 0&&r.searchParams.set(o,a);return r.toString()}async function Ab(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function Tb(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:o,body:a,headers:l}){const u=Cb(n.baseUrl,r,o),h=await Ab(n.auth),p=await e(u,{method:t,headers:{...a?{"Content-Type":"application/json"}:{},...h,...l},body:a?JSON.stringify(a):void 0}),m=await p.text(),y=(p.headers.get("content-type")||"").includes("application/json"),b=y&&m?JSON.parse(m):m;if(!p.ok){const w=y?b:void 0,E=w==null?void 0:w.error;throw new _i((E==null?void 0:E.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:E==null?void 0:E.type,icebergCode:E==null?void 0:E.code,details:w})}return{status:p.status,headers:p.headers,data:b}}}}function Yo(n){return n.join("")}var Db=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:Yo(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Yo(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yo(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Yo(n.namespace)}`}),!0}catch(e){if(e instanceof _i&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof _i&&t.status===409)return;throw t}}};function ss(n){return n.join("")}var Rb=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ss(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ss(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ss(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ss(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ss(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ss(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof _i&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof _i&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},Nb=class{constructor(n){var r;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=Tb({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Db(this.client,e),this.tableOps=new Rb(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},Oa=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function We(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var jb=class extends Oa{constructor(n,e,t){super(n),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ku=class extends Oa{constructor(n,e){super(n),this.name="StorageUnknownError",this.originalError=e}};const Ju=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Ib=()=>Response,Cu=n=>{if(Array.isArray(n))return n.map(t=>Cu(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const o=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[o]=Cu(r)}),e},Ob=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Mb=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Ei(n){"@babel/helpers - typeof";return Ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ei(n)}function Pb(n,e){if(Ei(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ei(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Lb(n){var e=Pb(n,"string");return Ei(e)=="symbol"?e:e+""}function Ub(n,e,t){return(e=Lb(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qp(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function fe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qp(Object(t),!0).forEach(function(r){Ub(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Qp(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const Qc=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},Bb=async(n,e,t)=>{n instanceof await Ib()&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{const o=n.status||500,a=(r==null?void 0:r.statusCode)||o+"";e(new jb(Qc(r),o,a))}).catch(r=>{e(new ku(Qc(r),r))}):e(new ku(Qc(n),n))},Hb=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?o:(Ob(r)?(o.headers=fe({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),fe(fe({},o),t))};async function Ii(n,e,t,r,o,a){return new Promise((l,u)=>{n(t,Hb(e,r,o,a)).then(h=>{if(!h.ok)throw h;return r!=null&&r.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>Bb(h,u,r))})}async function ki(n,e,t,r){return Ii(n,"GET",e,t,r)}async function Yt(n,e,t,r,o){return Ii(n,"POST",e,r,o,t)}async function Au(n,e,t,r,o){return Ii(n,"PUT",e,r,o,t)}async function $b(n,e,t,r){return Ii(n,"HEAD",e,fe(fe({},t),{},{noResolveJson:!0}),r)}async function Zu(n,e,t,r,o){return Ii(n,"DELETE",e,r,o,t)}var zb=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(We(e))return{data:null,error:e};throw e}}};let Ig;Ig=Symbol.toStringTag;var Fb=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[Ig]="BlobDownloadBuilder",this.promise=null}asStream(){return new zb(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(We(e))return{data:null,error:e};throw e}}};const Wb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Yp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Vb=class{constructor(n,e={},t,r){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.bucketId=t,this.fetch=Ju(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,e,t,r){var o=this;try{let a;const l=fe(fe({},Yp),r);let u=fe(fe({},o.headers),n==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&t instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",o.encodeMetadata(h)),a.append("",t)):typeof FormData<"u"&&t instanceof FormData?(a=t,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),h&&!a.has("metadata")&&a.append("metadata",o.encodeMetadata(h))):(a=t,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,h&&(u["x-metadata"]=o.toBase64(o.encodeMetadata(h))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(u=fe(fe({},u),r.headers));const p=o._removeEmptyFolders(e),m=o._getFinalPath(p),y=await(n=="PUT"?Au:Yt)(o.fetch,`${o.url}/object/${m}`,a,fe({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(a){if(o.shouldThrowOnError)throw a;if(We(a))return{data:null,error:a};throw a}}async upload(n,e,t){return this.uploadOrUpdate("POST",n,e,t)}async uploadToSignedUrl(n,e,t,r){var o=this;const a=o._removeEmptyFolders(n),l=o._getFinalPath(a),u=new URL(o.url+`/object/upload/sign/${l}`);u.searchParams.set("token",e);try{let h;const p=fe({upsert:Yp.upsert},r),m=fe(fe({},o.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&t instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",t)):typeof FormData<"u"&&t instanceof FormData?(h=t,h.append("cacheControl",p.cacheControl)):(h=t,m["cache-control"]=`max-age=${p.cacheControl}`,m["content-type"]=p.contentType),{data:{path:a,fullPath:(await Au(o.fetch,u.toString(),h,{headers:m})).Key},error:null}}catch(h){if(o.shouldThrowOnError)throw h;if(We(h))return{data:null,error:h};throw h}}async createSignedUploadUrl(n,e){var t=this;try{let r=t._getFinalPath(n);const o=fe({},t.headers);e!=null&&e.upsert&&(o["x-upsert"]="true");const a=await Yt(t.fetch,`${t.url}/object/upload/sign/${r}`,{},{headers:o}),l=new URL(t.url+a.url),u=l.searchParams.get("token");if(!u)throw new Oa("No token returned by API");return{data:{signedUrl:l.toString(),path:n,token:u},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async update(n,e,t){return this.uploadOrUpdate("PUT",n,e,t)}async move(n,e,t){var r=this;try{return{data:await Yt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers}),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}}async copy(n,e,t){var r=this;try{return{data:{path:(await Yt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers})).Key},error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}}async createSignedUrl(n,e,t){var r=this;try{let o=r._getFinalPath(n),a=await Yt(r.fetch,`${r.url}/object/sign/${o}`,fe({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:r.headers});const l=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return a={signedUrl:encodeURI(`${r.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}}async createSignedUrls(n,e,t){var r=this;try{const o=await Yt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:n},{headers:r.headers}),a=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{data:o.map(l=>fe(fe({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${a}`):null})),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}}download(n,e){const t=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=r?`?${r}`:"",a=this._getFinalPath(n),l=()=>ki(this.fetch,`${this.url}/${t}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new Fb(l,this.shouldThrowOnError)}async info(n){var e=this;const t=e._getFinalPath(n);try{return{data:Cu(await ki(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async exists(n){var e=this;const t=e._getFinalPath(n);try{return await $b(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(We(r)&&r instanceof ku){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}}getPublicUrl(n,e){const t=this._getFinalPath(n),r=[],o=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&r.push(o);const a=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${t}${u}`)}}}async remove(n){var e=this;try{return{data:await Zu(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(We(t))return{data:null,error:t};throw t}}async list(n,e,t){var r=this;try{const o=fe(fe(fe({},Wb),e),{},{prefix:n||""});return{data:await Yt(r.fetch,`${r.url}/object/list/${r.bucketId}`,o,{headers:r.headers},t),error:null}}catch(o){if(r.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}}async listV2(n,e){var t=this;try{const r=fe({},n);return{data:await Yt(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,r,{headers:t.headers},e),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const Og="2.90.1",Mg={"X-Client-Info":`storage-js/${Og}`};var qb=class{constructor(n,e={},t,r){this.shouldThrowOnError=!1;const o=new URL(n);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=fe(fe({},Mg),e),this.fetch=Ju(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var e=this;try{const t=e.listBucketOptionsToQueryString(n);return{data:await ki(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(We(t))return{data:null,error:t};throw t}}async getBucket(n){var e=this;try{return{data:await ki(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(We(t))return{data:null,error:t};throw t}}async createBucket(n,e={public:!1}){var t=this;try{return{data:await Yt(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async updateBucket(n,e){var t=this;try{return{data:await Au(t.fetch,`${t.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async emptyBucket(n){var e=this;try{return{data:await Yt(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(We(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await Zu(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(We(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Gb=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=fe(fe({},Mg),e),this.fetch=Ju(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await Yt(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(We(t))return{data:null,error:t};throw t}}async listBuckets(n){var e=this;try{const t=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&t.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&t.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&t.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&t.set("sortOrder",n.sortOrder),n!=null&&n.search&&t.set("search",n.search);const r=t.toString(),o=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await ki(e.fetch,o,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(We(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await Zu(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(We(t))return{data:null,error:t};throw t}}from(n){var e=this;if(!Mb(n))throw new Oa("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new Nb({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(o,a){const l=o[a];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(o,u),error:null}}catch(h){if(r)throw h;return{data:null,error:h}}}}})}};const Xu={"X-Client-Info":`storage-js/${Og}`,"Content-Type":"application/json"};var Pg=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Rt(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var Yc=class extends Pg{constructor(n,e,t){super(n),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Qb=class extends Pg{constructor(n,e){super(n),this.name="StorageVectorsUnknownError",this.originalError=e}};const ed=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Yb=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Kp=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Kb=async(n,e,t)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const r=n.status||500,o=n;if(typeof o.json=="function")o.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||r+"";e(new Yc(Kp(a),r,l))}).catch(()=>{const a=r+"";e(new Yc(o.statusText||`HTTP ${r} error`,r,a))});else{const a=r+"";e(new Yc(o.statusText||`HTTP ${r} error`,r,a))}}else e(new Qb(Kp(n),n))},Jb=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(Yb(r)?(o.headers=fe({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,fe(fe({},o),t)):o};async function Zb(n,e,t,r,o,a){return new Promise((l,u)=>{n(t,Jb(e,r,o,a)).then(h=>{if(!h.ok)throw h;if(r!=null&&r.noResolveJson)return h;const p=h.headers.get("content-type");return!p||!p.includes("application/json")?{}:h.json()}).then(h=>l(h)).catch(h=>Kb(h,u,r))})}async function Nt(n,e,t,r,o){return Zb(n,"POST",e,r,o,t)}var Xb=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=fe(fe({},Xu),e),this.fetch=ed(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var e=this;try{return{data:await Nt(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rt(t))return{data:null,error:t};throw t}}async getIndex(n,e){var t=this;try{return{data:await Nt(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}}async listIndexes(n){var e=this;try{return{data:await Nt(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rt(t))return{data:null,error:t};throw t}}async deleteIndex(n,e){var t=this;try{return{data:await Nt(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Rt(r))return{data:null,error:r};throw r}}},ex=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=fe(fe({},Xu),e),this.fetch=ed(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var e=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Nt(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rt(t))return{data:null,error:t};throw t}}async getVectors(n){var e=this;try{return{data:await Nt(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rt(t))return{data:null,error:t};throw t}}async listVectors(n){var e=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await Nt(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rt(t))return{data:null,error:t};throw t}}async queryVectors(n){var e=this;try{return{data:await Nt(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rt(t))return{data:null,error:t};throw t}}async deleteVectors(n){var e=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Nt(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rt(t))return{data:null,error:t};throw t}}},tx=class{constructor(n,e={},t){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=fe(fe({},Xu),e),this.fetch=ed(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var e=this;try{return{data:await Nt(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rt(t))return{data:null,error:t};throw t}}async getBucket(n){var e=this;try{return{data:await Nt(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rt(t))return{data:null,error:t};throw t}}async listBuckets(n={}){var e=this;try{return{data:await Nt(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rt(t))return{data:null,error:t};throw t}}async deleteBucket(n){var e=this;try{return{data:await Nt(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Rt(t))return{data:null,error:t};throw t}}},nx=class extends tx{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new rx(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,t=this;return e().call(t,n)}async getBucket(n){var e=()=>super.getBucket,t=this;return e().call(t,n)}async listBuckets(n={}){var e=()=>super.listBuckets,t=this;return e().call(t,n)}async deleteBucket(n){var e=()=>super.deleteBucket,t=this;return e().call(t,n)}},rx=class extends Xb{constructor(n,e,t,r){super(n,e,r),this.vectorBucketName=t}async createIndex(n){var e=()=>super.createIndex,t=this;return e().call(t,fe(fe({},n),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,t=this;return e().call(t,fe(fe({},n),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,n)}index(n){return new sx(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},sx=class extends ex{constructor(n,e,t,r,o){super(n,e,o),this.vectorBucketName=t,this.indexName=r}async putVectors(n){var e=()=>super.putVectors,t=this;return e().call(t,fe(fe({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(n){var e=()=>super.getVectors,t=this;return e().call(t,fe(fe({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,t=this;return e().call(t,fe(fe({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,t=this;return e().call(t,fe(fe({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,t=this;return e().call(t,fe(fe({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},ix=class extends qb{constructor(n,e={},t,r){super(n,e,t,r)}from(n){return new Vb(this.url,this.headers,n,this.fetch)}get vectors(){return new nx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Gb(this.url+"/iceberg",this.headers,this.fetch)}};const Lg="2.90.1",ds=30*1e3,Tu=3,Kc=Tu*ds,ox="http://localhost:9999",ax="supabase.auth.token",lx={"X-Client-Info":`gotrue-js/${Lg}`},Du="X-Supabase-Api-Version",Ug={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ux=600*1e3;class Ci extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ae(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class dx extends Ci{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function hx(n){return ae(n)&&n.name==="AuthApiError"}class Sr extends Ci{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class _n extends Ci{constructor(e,t,r,o){super(e,r,o),this.name=t,this.status=r}}class Dt extends _n{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fx(n){return ae(n)&&n.name==="AuthSessionMissingError"}class is extends _n{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ko extends _n{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jo extends _n{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function px(n){return ae(n)&&n.name==="AuthImplicitGrantRedirectError"}class Jp extends _n{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mx extends _n{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ru extends _n{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Jc(n){return ae(n)&&n.name==="AuthRetryableFetchError"}class Zp extends _n{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Nu extends _n{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ma="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xp=` 	
\r=`.split(""),gx=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Xp.length;e+=1)n[Xp[e].charCodeAt(0)]=-2;for(let e=0;e<ma.length;e+=1)n[ma[e].charCodeAt(0)]=e;return n})();function em(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(ma[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(ma[r]),e.queuedBits-=6}}function Bg(n,e,t){const r=gx[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function tm(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=l=>{wx(l,r,t)};for(let l=0;l<n.length;l+=1)Bg(n.charCodeAt(l),o,a);return e.join("")}function vx(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function yx(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|o)+65536,t+=1}vx(r,e)}}function wx(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function gs(n){const e=[],t={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<n.length;o+=1)Bg(n.charCodeAt(o),t,r);return new Uint8Array(e)}function bx(n){const e=[];return yx(n,t=>e.push(t)),new Uint8Array(e)}function Er(n){const e=[],t={queue:0,queuedBits:0},r=o=>{e.push(o)};return n.forEach(o=>em(o,t,r)),em(null,t,r),e.join("")}function xx(n){return Math.round(Date.now()/1e3)+n}function Sx(){return Symbol("auth-callback")}const at=()=>typeof window<"u"&&typeof document<"u",gr={tested:!1,writable:!1},Hg=()=>{if(!at())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gr.tested)return gr.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),gr.tested=!0,gr.writable=!0}catch{gr.tested=!0,gr.writable=!1}return gr.writable};function _x(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((o,a)=>{e[a]=o})}catch{}return t.searchParams.forEach((r,o)=>{e[o]=r}),e}const $g=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),Ex=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",hs=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},vr=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ot=async(n,e)=>{await n.removeItem(e)};class Ma{constructor(){this.promise=new Ma.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ma.promiseConstructor=Promise;function Zc(n){const e=n.split(".");if(e.length!==3)throw new Nu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!cx.test(e[r]))throw new Nu("JWT not in base64url format");return{header:JSON.parse(tm(e[0])),payload:JSON.parse(tm(e[1])),signature:gs(e[2]),raw:{header:e[0],payload:e[1]}}}async function kx(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Cx(n,e){return new Promise((r,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await n(a);if(!e(a,null,l)){r(l);return}}catch(l){if(!e(a,l)){o(l);return}}})()})}function Ax(n){return("0"+n.toString(16)).substr(-2)}function Tx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let o="";for(let a=0;a<56;a++)o+=t.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,Ax).join("")}async function Dx(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(r);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function Rx(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Dx(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function os(n,e,t=!1){const r=Tx();let o=r;t&&(o+="/PASSWORD_RECOVERY"),await hs(n,`${e}-code-verifier`,o);const a=await Rx(r);return[a,r===a?"plain":"s256"]}const Nx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jx(n){const e=n.headers.get(Du);if(!e||!e.match(Nx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ix(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Ox(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Mx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function as(n){if(!Mx.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xc(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Px(n,e){return new Proxy(n,{get:(t,r,o)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,o)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,o)}})}function nm(n){return JSON.parse(JSON.stringify(n))}const yr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Lx=[502,503,504];async function rm(n){var e;if(!Ex(n))throw new Ru(yr(n),0);if(Lx.includes(n.status))throw new Ru(yr(n),n.status);let t;try{t=await n.json()}catch(a){throw new Sr(yr(a),a)}let r;const o=jx(n);if(o&&o.getTime()>=Ug["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Zp(yr(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Dt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Zp(yr(t),n.status,t.weak_password.reasons);throw new dx(yr(t),n.status||500,r)}const Ux=(n,e,t,r)=>{const o={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),t))};async function he(n,e,t,r){var o;const a=Object.assign({},r==null?void 0:r.headers);a[Du]||(a[Du]=Ug["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await Bx(n,e,t+u,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function Bx(n,e,t,r,o,a){const l=Ux(e,r,o,a);let u;try{u=await n(t,Object.assign({},l))}catch(h){throw console.error(h),new Ru(yr(h),0)}if(u.ok||await rm(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(h){await rm(h)}}function Qt(n){var e;let t=null;zx(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=xx(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function sm(n){const e=Qt(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Vn(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Hx(n){return{data:n,error:null}}function $x(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:a}=n,l=Ia(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:r,redirect_to:o,verification_type:a},h=Object.assign({},l);return{data:{properties:u,user:h},error:null}}function im(n){return n}function zx(n){return n.access_token&&n.refresh_token&&n.expires_in}const eu=["global","local","others"];class Fx{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=$g(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=eu[0]){if(eu.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${eu.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Vn})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Ia(e,["options"]),o=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:$x,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ae(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Vn})}catch(t){if(ae(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,o,a,l,u,h;try{const p={nextPage:null,lastPage:0,total:0},m=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:im});if(m.error)throw m.error;const y=await m.json(),b=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,w=(h=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(E=>{const _=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(E.split(";")[1].split("=")[1]);p[`${S}Page`]=_}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(ae(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){as(e);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Vn})}catch(t){if(ae(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){as(e);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Vn})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){as(e);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Vn})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){as(e.userId);try{const{data:t,error:r}=await he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:t,error:r}}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _deleteFactor(e){as(e.userId),as(e.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,o,a,l,u,h;try{const p={nextPage:null,lastPage:0,total:0},m=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:im});if(m.error)throw m.error;const y=await m.json(),b=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,w=(h=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(E=>{const _=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(E.split(";")[1].split("=")[1]);p[`${S}Page`]=_}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(ae(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await he(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ae(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ae(t))return{data:null,error:t};throw t}}}function om(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const ls={debug:!!(globalThis&&Hg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Wx extends zg{}async function Vx(n,e,t){ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ls.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await t()}finally{ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(e===0)throw ls.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Wx(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ls.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function qx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Fg(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Gx(n){return parseInt(n,16)}function Qx(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Yx(n){var e;const{chainId:t,domain:r,expirationTime:o,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:h,resources:p,scheme:m,uri:y,version:b}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const w=Fg(n.address),E=m?`${m}://${r}`:r,_=n.statement?`${n.statement}
`:"",S=`${E} wants you to sign in with your Ethereum account:
${w}

${_}`;let T=`URI: ${y}
Version: ${b}
Chain ID: ${t}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(o&&(T+=`
Expiration Time: ${o.toISOString()}`),u&&(T+=`
Not Before: ${u.toISOString()}`),h&&(T+=`
Request ID: ${h}`),p){let R=`
Resources:`;for(const N of p){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);R+=`
- ${N}`}T+=R}return`${S}
${T}`}class Ke extends Error{constructor({message:e,code:t,cause:r,name:o}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=o??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=t}}class ga extends Ke{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Kx({error:n,options:e}){var t,r,o;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ke({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=a.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Ke({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ke({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((o=a.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Ke({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ke({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ke({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Ke({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ke({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const l=window.location.hostname;if(Wg(l)){if(a.rp.id!==l)return new Ke({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ke({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Ke({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ke({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ke({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Jx({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ke({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ke({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(Wg(r)){if(t.rpId!==r)return new Ke({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ke({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ke({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ke({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Zx{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Xx=new Zx;function eS(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,o=Ia(n,["challenge","user","excludeCredentials"]),a=gs(e).buffer,l=Object.assign(Object.assign({},t),{id:gs(t.id).buffer}),u=Object.assign(Object.assign({},o),{challenge:a,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const p=r[h];u.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:gs(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function tS(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=Ia(n,["challenge","allowCredentials"]),o=gs(e).buffer,a=Object.assign(Object.assign({},r),{challenge:o});if(t&&t.length>0){a.allowCredentials=new Array(t.length);for(let l=0;l<t.length;l++){const u=t[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:gs(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function nS(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Er(new Uint8Array(n.response.attestationObject)),clientDataJSON:Er(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function rS(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),o=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Er(new Uint8Array(o.authenticatorData)),clientDataJSON:Er(new Uint8Array(o.clientDataJSON)),signature:Er(new Uint8Array(o.signature)),userHandle:o.userHandle?Er(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Wg(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function am(){var n,e;return!!(at()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function sS(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ga("Browser returned unexpected credential type",e)}:{data:null,error:new ga("Empty credential response",e)}}catch(e){return{data:null,error:Kx({error:e,options:n})}}}async function iS(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ga("Browser returned unexpected credential type",e)}:{data:null,error:new ga("Empty credential response",e)}}catch(e){return{data:null,error:Jx({error:e,options:n})}}}const oS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},aS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function va(...n){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),t=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of n)if(o)for(const a in o){const l=o[a];if(l!==void 0)if(Array.isArray(l))r[a]=l;else if(t(l))r[a]=l;else if(e(l)){const u=r[a];e(u)?r[a]=va(u,l):r[a]=va(l)}else r[a]=l}return r}function lS(n,e){return va(oS,n,e||{})}function cS(n,e){return va(aS,n,e||{})}class uS{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:o},a){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!l)return{data:null,error:u};const h=o??Xx.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:p}=l.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(l.webauthn.type){case"create":{const p=lS(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:m,error:y}=await sS({publicKey:p,signal:h});return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:y}}case"request":{const p=cS(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:m,error:y}=await iS(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:p,signal:h}));return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:y}}}}catch(l){return ae(l)?{data:null,error:l}:{data:null,error:new Sr("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},a){if(!t)return{data:null,error:new Ci("rpId is required for WebAuthn authentication")};try{if(!am())return{data:null,error:new Sr("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:o},{request:a});if(!l)return{data:null,error:u};const{webauthn:h}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:h.type,rpId:t,rpOrigins:r,credential_response:h.credential_response}})}catch(l){return ae(l)?{data:null,error:l}:{data:null,error:new Sr("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},a){if(!t)return{data:null,error:new Ci("rpId is required for WebAuthn registration")};try{if(!am())return{data:null,error:new Sr("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(m=>{var y;return(y=m.data)===null||y===void 0?void 0:y.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:u};const{data:h,error:p}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:o},{create:a});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:t,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(l){return ae(l)?{data:null,error:l}:{data:null,error:new Sr("Unexpected error in register",l)}}}}qx();const dS={url:ox,storageKey:ax,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function lm(n,e,t){return await t()}const cs={};class Ai{get jwks(){var e,t;return(t=(e=cs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){cs[this.storageKey]=Object.assign(Object.assign({},cs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=cs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){cs[this.storageKey]=Object.assign(Object.assign({},cs[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},dS),e);if(this.storageKey=a.storageKey,this.instanceID=(t=Ai.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Ai.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&at()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Fx({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=$g(a.fetch),this.lock=a.lock||lm,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&at()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Vx:this.lock=lm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new uS(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Hg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=om(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=om(this.memoryStorage)),at()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Lg}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(at()&&(t=_x(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),at()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:a}=await this._getSessionFromURL(t,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),px(a)){const h=(e=a.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:l,redirectType:u}=o;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ae(t)?this._returnResult({error:t}):this._returnResult({error:new Sr("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,o;try{const a=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:Qt}),{data:l,error:u}=a;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(a){if(ae(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var t,r,o;try{let a;if("email"in e){const{email:m,password:y,options:b}=e;let w=null,E=null;this.flowType==="pkce"&&([w,E]=await os(this.storage,this.storageKey)),a=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:m,password:y,data:(t=b==null?void 0:b.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:w,code_challenge_method:E},xform:Qt})}else if("phone"in e){const{phone:m,password:y,options:b}=e;a=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:y,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},channel:(o=b==null?void 0:b.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Qt})}else throw new Ko("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return await ot(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(a){if(await ot(this.storage,`${this.storageKey}-code-verifier`),ae(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:l,options:u}=e;t=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:sm})}else if("phone"in e){const{phone:a,password:l,options:u}=e;t=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:sm})}else throw new Ko("You must provide either an email or phone number and a password");const{data:r,error:o}=t;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!r||!r.session||!r.user){const a=new is;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(t){if(ae(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,o,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,o,a,l,u,h,p,m,y,b;let w,E;if("message"in e)w=e.message,E=e.signature;else{const{chain:_,wallet:S,statement:T,options:R}=e;let N;if(at())if(typeof S=="object")N=S;else{const G=window;if("ethereum"in G&&typeof G.ethereum=="object"&&"request"in G.ethereum&&typeof G.ethereum.request=="function")N=G.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=S}const I=new URL((t=R==null?void 0:R.url)!==null&&t!==void 0?t:window.location.href),$=await N.request({method:"eth_requestAccounts"}).then(G=>G).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!$||$.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=Fg($[0]);let M=(r=R==null?void 0:R.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!M){const G=await N.request({method:"eth_chainId"});M=Gx(G)}const H={domain:I.host,address:A,statement:T,uri:I.href,version:"1",chainId:M,nonce:(o=R==null?void 0:R.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(l=(a=R==null?void 0:R.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=R==null?void 0:R.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(h=R==null?void 0:R.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=R==null?void 0:R.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(m=R==null?void 0:R.signInWithEthereum)===null||m===void 0?void 0:m.resources};w=Yx(H),E=await N.request({method:"personal_sign",params:[Qx(w),A]})}try{const{data:_,error:S}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:E},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Qt});if(S)throw S;if(!_||!_.session||!_.user){const T=new is;return this._returnResult({data:{user:null,session:null},error:T})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:S})}catch(_){if(ae(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(e){var t,r,o,a,l,u,h,p,m,y,b,w;let E,_;if("message"in e)E=e.message,_=e.signature;else{const{chain:S,wallet:T,statement:R,options:N}=e;let I;if(at())if(typeof T=="object")I=T;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))I=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=T}const $=new URL((t=N==null?void 0:N.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in I&&I.signIn){const A=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:$.host,uri:$.href}),R?{statement:R}:null));let M;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")M=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)M=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)E=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),_=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${$.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${$.href}`,`Issued At: ${(o=(r=N==null?void 0:N.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=N==null?void 0:N.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((h=N==null?void 0:N.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((p=N==null?void 0:N.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((y=(m=N==null?void 0:N.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||y===void 0)&&y.length?["Resources",...N.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const A=await I.signMessage(new TextEncoder().encode(E),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=A}}try{const{data:S,error:T}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Er(_)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Qt});if(T)throw T;if(!S||!S.session||!S.user){const R=new is;return this._returnResult({data:{user:null,session:null},error:R})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:T})}catch(S){if(ae(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async _exchangeCodeForSession(e){const t=await vr(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(t??"").split("/");try{if(!r&&this.flowType==="pkce")throw new mx;const{data:a,error:l}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Qt});if(await ot(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const u=new is;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:l})}catch(a){if(await ot(this.storage,`${this.storageKey}-code-verifier`),ae(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:t,provider:r,token:o,access_token:a,nonce:l}=e,u=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Qt}),{data:h,error:p}=u;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!h||!h.session||!h.user){const m=new is;return this._returnResult({data:{user:null,session:null},error:m})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:p})}catch(t){if(ae(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,o,a,l;try{if("email"in e){const{email:u,options:h}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await os(this.storage,this.storageKey));const{error:y}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:u,options:h}=e,{data:p,error:m}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(o=h==null?void 0:h.data)!==null&&o!==void 0?o:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(l=h==null?void 0:h.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:m})}throw new Ko("You must provide either an email or phone number.")}catch(u){if(await ot(this.storage,`${this.storageKey}-code-verifier`),ae(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var t,r;try{let o,a;"options"in e&&(o=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:Qt});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,p=l.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(o){if(ae(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var t,r,o,a,l;try{let u=null,h=null;this.flowType==="pkce"&&([u,h]=await os(this.storage,this.storageKey));const p=await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:Hx});return!((a=p.data)===null||a===void 0)&&a.url&&at()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(u){if(await ot(this.storage,`${this.storageKey}-code-verifier`),ae(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Dt;const{error:o}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(ae(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:a}=e,{error:l}=await he(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:o,options:a}=e,{data:l,error:u}=await he(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new Ko("You must provide either an email or phone number and a type")}catch(t){if(ae(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await vr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Kc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await vr(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Xc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=Px(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Vn}):await this._useSession(async t=>{var r,o,a;const{data:l,error:u}=t;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Dt}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=l.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Vn})})}catch(t){if(ae(t))return fx(t)&&(await this._removeSession(),await ot(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:o,error:a}=r;if(a)throw a;if(!o.session)throw new Dt;const l=o.session;let u=null,h=null;this.flowType==="pkce"&&e.email!=null&&([u,h]=await os(this.storage,this.storageKey));const{data:p,error:m}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:h}),jwt:l.access_token,xform:Vn});if(m)throw m;return l.user=p.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await ot(this.storage,`${this.storageKey}-code-verifier`),ae(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Dt;const t=Date.now()/1e3;let r=t,o=!0,a=null;const{payload:l}=Zc(e.access_token);if(l.exp&&(r=l.exp,o=r<=t),o){const{data:u,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:h}=await this._getUser(e.access_token);if(h)throw h;a={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(t){if(ae(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:l,error:u}=t;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Dt;const{data:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ae(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!at())throw new Jo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Jo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Jp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jo("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Jp("No code detected.");const{data:R,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:a,refresh_token:l,expires_in:u,expires_at:h,token_type:p}=e;if(!a||!u||!l||!p)throw new Jo("No session defined in URL");const m=Math.round(Date.now()/1e3),y=parseInt(u);let b=m+y;h&&(b=parseInt(h));const w=b-m;w*1e3<=ds&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${y}s`);const E=b-y;m-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,b,m):m-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,b,m);const{data:_,error:S}=await this._getUser(a);if(S)throw S;const T={provider_token:r,provider_refresh_token:o,access_token:a,expires_in:y,expires_at:b,refresh_token:l,token_type:p,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(r){if(ae(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await vr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:o,error:a}=t;if(a)return this._returnResult({error:a});const l=(r=o.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(hx(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await ot(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Sx(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,o;try{const{data:{session:a},error:l}=t;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await os(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(await ot(this.storage,`${this.storageKey}-code-verifier`),ae(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:o}=await this._useSession(async a=>{var l,u,h,p,m;const{data:y,error:b}=a;if(b)throw b;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",w,{headers:this.headers,jwt:(m=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0})});if(o)throw o;return at()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ae(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:o,data:{session:a}}=t;if(o)throw o;const{options:l,provider:u,token:h,access_token:p,nonce:m}=e,y=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:h,access_token:p,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qt}),{data:b,error:w}=y;return w?this._returnResult({data:{user:null,session:null},error:w}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new is}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:w}))}catch(o){if(await ot(this.storage,`${this.storageKey}-code-verifier`),ae(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,o;const{data:a,error:l}=t;if(l)throw l;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Cx(async o=>(o>0&&await kx(200*Math.pow(2,o-1)),this._debug(t,"refreshing attempt",o),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Qt})),(o,a)=>{const l=200*Math.pow(2,o);return a&&Jc(a)&&Date.now()+l-r<ds})}catch(r){if(this._debug(t,"error",r),ae(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),at()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await vr(this.storage,this.storageKey);if(o&&this.userStorage){let l=await vr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:o.user},await hs(this.userStorage,this.storageKey+"-user",l)),o.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Xc()}else if(o&&!o.user&&!o.user){const l=await vr(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(o.user=l.user,await ot(this.storage,this.storageKey+"-user"),await hs(this.storage,this.storageKey,o)):o.user=Xc()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const a=((t=o.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Kc;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Kc}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:l}=await this._callRefreshToken(o.refresh_token);l&&(console.error(l),Jc(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(o.access_token);!u&&(l!=null&&l.user)?(o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Dt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ma;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new Dt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(o,"error",a),ae(a)){const l={data:null,error:a};return Jc(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,t,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(h){a.push(h)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ot(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await hs(this.userStorage,this.storageKey+"-user",{user:t.user});const o=Object.assign({},t);delete o.user;const a=nm(o);await hs(this.storage,this.storageKey,a)}else{const o=nm(t);await hs(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ot(this.storage,this.storageKey),await ot(this.storage,this.storageKey+"-code-verifier"),await ot(this.storage,this.storageKey+"-user"),this.userStorage&&await ot(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&at()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ds);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/ds);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${ds}ms, refresh threshold is ${Tu} ticks`),o<=Tu&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof zg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!at()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const o=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await os(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});o.push(u.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);o.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:o,error:a}=t;return a?this._returnResult({data:null,error:a}):await he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,o;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:p}=await he(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&h.type==="totp"&&(!((o=h==null?void 0:h.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:a}=t;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?nS(e.webauthn.credential_response):rS(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:h}=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:h}))})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r;const{data:o,error:a}=t;if(a)return this._returnResult({data:null,error:a});const l=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:eS(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:tS(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const o={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])o.all.push(a),a.status==="verified"&&o[a.factor_type].push(a);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Zc(r.access_token);let l=null;a.aal&&(l=a.aal);let u=l;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(m=>m.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(u="aal2");const p=a.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:o}=t;return o?this._returnResult({data:null,error:o}):r?await he(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Dt})})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:o},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new Dt});const l=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&at()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:o},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!o)return this._returnResult({data:null,error:new Dt});const l=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&at()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await he(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Dt})})}catch(e){if(ae(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:o}=t;return o?this._returnResult({data:null,error:o}):r?(await he(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Dt})})}catch(t){if(ae(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(u=>u.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+ux>o)return r;const{data:a,error:l}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,r=a.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:w,error:E}=await this.getSession();if(E||!w.session)return this._returnResult({data:null,error:E});r=w.session.access_token}const{header:o,payload:a,signature:l,raw:{header:u,payload:h}}=Zc(r);t!=null&&t.allowExpired||Ix(a.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:w}=await this.getUser(r);if(w)throw w;return{data:{claims:a,header:o,signature:l},error:null}}const m=Ox(o.alg),y=await crypto.subtle.importKey("jwk",p,m,!0,["verify"]);if(!await crypto.subtle.verify(m,y,l,bx(`${u}.${h}`)))throw new Nu("Invalid JWT signature");return{data:{claims:a,header:o,signature:l},error:null}}catch(r){if(ae(r))return this._returnResult({data:null,error:r});throw r}}}Ai.nextInstanceID={};const hS=Ai,fS="2.90.1";let mi="";typeof Deno<"u"?mi="deno":typeof document<"u"?mi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mi="react-native":mi="node";const pS={"X-Client-Info":`supabase-js-${mi}/${fS}`},mS={headers:pS},gS={schema:"public"},vS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yS={};function Ti(n){"@babel/helpers - typeof";return Ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ti(n)}function wS(n,e){if(Ti(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Ti(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function bS(n){var e=wS(n,"string");return Ti(e)=="symbol"?e:e+""}function xS(n,e,t){return(e=bS(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function qe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cm(Object(t),!0).forEach(function(r){xS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const SS=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),_S=()=>Headers,ES=(n,e,t)=>{const r=SS(t),o=_S();return async(a,l)=>{var u;const h=(u=await e())!==null&&u!==void 0?u:n;let p=new o(l==null?void 0:l.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),r(a,qe(qe({},l),{},{headers:p}))}};function kS(n){return n.endsWith("/")?n:n+"/"}function CS(n,e){var t,r;const{db:o,auth:a,realtime:l,global:u}=n,{db:h,auth:p,realtime:m,global:y}=e,b={db:qe(qe({},h),o),auth:qe(qe({},p),a),realtime:qe(qe({},m),l),storage:{},global:qe(qe(qe({},y),u),{},{headers:qe(qe({},(t=y==null?void 0:y.headers)!==null&&t!==void 0?t:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?b.accessToken=n.accessToken:delete b.accessToken,b}function AS(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(kS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var TS=class extends hS{constructor(n){super(n)}},DS=class{constructor(n,e,t){var r,o;this.supabaseUrl=n,this.supabaseKey=e;const a=AS(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:gS,realtime:yS,auth:qe(qe({},vS),{},{storageKey:l}),global:mS},h=CS(t??{},u);if(this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=h.auth)!==null&&p!==void 0?p:{},this.headers,h.global.fetch)}this.fetch=ES(e,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(qe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new lb(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new ix(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new rb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,t)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,t;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:o,storageKey:a,flowType:l,lock:u,debug:h,throwOnError:p},m,y){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new TS({url:this.authUrl.href,headers:qe(qe({},b),m),storageKey:a,autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:o,flowType:l,lock:u,debug:h,throwOnError:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new kb(this.realtimeUrl.href,qe(qe({},n),{},{params:qe(qe({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(n,e,t){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const RS=(n,e,t)=>new DS(n,e,t);function NS(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const e=n.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}NS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jS="https://rosofbnimiothwxsabyr.supabase.co",IS="sb_publishable_9qRf5tZIn0deozmhcqqmqw_4Z_3Dodi",je=RS(jS,IS),Vg=z.createContext(null);function OS({children:n}){const[e,t]=z.useState(null),[r,o]=z.useState(null),[a,l]=z.useState(!0),[u,h]=z.useState(!1),[p,m]=z.useState(!1);z.useEffect(()=>{const T=window.location.hash;T.includes("type=recovery")?m(!0):(T.includes("type=signup")||T.includes("type=email")||T.includes("access_token"))&&h(!0),je.auth.getSession().then(({data:{session:N}})=>{o(N),t((N==null?void 0:N.user)??null),l(!1)});const{data:{subscription:R}}=je.auth.onAuthStateChange((N,I)=>{o(I),t((I==null?void 0:I.user)??null)});return()=>R.unsubscribe()},[]);const y=()=>{h(!1),window.history.replaceState(null,"",window.location.pathname)},b=()=>{m(!1),window.history.replaceState(null,"",window.location.pathname)},w=async(T,R)=>{const{error:N}=await je.auth.signUp({email:T,password:R});return{error:N}},E=async(T,R)=>{const{error:N}=await je.auth.signInWithPassword({email:T,password:R});return{error:N}},_=async()=>{await je.auth.signOut()},S=async T=>{const I=`${window.location.origin}/chore-app/`.replace(/\/$/,""),{error:$}=await je.auth.resetPasswordForEmail(T,{redirectTo:I});return{error:$}};return f.jsx(Vg.Provider,{value:{user:e,session:r,loading:a,isEmailVerification:u,isPasswordReset:p,clearEmailVerification:y,clearPasswordReset:b,signUp:w,signIn:E,signOut:_,resetPassword:S},children:n})}function td(){const n=z.useContext(Vg);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}const Zo=[{id:"light",name:"Light",description:"Clean light theme",isGlass:!1,isDark:!1},{id:"dark",name:"Dark",description:"Classic dark theme",isGlass:!1,isDark:!0},{id:"crystal-light",name:"Crystal Light",description:"Frosted glass with soft blur",isGlass:!0,isDark:!1},{id:"crystal-dark",name:"Crystal Dark",description:"Dark glass with glow effects",isGlass:!0,isDark:!0},{id:"aurora",name:"Aurora",description:"Colorful gradient glass",isGlass:!0,isDark:!1},{id:"midnight",name:"Midnight",description:"Deep purple with starry accents",isGlass:!0,isDark:!0}],qg=z.createContext(null);function tu(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function MS({children:n}){const[e,t]=z.useState(()=>{const p=localStorage.getItem("theme");return p==="system"?"system":p&&Zo.find(m=>m.id===p)?p:"system"}),[r,o]=z.useState(()=>e==="system"?tu():e),a=z.useCallback(()=>{o(e==="system"?tu():e)},[e]);z.useEffect(()=>{const p=window.matchMedia("(prefers-color-scheme: dark)"),m=()=>{e==="system"&&o(tu())};return p.addEventListener("change",m),()=>p.removeEventListener("change",m)},[e]),z.useEffect(()=>{a()},[a]);const l=Zo.find(p=>p.id===r);z.useEffect(()=>{localStorage.setItem("theme",e),document.documentElement.classList.remove("dark","glass-theme"),document.documentElement.setAttribute("data-theme",r),l.isDark&&document.documentElement.classList.add("dark"),l.isGlass&&document.documentElement.classList.add("glass-theme")},[r,e,l]);const u=p=>{t(p)},h=()=>{t(p=>p==="system"?r==="dark"?"light":"dark":Zo.find(y=>y.id===p).isDark?"light":"dark")};return f.jsx(qg.Provider,{value:{theme:r,themeSelection:e,themeConfig:l,setTheme:u,themes:Zo,toggleTheme:h,isDark:l.isDark,isGlass:l.isGlass,isSystemTheme:e==="system"},children:n})}function PS(){const n=z.useContext(qg);if(!n)throw new Error("useTheme must be used within a ThemeProvider");return n}const Xo={light:{bg:"bg-white",accent:"bg-gray-200"},dark:{bg:"bg-gray-800",accent:"bg-gray-600"},"crystal-light":{bg:"bg-gradient-to-br from-purple-400 to-pink-300",accent:"bg-white/50"},"crystal-dark":{bg:"bg-gradient-to-br from-slate-900 to-blue-900",accent:"bg-blue-500/30"},aurora:{bg:"bg-gradient-to-br from-green-300 via-blue-400 to-purple-400",accent:"bg-white/50"},midnight:{bg:"bg-gradient-to-br from-indigo-950 to-purple-900",accent:"bg-purple-500/30"}};function Pa({compact:n=!1}){const{theme:e,themeSelection:t,setTheme:r,themes:o,themeConfig:a,isSystemTheme:l}=PS(),[u,h]=z.useState(!1),p=z.useRef(null);return z.useEffect(()=>{const m=y=>{p.current&&!p.current.contains(y.target)&&h(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),f.jsxs("div",{className:`relative ${u?"z-[100]":""}`,ref:p,children:[f.jsxs("button",{onClick:()=>h(!u),className:`flex items-center rounded-fluent-sm fluent-surface hover:bg-subtle-background-hover transition-all duration-fast ${n?"p-1.5 sm:p-2 gap-1":"px-2 sm:px-3 py-1.5 sm:py-2 gap-1 sm:gap-2"}`,title:`Theme: ${l?"System":a.name}`,children:[l?f.jsxs("div",{className:"rounded-fluent-sm overflow-hidden flex shadow-fluent-4 transition-all duration-fast w-5 h-5 sm:w-6 sm:h-6",children:[f.jsx("div",{className:"w-1/2 h-full bg-white flex items-center justify-center",children:f.jsx("div",{className:"w-1.5 h-1.5 bg-gray-300 rounded-sm"})}),f.jsx("div",{className:"w-1/2 h-full bg-gray-800 flex items-center justify-center",children:f.jsx("div",{className:"w-1.5 h-1.5 bg-gray-600 rounded-sm"})})]}):f.jsx("div",{className:`rounded-fluent-sm ${Xo[e].bg} flex items-center justify-center shadow-fluent-4 transition-all duration-fast w-5 h-5 sm:w-6 sm:h-6`,children:f.jsx("div",{className:`rounded-sm ${Xo[e].accent} transition-all duration-fast ${n?"w-2 h-2 sm:w-3 sm:h-3":"w-2.5 h-2.5 sm:w-3 sm:h-3"}`})}),f.jsx("svg",{className:`text-content-secondary transition-all duration-fast ${u?"rotate-180":""} ${n?"w-3 h-3 hidden sm:block":"w-3 h-3 sm:w-4 sm:h-4"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 bg-black/20 sm:hidden z-[99]",onClick:()=>h(!1)}),f.jsxs("div",{className:"fixed inset-x-2 bottom-2 sm:absolute sm:inset-auto sm:right-0 sm:top-full sm:mt-2 w-auto sm:w-80 fluent-card p-4 animate-fluent-appear z-[100] shadow-fluent-16",children:[f.jsx("h3",{className:"fluent-title text-sm font-semibold text-content-primary mb-3",children:"Choose Theme"}),f.jsxs("button",{onClick:()=>{r("system"),h(!1)},className:`w-full flex items-center gap-3 p-3 rounded-fluent-md transition-all duration-fast mb-3 ${l?"bg-brand/10 ring-2 ring-brand":"hover:bg-subtle-background-hover"}`,children:[f.jsxs("div",{className:"relative flex-shrink-0",children:[f.jsxs("div",{className:"w-12 h-12 rounded-fluent-md overflow-hidden flex shadow-fluent-4",children:[f.jsx("div",{className:"w-1/2 h-full bg-white flex items-center justify-center",children:f.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded-fluent-sm"})}),f.jsx("div",{className:"w-1/2 h-full bg-gray-800 flex items-center justify-center",children:f.jsx("div",{className:"w-4 h-4 bg-gray-600 rounded-fluent-sm"})})]}),l&&f.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-brand rounded-fluent-circle flex items-center justify-center",children:f.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),f.jsxs("div",{className:"text-left",children:[f.jsx("span",{className:"text-sm font-medium text-content-primary block",children:"System"}),f.jsx("span",{className:"text-xs text-content-secondary",children:"Follows device settings"})]})]}),f.jsx("div",{className:"h-px bg-border mb-3"}),f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:o.map(m=>f.jsxs("button",{onClick:()=>{r(m.id),h(!1)},className:`flex flex-col items-center gap-2 p-3 rounded-fluent-md transition-all duration-fast ${t===m.id?"bg-brand/10 ring-2 ring-brand":"hover:bg-subtle-background-hover"}`,children:[f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:`w-12 h-12 rounded-fluent-md ${Xo[m.id].bg} flex items-center justify-center shadow-fluent-4`,children:f.jsx("div",{className:`w-6 h-6 rounded-fluent-sm ${Xo[m.id].accent}`})}),t===m.id&&f.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-brand rounded-fluent-circle flex items-center justify-center",children:f.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),f.jsx("span",{className:"text-xs font-medium text-content-primary text-center leading-tight",children:m.name})]},m.id))})]})]})]})}function La({size:n="md",showText:e=!0}){const t={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-16 h-16"},r={sm:"text-lg",md:"text-xl",lg:"text-3xl"};return f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:`${t[n]} relative`,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-xl shadow-lg"}),f.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:f.jsxs("svg",{className:`${n==="sm"?"w-5 h-5":n==="md"?"w-6 h-6":"w-10 h-10"} text-white`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5a2 2 0 012-2h2a2 2 0 012 2"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 12l2 2 4-4"})]})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 to-transparent rounded-xl",style:{clipPath:"polygon(0 0, 100% 0, 0 50%)"}})]}),e&&f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:`${r[n]} font-bold`,style:{background:"linear-gradient(to right, #3b82f6, #8b5cf6, #ec4899)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"ChoreApp"}),n==="lg"&&f.jsx("span",{className:"text-xs text-content-secondary -mt-1",children:"Office Task Manager"})]})]})}function LS({onMenuClick:n,onDashboardClick:e,viewMode:t,onViewModeChange:r,searchQuery:o,onSearchChange:a,searchInputRef:l}){const{user:u,signOut:h}=td(),[p,m]=z.useState(!1);return z.useEffect(()=>{const y=()=>{const b=window.scrollY;m(b>50)};return window.addEventListener("scroll",y,{passive:!0}),()=>window.removeEventListener("scroll",y)},[]),f.jsxs("header",{role:"banner",className:`fluent-surface border-b border-border px-3 sm:px-6 flex items-center justify-between relative z-[100] transition-all duration-normal ease-fluent-decelerate ${p?"py-2":"py-2 sm:py-3"}`,children:[f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[f.jsx("button",{onClick:n,className:"lg:hidden p-1.5 sm:p-2 -ml-1 text-content-secondary hover:text-content-primary hover:bg-subtle-background-hover rounded-fluent-sm transition-all duration-fast flex-shrink-0","aria-label":"Toggle sidebar",children:f.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),f.jsx(La,{size:"sm",showText:!p}),!p&&f.jsx("p",{className:"hidden xl:block text-xs text-content-secondary ml-2",children:"Keep track of office chores and assignments"})]}),f.jsx("div",{className:"hidden md:flex flex-1 max-w-md mx-4",children:f.jsxs("div",{className:"relative w-full",children:[f.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-content-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),f.jsx("input",{type:"text",ref:l,value:o,onChange:y=>a(y.target.value),placeholder:"Search chores... (press /)","aria-label":"Search chores",className:"w-full pl-10 pr-8 py-1.5 text-sm bg-surface-secondary border border-border rounded-fluent-md text-content-primary placeholder-content-secondary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-all"}),o&&f.jsx("button",{onClick:()=>a(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-content-secondary hover:text-content-primary","aria-label":"Clear search",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),f.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-shrink-0",children:[f.jsxs("div",{className:"flex rounded-fluent-md border border-border overflow-hidden",role:"group","aria-label":"View mode",children:[f.jsx("button",{onClick:()=>r("calendar"),className:`p-1.5 sm:p-2 transition-all duration-fast ${t==="calendar"?"bg-accent text-white":"bg-surface-secondary text-content-secondary hover:bg-subtle-background-hover"}`,"aria-label":"Calendar view","aria-pressed":t==="calendar",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsx("button",{onClick:()=>r("list"),className:`p-1.5 sm:p-2 transition-all duration-fast ${t==="list"?"bg-accent text-white":"bg-surface-secondary text-content-secondary hover:bg-subtle-background-hover"}`,"aria-label":"List view","aria-pressed":t==="list",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})})})]}),f.jsxs("button",{onClick:e,className:`fluent-button-subtle text-content-secondary hover:text-content-primary border border-border rounded-fluent-sm hover:bg-subtle-background-hover transition-all duration-fast ${p?"p-1.5 sm:p-2":"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm"}`,"aria-label":"Open dashboard",children:[f.jsx("span",{className:p?"hidden":"hidden sm:inline",children:"Dashboard"}),f.jsx("svg",{className:`${p?"w-4 h-4 sm:w-5 sm:h-5":"w-5 h-5 sm:hidden"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})]}),f.jsx(Pa,{compact:p}),f.jsx("span",{className:`text-content-secondary truncate max-w-[100px] md:max-w-[150px] transition-all duration-normal ${p?"hidden":"hidden md:inline text-xs md:text-sm"}`,children:u==null?void 0:u.email}),f.jsxs("button",{onClick:h,className:`fluent-button-subtle text-content-secondary hover:text-content-primary border border-border rounded-fluent-sm hover:bg-subtle-background-hover transition-all duration-fast ${p?"p-1.5 sm:p-2":"px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm"}`,"aria-label":"Sign out",children:[f.jsx("span",{className:p?"hidden":"hidden sm:inline",children:"Sign Out"}),f.jsx("svg",{className:`${p?"w-4 h-4 sm:w-5 sm:h-5":"w-5 h-5 sm:hidden"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})]})]})]})}function Gg(n){return{id:n.id,title:n.title,description:n.description||void 0,date:n.date,dueTime:n.due_time||void 0,assigneeId:n.assignee_id,recurrence:n.recurrence,priority:n.priority||"medium",categoryId:n.category_id||void 0,estimatedMinutes:n.estimated_minutes||void 0}}function nd(n){return{id:n.id,name:n.name,color:n.color,avatarUrl:n.avatar_url||void 0,email:n.email||void 0,skills:n.skills||void 0,workingHours:n.working_hours_start&&n.working_hours_end?{start:n.working_hours_start,end:n.working_hours_end,days:n.working_days||[1,2,3,4,5]}:void 0,points:n.points||0,badges:n.badges||[],weeklyCapacityMinutes:n.weekly_capacity_minutes||void 0}}function Qg(n){return{id:n.id,name:n.name,color:n.color,icon:n.icon||void 0}}function Yg(n){return{id:n.id,choreId:n.chore_id,instanceDate:n.instance_date,completedBy:n.completed_by,completedAt:n.completed_at,notes:n.notes||void 0}}function Kg(n){return{id:n.id,memberId:n.member_id,startDate:n.start_date,endDate:n.end_date,reason:n.reason||void 0}}async function US(){const{data:n,error:e}=await je.from("chores").select("*").order("date",{ascending:!0});return e?(console.error("Error fetching chores:",e),[]):(n||[]).map(Gg)}async function BS(n){const{data:e,error:t}=await je.from("chores").insert({title:n.title,description:n.description||null,date:n.date,due_time:n.dueTime||null,assignee_id:n.assigneeId,recurrence:n.recurrence,priority:n.priority||"medium",category_id:n.categoryId||null,estimated_minutes:n.estimatedMinutes||null}).select().single();return t?(console.error("Error creating chore:",t),null):Gg(e)}async function HS(n){const{error:e}=await je.from("chores").update({title:n.title,description:n.description||null,date:n.date,due_time:n.dueTime||null,assignee_id:n.assigneeId,recurrence:n.recurrence,priority:n.priority||"medium",category_id:n.categoryId||null,estimated_minutes:n.estimatedMinutes||null}).eq("id",n.id);return e?(console.error("Error updating chore:",e),!1):!0}async function $S(n){const{error:e}=await je.from("chores").delete().eq("id",n);return e?(console.error("Error deleting chore:",e),!1):!0}async function zS(){const{data:n,error:e}=await je.from("team_members").select("*").order("created_at",{ascending:!0});return e?(console.error("Error fetching team members:",e),[]):(n||[]).map(nd)}async function FS(n){const e={name:n.name,color:n.color};try{const{data:t,error:r}=await je.from("team_members").insert(e).select().single();return r?(console.error("Error creating team member:",r),null):nd(t)}catch(t){return console.error("Error creating team member:",t),null}}async function um(n){const e={name:n.name,color:n.color};try{const{data:t,error:r}=await je.from("team_members").update(e).eq("id",n.id).select().single();return r?(console.error("Error updating team member:",r),null):{...nd(t),avatarUrl:n.avatarUrl,email:n.email,skills:n.skills,workingHours:n.workingHours,points:n.points||0,badges:n.badges||[],weeklyCapacityMinutes:n.weeklyCapacityMinutes}}catch(t){return console.error("Error updating team member:",t),null}}async function WS(n){const{error:e}=await je.from("team_members").delete().eq("id",n);return e?(console.error("Error deleting team member:",e),!1):!0}async function VS(){const{data:n,error:e}=await je.from("categories").select("*").order("name",{ascending:!0});return e?(console.error("Error fetching categories:",e),[]):(n||[]).map(Qg)}async function qS(n){const{data:e,error:t}=await je.from("categories").insert({name:n.name,color:n.color,icon:n.icon||null}).select().single();return t?(console.error("Error creating category:",t),null):Qg(e)}async function GS(n){const{error:e}=await je.from("categories").update({name:n.name,color:n.color,icon:n.icon||null}).eq("id",n.id);return e?(console.error("Error updating category:",e),!1):!0}async function QS(n){const{error:e}=await je.from("categories").delete().eq("id",n);return e?(console.error("Error deleting category:",e),!1):!0}async function YS(){const{data:n,error:e}=await je.from("chore_completions").select("*").order("completed_at",{ascending:!1});return e?(console.error("Error fetching completions:",e),[]):(n||[]).map(Yg)}async function KS(n){const{data:e,error:t}=await je.from("chore_completions").insert({chore_id:n.choreId,instance_date:n.instanceDate,completed_by:n.completedBy,completed_at:n.completedAt,notes:n.notes||null}).select().single();return t?(console.error("Error creating completion:",t),null):Yg(e)}async function JS(n){const{error:e}=await je.from("chore_completions").delete().eq("id",n);return e?(console.error("Error deleting completion:",e),!1):!0}async function ZS(){const{data:n,error:e}=await je.from("member_availability").select("*").order("start_date",{ascending:!0});return e?(console.error("Error fetching availability:",e),[]):(n||[]).map(Kg)}async function XS(n){const{data:e,error:t}=await je.from("member_availability").insert({member_id:n.memberId,start_date:n.startDate,end_date:n.endDate,reason:n.reason||null}).select().single();return t?(console.error("Error creating availability:",t),null):Kg(e)}async function e_(n){const{error:e}=await je.from("member_availability").update({member_id:n.memberId,start_date:n.startDate,end_date:n.endDate,reason:n.reason||null}).eq("id",n.id);return e?(console.error("Error updating availability:",e),!1):!0}async function t_(n){const{error:e}=await je.from("member_availability").delete().eq("id",n);return e?(console.error("Error deleting availability:",e),!1):!0}const nu=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"];function n_(n){return nu.find(t=>!n.includes(t))||nu[n.length%nu.length]}const Ua=[{id:"first-chore",name:"First Steps",description:"Complete your first chore",icon:"",threshold:1,type:"completion"},{id:"ten-chores",name:"Getting Started",description:"Complete 10 chores",icon:"",threshold:10,type:"completion"},{id:"twenty-five-chores",name:"Quarter Century",description:"Complete 25 chores",icon:"",threshold:25,type:"completion"},{id:"fifty-chores",name:"Reliable",description:"Complete 50 chores",icon:"",threshold:50,type:"completion"},{id:"hundred-chores",name:"Superstar",description:"Complete 100 chores",icon:"",threshold:100,type:"completion"},{id:"two-fifty-chores",name:"Chore Master",description:"Complete 250 chores",icon:"",threshold:250,type:"completion"},{id:"streak-3",name:"On a Roll",description:"Maintain a 3-day streak",icon:"",threshold:3,type:"streak"},{id:"streak-7",name:"Week Warrior",description:"Maintain a 7-day streak",icon:"",threshold:7,type:"streak"},{id:"streak-14",name:"Fortnight Force",description:"Maintain a 14-day streak",icon:"",threshold:14,type:"streak"},{id:"streak-30",name:"Unstoppable",description:"Maintain a 30-day streak",icon:"",threshold:30,type:"streak"},{id:"points-50",name:"Half Century",description:"Earn 50 points",icon:"",threshold:50,type:"points"},{id:"points-100",name:"Century Club",description:"Earn 100 points",icon:"",threshold:100,type:"points"},{id:"points-250",name:"High Achiever",description:"Earn 250 points",icon:"",threshold:250,type:"points"},{id:"points-500",name:"High Scorer",description:"Earn 500 points",icon:"",threshold:500,type:"points"},{id:"points-1000",name:"Legend",description:"Earn 1000 points",icon:"",threshold:1e3,type:"points"},{id:"early-bird",name:"Early Bird",description:"Complete a chore before 8 AM",icon:"",threshold:1,type:"special"},{id:"night-owl",name:"Night Owl",description:"Complete a chore after 10 PM",icon:"",threshold:1,type:"special"},{id:"team-player",name:"Team Player",description:"Complete an unassigned chore",icon:"",threshold:1,type:"special"},{id:"weekend-warrior",name:"Weekend Warrior",description:"Complete 5 chores on a weekend",icon:"",threshold:5,type:"special"},{id:"perfectionist",name:"Perfectionist",description:"Complete all assigned chores in a week",icon:"",threshold:1,type:"special"}],dm={low:5,medium:10,high:20},hm={streakBonus:1,maxStreakBonus:10};function Jg(n){return Ua.find(e=>e.id===n)}function r_(n,e,t,r,o,a){const l=[];for(const u of Ua){if(o.includes(u.id))continue;let h=!1;switch(u.type){case"completion":h=n>=u.threshold;break;case"streak":h=t>=u.threshold||e>=u.threshold;break;case"points":h=r>=u.threshold;break;case"special":if(a)switch(u.id){case"early-bird":h=a.earlyBird===!0;break;case"night-owl":h=a.nightOwl===!0;break;case"team-player":h=a.teamPlayer===!0;break;case"weekend-warrior":h=(a.weekendWarrior||0)>=u.threshold;break;case"perfectionist":h=a.perfectWeek===!0;break}break}h&&l.push(u.id)}return l}const Zg=z.createContext(null),s_={chores:[],teamMembers:[],categories:[],completions:[],availability:[],loading:!0};function i_(n,e){switch(e.type){case"SET_LOADING":return{...n,loading:e.payload};case"SET_CHORES":return{...n,chores:e.payload};case"ADD_CHORE":return{...n,chores:[...n.chores,e.payload]};case"UPDATE_CHORE":return{...n,chores:n.chores.map(t=>t.id===e.payload.id?e.payload:t)};case"DELETE_CHORE":return{...n,chores:n.chores.filter(t=>t.id!==e.payload)};case"SET_MEMBERS":return{...n,teamMembers:e.payload};case"ADD_MEMBER":return{...n,teamMembers:[...n.teamMembers,e.payload]};case"UPDATE_MEMBER":return{...n,teamMembers:n.teamMembers.map(t=>t.id===e.payload.id?e.payload:t)};case"REMOVE_MEMBER":return{...n,teamMembers:n.teamMembers.filter(t=>t.id!==e.payload)};case"SET_CATEGORIES":return{...n,categories:e.payload};case"ADD_CATEGORY":return{...n,categories:[...n.categories,e.payload]};case"UPDATE_CATEGORY":return{...n,categories:n.categories.map(t=>t.id===e.payload.id?e.payload:t)};case"DELETE_CATEGORY":return{...n,categories:n.categories.filter(t=>t.id!==e.payload)};case"SET_COMPLETIONS":return{...n,completions:e.payload};case"ADD_COMPLETION":return{...n,completions:[...n.completions,e.payload]};case"DELETE_COMPLETION":return{...n,completions:n.completions.filter(t=>t.id!==e.payload)};case"SET_AVAILABILITY":return{...n,availability:e.payload};case"ADD_AVAILABILITY":return{...n,availability:[...n.availability,e.payload]};case"UPDATE_AVAILABILITY":return{...n,availability:n.availability.map(t=>t.id===e.payload.id?e.payload:t)};case"DELETE_AVAILABILITY":return{...n,availability:n.availability.filter(t=>t.id!==e.payload)};default:return n}}function o_({children:n}){const[e,t]=z.useReducer(i_,s_);z.useEffect(()=>{async function $(){t({type:"SET_LOADING",payload:!0});const[A,M,H,G,te]=await Promise.all([US(),zS(),VS(),YS(),ZS()]);t({type:"SET_CHORES",payload:A}),t({type:"SET_MEMBERS",payload:M}),t({type:"SET_CATEGORIES",payload:H}),t({type:"SET_COMPLETIONS",payload:G}),t({type:"SET_AVAILABILITY",payload:te}),t({type:"SET_LOADING",payload:!1})}$()},[]);const r=async $=>{const A=await BS($);A&&t({type:"ADD_CHORE",payload:A})},o=async $=>{await HS($)&&t({type:"UPDATE_CHORE",payload:$})},a=async $=>{await $S($)&&t({type:"DELETE_CHORE",payload:$})},l=async $=>{const A=e.teamMembers.map(G=>G.color),M=n_(A),H=await FS({name:$,color:M});H&&t({type:"ADD_MEMBER",payload:H})},u=async $=>{const A=await um($);A&&t({type:"UPDATE_MEMBER",payload:A})},h=async $=>{await WS($)&&t({type:"REMOVE_MEMBER",payload:$})},p=async($,A,M)=>{const H=await qS({name:$,color:A,icon:M});H&&t({type:"ADD_CATEGORY",payload:H})},m=async $=>{await GS($)&&t({type:"UPDATE_CATEGORY",payload:$})},y=async $=>{await QS($)&&t({type:"DELETE_CATEGORY",payload:$})},b=async($,A,M,H)=>{const G=await KS({choreId:$,instanceDate:A,completedBy:M,completedAt:new Date().toISOString(),notes:H});if(G){t({type:"ADD_COMPLETION",payload:G});const te=e.chores.find(ve=>ve.id===$),ee=e.teamMembers.find(ve=>ve.id===M);if(te&&ee){let ve=dm[te.priority]||dm.medium;const Ae=_(M),Ne=Math.min(Ae.currentStreak,hm.maxStreakBonus)*hm.streakBonus;ve+=Ne;const Pe=new Date,ye=Pe.getHours(),me=Pe.getDay(),K=me===0||me===6,oe={earlyBird:ye<8,nightOwl:ye>=22,teamPlayer:te.assigneeId===null,weekendWarrior:K?e.completions.filter(O=>O.completedBy===M&&new Date(O.instanceDate).getDay()%6===0&&O.instanceDate===A).length+1:0},J=r_(Ae.totalCompleted+1,Ae.currentStreak+1,Math.max(Ae.longestStreak,Ae.currentStreak+1),ee.points+ve,ee.badges,oe);if(ve>0||J.length>0){const O={...ee,points:ee.points+ve,badges:[...ee.badges,...J]},F=await um(O);F&&t({type:"UPDATE_MEMBER",payload:F})}}}},w=async $=>{await JS($)&&t({type:"DELETE_COMPLETION",payload:$})},E=($,A)=>e.completions.some(M=>M.choreId===$&&M.instanceDate===A),_=$=>{const A=e.completions.filter(ye=>ye.completedBy===$).sort((ye,me)=>new Date(ye.instanceDate).getTime()-new Date(me.instanceDate).getTime()),M=A.length;if(M===0)return{totalCompleted:0,currentStreak:0,longestStreak:0};const H=[...new Set(A.map(ye=>ye.instanceDate))].sort();let G=0,te=0,ee=1;const ve=new Date;ve.setHours(0,0,0,0);const Ae=H[H.length-1],Ne=new Date(Ae);Ne.setHours(0,0,0,0);const Pe=Math.floor((ve.getTime()-Ne.getTime())/(1e3*60*60*24));for(let ye=1;ye<H.length;ye++){const me=new Date(H[ye-1]),K=new Date(H[ye]);Math.floor((K.getTime()-me.getTime())/(1e3*60*60*24))===1?ee++:(te=Math.max(te,ee),ee=1)}if(te=Math.max(te,ee),Pe<=1){G=1;for(let ye=H.length-2;ye>=0;ye--){const me=new Date(H[ye+1]),K=new Date(H[ye]);if(Math.floor((me.getTime()-K.getTime())/(1e3*60*60*24))===1)G++;else break}}return{totalCompleted:M,currentStreak:G,longestStreak:te}},S=async($,A,M,H)=>{const G=await XS({memberId:$,startDate:A,endDate:M,reason:H});G&&t({type:"ADD_AVAILABILITY",payload:G})},T=async $=>{await e_($)&&t({type:"UPDATE_AVAILABILITY",payload:$})},R=async $=>{await t_($)&&t({type:"DELETE_AVAILABILITY",payload:$})},N=($,A)=>!e.availability.some(M=>M.memberId===$&&M.startDate<=A&&M.endDate>=A),I=$=>{const A=new Set(e.availability.filter(M=>M.startDate<=$&&M.endDate>=$).map(M=>M.memberId));return e.teamMembers.filter(M=>!A.has(M.id))};return f.jsx(Zg.Provider,{value:{state:e,addChore:r,updateChore:o,deleteChore:a,addMember:l,updateMember:u,removeMember:h,addCategory:p,updateCategory:m,deleteCategory:y,completeChore:b,uncompleteChore:w,isChoreCompleted:E,addAvailability:S,updateAvailability:T,deleteAvailability:R,isMemberAvailable:N,getAvailableMembers:I,getMemberStats:_},children:n})}function ln(){const n=z.useContext(Zg);if(!n)throw new Error("useApp must be used within an AppProvider");return n}const a_=["Su","Mo","Tu","We","Th","Fr","Sa"];function l_({onDateSelect:n,eventDates:e=new Set}){const[t,r]=z.useState(new Date),o=z.useMemo(()=>{const h=t.getFullYear(),p=t.getMonth(),m=new Date(h,p,1),y=new Date(h,p+1,0),b=new Date(m);b.setDate(b.getDate()-b.getDay());const w=new Date(y);w.setDate(w.getDate()+(6-w.getDay()));const E=[],_=new Date(b),S=new Date;for(S.setHours(0,0,0,0);_<=w;){const T=_.toISOString().split("T")[0];E.push({date:new Date(_),isCurrentMonth:_.getMonth()===p,isToday:_.getTime()===S.getTime(),hasEvents:e.has(T)}),_.setDate(_.getDate()+1)}return E},[t,e]),a=h=>{r(p=>{const m=new Date(p);return m.setMonth(m.getMonth()+h),m})},l=()=>{const h=new Date;r(h),n(h)},u=()=>t.toLocaleDateString(void 0,{month:"short",year:"numeric"});return f.jsxs("div",{className:"mini-calendar p-3 bg-surface-secondary rounded-fluent-md border border-border",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("button",{onClick:()=>a(-1),className:"p-1 text-content-secondary hover:text-content-primary hover:bg-subtle-background-hover rounded-fluent-sm transition-all","aria-label":"Previous month",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),f.jsx("button",{onClick:l,className:"text-xs font-medium text-content-primary hover:text-accent transition-colors",children:u()}),f.jsx("button",{onClick:()=>a(1),className:"p-1 text-content-secondary hover:text-content-primary hover:bg-subtle-background-hover rounded-fluent-sm transition-all","aria-label":"Next month",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),f.jsx("div",{className:"grid grid-cols-7 gap-0.5 mb-1",children:a_.map(h=>f.jsx("div",{className:"text-center text-[10px] font-medium text-content-secondary py-1",children:h},h))}),f.jsx("div",{className:"grid grid-cols-7 gap-0.5",children:o.map((h,p)=>f.jsxs("button",{onClick:()=>n(h.date),className:`
              relative aspect-square flex items-center justify-center text-[11px] rounded-fluent-sm
              transition-all duration-fast
              ${h.isCurrentMonth?"text-content-primary":"text-content-secondary opacity-40"}
              ${h.isToday?"bg-accent text-white font-bold":"hover:bg-subtle-background-hover"}
            `,children:[h.date.getDate(),h.hasEvents&&!h.isToday&&f.jsx("span",{className:"absolute bottom-0.5 left-1/2 transform -translate-x-1/2 w-1 h-1 rounded-full bg-accent"})]},p))}),f.jsx("button",{onClick:l,className:"w-full mt-2 py-1.5 text-xs font-medium text-accent hover:bg-accent/10 rounded-fluent-sm transition-all",children:"Today"})]})}function c_({onClose:n,onDateSelect:e,eventDates:t,hiddenMembers:r=new Set,onToggleMemberVisibility:o,onProfileOpen:a,onAvailabilityOpen:l}){const{state:u,addMember:h,removeMember:p,isMemberAvailable:m}=ln(),[y,b]=z.useState(""),w=new Date().toISOString().split("T")[0],E=S=>{S.preventDefault(),y.trim()&&(h(y.trim()),b(""))},_=S=>{const T=m(S,w),R=u.availability.find(N=>N.memberId===S&&N.startDate>w);return{isAvailable:T,futureUnavailable:R}};return f.jsxs("div",{className:"fluent-panel w-72 lg:w-64 p-4 flex flex-col h-full",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h2",{className:"fluent-title text-lg font-semibold text-content-primary",children:"Team Members"}),n&&f.jsx("button",{onClick:n,className:"lg:hidden p-1.5 text-content-secondary hover:text-content-primary hover:bg-subtle-background-hover rounded-fluent-sm transition-all duration-fast","aria-label":"Close sidebar",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e&&f.jsx("div",{className:"mb-4",children:f.jsx(l_,{onDateSelect:e,eventDates:t})}),f.jsx("form",{onSubmit:E,className:"mb-4",children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:y,onChange:S=>b(S.target.value),placeholder:"Add member...",className:"fluent-input flex-1 text-sm"}),f.jsx("button",{type:"submit",className:"fluent-button px-3 py-2 text-sm",children:"Add"})]})}),f.jsx("div",{className:"flex-1 overflow-y-auto",children:u.teamMembers.length===0?f.jsx("p",{className:"text-sm text-content-secondary italic",children:"No team members yet"}):f.jsx("ul",{className:"space-y-1",children:u.teamMembers.map(S=>{const{isAvailable:T,futureUnavailable:R}=_(S.id),N=!r.has(S.id);return f.jsxs("li",{className:"flex items-center justify-between p-2 rounded-fluent-sm hover:bg-subtle-background-hover group transition-all duration-fast",children:[f.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[o&&f.jsx("button",{onClick:()=>o(S.id),className:`w-4 h-4 flex-shrink-0 rounded border transition-all ${N?"border-accent bg-accent":"border-border bg-surface-tertiary"}`,title:N?"Hide events":"Show events",children:N&&f.jsx("svg",{className:"w-full h-full text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),S.avatarUrl?f.jsx("img",{src:S.avatarUrl,alt:S.name,className:`w-6 h-6 rounded-fluent-circle object-cover flex-shrink-0 transition-opacity cursor-pointer ${N?"":"opacity-40"}`,onClick:()=>a==null?void 0:a(S)}):f.jsx("button",{onClick:()=>a==null?void 0:a(S),className:`w-6 h-6 rounded-fluent-circle flex-shrink-0 transition-opacity flex items-center justify-center text-white text-xs font-bold ${N?"":"opacity-40"}`,style:{backgroundColor:S.color},children:S.name.charAt(0).toUpperCase()}),f.jsx("span",{className:`text-sm text-content-primary truncate transition-opacity cursor-pointer hover:underline ${N?"":"opacity-40"}`,onClick:()=>a==null?void 0:a(S),children:S.name}),S.points>0&&f.jsxs("span",{className:"text-xs bg-brand-primary/20 text-brand-primary px-1.5 py-0.5 rounded-fluent-sm flex-shrink-0",children:[S.points,"pts"]}),!T&&f.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-600 px-1.5 py-0.5 rounded-fluent-sm flex-shrink-0",children:"Away"}),T&&R&&f.jsx("span",{className:"text-xs bg-yellow-500/20 text-yellow-600 px-1.5 py-0.5 rounded-fluent-sm flex-shrink-0",title:`Unavailable from ${R.startDate}`,children:"Soon"})]}),f.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:[f.jsx("button",{onClick:()=>a==null?void 0:a(S),className:"text-content-secondary hover:text-brand-primary hover:bg-brand-primary/10 rounded-fluent-sm p-0.5 opacity-100 lg:opacity-0 group-hover:opacity-100 transition-all duration-fast",title:"Edit profile",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),f.jsx("button",{onClick:()=>l==null?void 0:l(S),className:"text-content-secondary hover:text-accent hover:bg-accent/10 rounded-fluent-sm p-0.5 opacity-100 lg:opacity-0 group-hover:opacity-100 transition-all duration-fast",title:"Set availability",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f.jsx("button",{onClick:()=>p(S.id),className:"text-content-secondary hover:text-red-500 hover:bg-red-500/10 rounded-fluent-sm p-0.5 opacity-100 lg:opacity-0 group-hover:opacity-100 transition-all duration-fast",title:"Remove member",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},S.id)})})})]})}var ju=Ag(),Ba,de,Xg,ev,bs,_r,fm,tv,nv,ya={},rv=[],u_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function qn(n,e){for(var t in e)n[t]=e[t];return n}function sv(n){var e=n.parentNode;e&&e.removeChild(n)}function C(n,e,t){var r,o,a,l={};for(a in e)a=="key"?r=e[a]:a=="ref"?o=e[a]:l[a]=e[a];if(arguments.length>2&&(l.children=arguments.length>3?Ba.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(a in n.defaultProps)l[a]===void 0&&(l[a]=n.defaultProps[a]);return aa(n,l,r,o,null)}function aa(n,e,t,r,o){var a={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++Xg};return o==null&&de.vnode!=null&&de.vnode(a),a}function vt(){return{current:null}}function Re(n){return n.children}function d_(n,e,t,r,o){var a;for(a in t)a==="children"||a==="key"||a in e||wa(n,a,null,t[a],r);for(a in e)o&&typeof e[a]!="function"||a==="children"||a==="key"||a==="value"||a==="checked"||t[a]===e[a]||wa(n,a,e[a],t[a],r)}function pm(n,e,t){e[0]==="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||u_.test(e)?t:t+"px"}function wa(n,e,t,r,o){var a;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||pm(n.style,e,"");if(t)for(e in t)r&&t[e]===r[e]||pm(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")a=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+a]=t,t?r||n.addEventListener(e,a?gm:mm,a):n.removeEventListener(e,a?gm:mm,a);else if(e!=="dangerouslySetInnerHTML"){if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e.indexOf("-")==-1?n.removeAttribute(e):n.setAttribute(e,t))}}function mm(n){bs=!0;try{return this.l[n.type+!1](de.event?de.event(n):n)}finally{bs=!1}}function gm(n){bs=!0;try{return this.l[n.type+!0](de.event?de.event(n):n)}finally{bs=!1}}function jt(n,e){this.props=n,this.context=e}function Di(n,e){if(e==null)return n.__?Di(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Di(n):null}function iv(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return iv(n)}}function h_(n){bs?setTimeout(n):tv(n)}function Iu(n){(!n.__d&&(n.__d=!0)&&_r.push(n)&&!ba.__r++||fm!==de.debounceRendering)&&((fm=de.debounceRendering)||h_)(ba)}function ba(){var n,e,t,r,o,a,l,u;for(_r.sort(function(h,p){return h.__v.__b-p.__v.__b});n=_r.shift();)n.__d&&(e=_r.length,r=void 0,o=void 0,l=(a=(t=n).__v).__e,(u=t.__P)&&(r=[],(o=qn({},a)).__v=a.__v+1,rd(u,a,o,t.__n,u.ownerSVGElement!==void 0,a.__h!=null?[l]:null,r,l??Di(a),a.__h),uv(r,a),a.__e!=l&&iv(a)),_r.length>e&&_r.sort(function(h,p){return h.__v.__b-p.__v.__b}));ba.__r=0}function ov(n,e,t,r,o,a,l,u,h,p){var m,y,b,w,E,_,S,T=r&&r.__k||rv,R=T.length;for(t.__k=[],m=0;m<e.length;m++)if((w=t.__k[m]=(w=e[m])==null||typeof w=="boolean"?null:typeof w=="string"||typeof w=="number"||typeof w=="bigint"?aa(null,w,null,null,w):Array.isArray(w)?aa(Re,{children:w},null,null,null):w.__b>0?aa(w.type,w.props,w.key,w.ref?w.ref:null,w.__v):w)!=null){if(w.__=t,w.__b=t.__b+1,(b=T[m])===null||b&&w.key==b.key&&w.type===b.type)T[m]=void 0;else for(y=0;y<R;y++){if((b=T[y])&&w.key==b.key&&w.type===b.type){T[y]=void 0;break}b=null}rd(n,w,b=b||ya,o,a,l,u,h,p),E=w.__e,(y=w.ref)&&b.ref!=y&&(S||(S=[]),b.ref&&S.push(b.ref,null,w),S.push(y,w.__c||E,w)),E!=null?(_==null&&(_=E),typeof w.type=="function"&&w.__k===b.__k?w.__d=h=av(w,h,n):h=lv(n,w,b,T,E,h),typeof t.type=="function"&&(t.__d=h)):h&&b.__e==h&&h.parentNode!=n&&(h=Di(b))}for(t.__e=_,m=R;m--;)T[m]!=null&&(typeof t.type=="function"&&T[m].__e!=null&&T[m].__e==t.__d&&(t.__d=cv(r).nextSibling),hv(T[m],T[m]));if(S)for(m=0;m<S.length;m++)dv(S[m],S[++m],S[++m])}function av(n,e,t){for(var r,o=n.__k,a=0;o&&a<o.length;a++)(r=o[a])&&(r.__=n,e=typeof r.type=="function"?av(r,e,t):lv(t,r,r,o,r.__e,e));return e}function xa(n,e){return e=e||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(t){xa(t,e)}):e.push(n)),e}function lv(n,e,t,r,o,a){var l,u,h;if(e.__d!==void 0)l=e.__d,e.__d=void 0;else if(t==null||o!=a||o.parentNode==null)e:if(a==null||a.parentNode!==n)n.appendChild(o),l=null;else{for(u=a,h=0;(u=u.nextSibling)&&h<r.length;h+=1)if(u==o)break e;n.insertBefore(o,a),l=a}return l!==void 0?l:o.nextSibling}function cv(n){var e,t,r;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(e=n.__k.length-1;e>=0;e--)if((t=n.__k[e])&&(r=cv(t)))return r}return null}function rd(n,e,t,r,o,a,l,u,h){var p,m,y,b,w,E,_,S,T,R,N,I,$,A,M,H=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(h=t.__h,u=e.__e=t.__e,e.__h=null,a=[u]),(p=de.__b)&&p(e);try{e:if(typeof H=="function"){if(S=e.props,T=(p=H.contextType)&&r[p.__c],R=p?T?T.props.value:p.__:r,t.__c?_=(m=e.__c=t.__c).__=m.__E:("prototype"in H&&H.prototype.render?e.__c=m=new H(S,R):(e.__c=m=new jt(S,R),m.constructor=H,m.render=p_),T&&T.sub(m),m.props=S,m.state||(m.state={}),m.context=R,m.__n=r,y=m.__d=!0,m.__h=[],m._sb=[]),m.__s==null&&(m.__s=m.state),H.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=qn({},m.__s)),qn(m.__s,H.getDerivedStateFromProps(S,m.__s))),b=m.props,w=m.state,m.__v=e,y)H.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(H.getDerivedStateFromProps==null&&S!==b&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(S,R),!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(S,m.__s,R)===!1||e.__v===t.__v){for(e.__v!==t.__v&&(m.props=S,m.state=m.__s,m.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(G){G&&(G.__=e)}),N=0;N<m._sb.length;N++)m.__h.push(m._sb[N]);m._sb=[],m.__h.length&&l.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(S,m.__s,R),m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(b,w,E)})}if(m.context=R,m.props=S,m.__P=n,I=de.__r,$=0,"prototype"in H&&H.prototype.render){for(m.state=m.__s,m.__d=!1,I&&I(e),p=m.render(m.props,m.state,m.context),A=0;A<m._sb.length;A++)m.__h.push(m._sb[A]);m._sb=[]}else do m.__d=!1,I&&I(e),p=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++$<25);m.state=m.__s,m.getChildContext!=null&&(r=qn(qn({},r),m.getChildContext())),y||m.getSnapshotBeforeUpdate==null||(E=m.getSnapshotBeforeUpdate(b,w)),M=p!=null&&p.type===Re&&p.key==null?p.props.children:p,ov(n,Array.isArray(M)?M:[M],e,t,r,o,a,l,u,h),m.base=e.__e,e.__h=null,m.__h.length&&l.push(m),_&&(m.__E=m.__=null),m.__e=!1}else a==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=f_(t.__e,e,t,r,o,a,l,h);(p=de.diffed)&&p(e)}catch(G){e.__v=null,(h||a!=null)&&(e.__e=u,e.__h=!!h,a[a.indexOf(u)]=null),de.__e(G,e,t)}}function uv(n,e){de.__c&&de.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(r){r.call(t)})}catch(r){de.__e(r,t.__v)}})}function f_(n,e,t,r,o,a,l,u){var h,p,m,y=t.props,b=e.props,w=e.type,E=0;if(w==="svg"&&(o=!0),a!=null){for(;E<a.length;E++)if((h=a[E])&&"setAttribute"in h==!!w&&(w?h.localName===w:h.nodeType===3)){n=h,a[E]=null;break}}if(n==null){if(w===null)return document.createTextNode(b);n=o?document.createElementNS("http://www.w3.org/2000/svg",w):document.createElement(w,b.is&&b),a=null,u=!1}if(w===null)y===b||u&&n.data===b||(n.data=b);else{if(a=a&&Ba.call(n.childNodes),p=(y=t.props||ya).dangerouslySetInnerHTML,m=b.dangerouslySetInnerHTML,!u){if(a!=null)for(y={},E=0;E<n.attributes.length;E++)y[n.attributes[E].name]=n.attributes[E].value;(m||p)&&(m&&(p&&m.__html==p.__html||m.__html===n.innerHTML)||(n.innerHTML=m&&m.__html||""))}if(d_(n,b,y,o,u),m)e.__k=[];else if(E=e.props.children,ov(n,Array.isArray(E)?E:[E],e,t,r,o&&w!=="foreignObject",a,l,a?a[0]:t.__k&&Di(t,0),u),a!=null)for(E=a.length;E--;)a[E]!=null&&sv(a[E]);u||("value"in b&&(E=b.value)!==void 0&&(E!==n.value||w==="progress"&&!E||w==="option"&&E!==y.value)&&wa(n,"value",E,y.value,!1),"checked"in b&&(E=b.checked)!==void 0&&E!==n.checked&&wa(n,"checked",E,y.checked,!1))}return n}function dv(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(r){de.__e(r,t)}}function hv(n,e,t){var r,o;if(de.unmount&&de.unmount(n),(r=n.ref)&&(r.current&&r.current!==n.__e||dv(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){de.__e(a,e)}r.base=r.__P=null,n.__c=void 0}if(r=n.__k)for(o=0;o<r.length;o++)r[o]&&hv(r[o],e,t||typeof n.type!="function");t||n.__e==null||sv(n.__e),n.__=n.__e=n.__d=void 0}function p_(n,e,t){return this.constructor(n,t)}function Ri(n,e,t){var r,o,a;de.__&&de.__(n,e),o=(r=!1)?null:e.__k,a=[],rd(e,n=e.__k=C(Re,null,[n]),o||ya,ya,e.ownerSVGElement!==void 0,o?null:e.firstChild?Ba.call(e.childNodes):null,a,o?o.__e:e.firstChild,r),uv(a,n)}function m_(n,e){var t={__c:e="__cC"+nv++,__:n,Consumer:function(r,o){return r.children(o)},Provider:function(r){var o,a;return this.getChildContext||(o=[],(a={})[e]=this,this.getChildContext=function(){return a},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&o.some(function(u){u.__e=!0,Iu(u)})},this.sub=function(l){o.push(l);var u=l.componentWillUnmount;l.componentWillUnmount=function(){o.splice(o.indexOf(l),1),u&&u.call(l)}}),r.children}};return t.Provider.__=t.Consumer.contextType=t}Ba=rv.slice,de={__e:function(n,e,t,r){for(var o,a,l;e=e.__;)if((o=e.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(n)),l=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(n,r||{}),l=o.__d),l)return o.__E=o}catch(u){n=u}throw n}},Xg=0,ev=function(n){return n!=null&&n.constructor===void 0},bs=!1,jt.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=qn({},this.state),typeof n=="function"&&(n=n(qn({},t),this.props)),n&&qn(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Iu(this))},jt.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Iu(this))},jt.prototype.render=Re,_r=[],tv=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ba.__r=0,nv=0;var on,ru,vm,fv=[],su=[],ym=de.__b,wm=de.__r,bm=de.diffed,xm=de.__c,Sm=de.unmount;function g_(){for(var n;n=fv.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(la),n.__H.__h.forEach(Ou),n.__H.__h=[]}catch(e){n.__H.__h=[],de.__e(e,n.__v)}}de.__b=function(n){on=null,ym&&ym(n)},de.__r=function(n){wm&&wm(n);var e=(on=n.__c).__H;e&&(ru===on?(e.__h=[],on.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=su,t.__N=t.i=void 0})):(e.__h.forEach(la),e.__h.forEach(Ou),e.__h=[])),ru=on},de.diffed=function(n){bm&&bm(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(fv.push(e)!==1&&vm===de.requestAnimationFrame||((vm=de.requestAnimationFrame)||v_)(g_)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==su&&(t.__=t.__V),t.i=void 0,t.__V=su})),ru=on=null},de.__c=function(n,e){e.some(function(t){try{t.__h.forEach(la),t.__h=t.__h.filter(function(r){return!r.__||Ou(r)})}catch(r){e.some(function(o){o.__h&&(o.__h=[])}),e=[],de.__e(r,t.__v)}}),xm&&xm(n,e)},de.unmount=function(n){Sm&&Sm(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{la(r)}catch(o){e=o}}),t.__H=void 0,e&&de.__e(e,t.__v))};var _m=typeof requestAnimationFrame=="function";function v_(n){var e,t=function(){clearTimeout(r),_m&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);_m&&(e=requestAnimationFrame(t))}function la(n){var e=on,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),on=e}function Ou(n){var e=on;n.__c=n.__(),on=e}function y_(n,e){for(var t in e)n[t]=e[t];return n}function Em(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&n[r]!==e[r])return!0;return!1}function km(n){this.props=n}(km.prototype=new jt).isPureReactComponent=!0,km.prototype.shouldComponentUpdate=function(n,e){return Em(this.props,n)||Em(this.state,e)};var Cm=de.__b;de.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),Cm&&Cm(n)};var w_=de.__e;de.__e=function(n,e,t,r){if(n.then){for(var o,a=e;a=a.__;)if((o=a.__c)&&o.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),o.__c(n,e)}w_(n,e,t,r)};var Am=de.unmount;function pv(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),n.__c.__H=null),(n=y_({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return pv(r,e,t)})),n}function mv(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return mv(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function iu(){this.__u=0,this.t=null,this.__b=null}function gv(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function ea(){this.u=null,this.o=null}de.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&n.__h===!0&&(n.type=null),Am&&Am(n)},(iu.prototype=new jt).__c=function(n,e){var t=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(t);var o=gv(r.__v),a=!1,l=function(){a||(a=!0,t.__R=null,o?o(u):u())};t.__R=l;var u=function(){if(!--r.__u){if(r.state.__a){var p=r.state.__a;r.__v.__k[0]=mv(p,p.__c.__P,p.__c.__O)}var m;for(r.setState({__a:r.__b=null});m=r.t.pop();)m.forceUpdate()}},h=e.__h===!0;r.__u++||h||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(l,l)},iu.prototype.componentWillUnmount=function(){this.t=[]},iu.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=pv(this.__b,t,r.__O=r.__P)}this.__b=null}var o=e.__a&&C(Re,null,n.fallback);return o&&(o.__h=null),[C(Re,null,e.__a?null:n.children),o]};var Tm=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function b_(n){return this.getChildContext=function(){return n.context},n.children}function x_(n){var e=this,t=n.i;e.componentWillUnmount=function(){Ri(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,o){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),Ri(C(b_,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}function S_(n,e){var t=C(x_,{__v:n,i:e});return t.containerInfo=e,t}(ea.prototype=new jt).__a=function(n){var e=this,t=gv(e.__v),r=e.o.get(n);return r[0]++,function(o){var a=function(){e.props.revealOrder?(r.push(o),Tm(e,n,r)):o()};t?t(a):a()}},ea.prototype.render=function(n){this.u=null,this.o=new Map;var e=xa(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},ea.prototype.componentDidUpdate=ea.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){Tm(n,t,e)})};var __=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,E_=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,k_=typeof document<"u",C_=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};jt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(jt.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var Dm=de.event;function A_(){}function T_(){return this.cancelBubble}function D_(){return this.defaultPrevented}de.event=function(n){return Dm&&(n=Dm(n)),n.persist=A_,n.isPropagationStopped=T_,n.isDefaultPrevented=D_,n.nativeEvent=n};var Rm={configurable:!0,get:function(){return this.class}},Nm=de.vnode;de.vnode=function(n){var e=n.type,t=n.props,r=t;if(typeof e=="string"){var o=e.indexOf("-")===-1;for(var a in r={},t){var l=t[a];k_&&a==="children"&&e==="noscript"||a==="value"&&"defaultValue"in t&&l==null||(a==="defaultValue"&&"value"in t&&t.value==null?a="value":a==="download"&&l===!0?l="":/ondoubleclick/i.test(a)?a="ondblclick":/^onchange(textarea|input)/i.test(a+e)&&!C_(t.type)?a="oninput":/^onfocus$/i.test(a)?a="onfocusin":/^onblur$/i.test(a)?a="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(a)?a=a.toLowerCase():o&&E_.test(a)?a=a.replace(/[A-Z0-9]/g,"-$&").toLowerCase():l===null&&(l=void 0),/^oninput$/i.test(a)&&(a=a.toLowerCase(),r[a]&&(a="oninputCapture")),r[a]=l)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=xa(t.children).forEach(function(u){u.props.selected=r.value.indexOf(u.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=xa(t.children).forEach(function(u){u.props.selected=r.multiple?r.defaultValue.indexOf(u.props.value)!=-1:r.defaultValue==u.props.value})),n.props=r,t.class!=t.className&&(Rm.enumerable="className"in t,t.className!=null&&(r.class=t.className),Object.defineProperty(r,"className",Rm))}n.$$typeof=__,Nm&&Nm(n)};var jm=de.__r;de.__r=function(n){jm&&jm(n),n.__c};const vv=[],Mu=new Map;function Ha(n){vv.push(n),Mu.forEach(e=>{wv(e,n)})}function R_(n){n.isConnected&&n.getRootNode&&yv(n.getRootNode())}function yv(n){let e=Mu.get(n);if(!e||!e.isConnected){if(e=n.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const t=j_();t&&(e.nonce=t);const r=n===document?document.head:n,o=n===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(e,o)}Mu.set(n,e),N_(e)}}function N_(n){for(const e of vv)wv(n,e)}function wv(n,e){const{sheet:t}=n,r=t.cssRules.length;e.split("}").forEach((o,a)=>{o=o.trim(),o&&t.insertRule(o+"}",r+a)})}let ou;function j_(){return ou===void 0&&(ou=I_()),ou}function I_(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&yv(document);var O_=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';Ha(O_);class sd{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:r}=this;e in r&&(t?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function id(n){n.parentNode&&n.parentNode.removeChild(n)}function ft(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(M_(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}function M_(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}function P_(n,e){let t=n instanceof HTMLElement?[n]:n,r=[];for(let o=0;o<t.length;o+=1){let a=t[o].querySelectorAll(e);for(let l=0;l<a.length;l+=1)r.push(a[l])}return r}const L_=/(top|left|right|bottom|width|height)$/i;function wi(n,e){for(let t in e)bv(n,t,e[t])}function bv(n,e,t){t==null?n.style[e]="":typeof t=="number"&&L_.test(e)?n.style[e]=`${t}px`:n.style[e]=t}function xv(n){var e,t;return(t=(e=n.composedPath)===null||e===void 0?void 0:e.call(n)[0])!==null&&t!==void 0?t:n.target}let Im=0;function Yn(){return Im+=1,"fc-dom-"+Im}function $a(n){n.preventDefault()}function U_(n,e){return t=>{let r=ft(t.target,n);r&&e.call(r,t,r)}}function Sv(n,e,t,r){let o=U_(t,r);return n.addEventListener(e,o),()=>{n.removeEventListener(e,o)}}function B_(n,e,t,r){let o;return Sv(n,"mouseover",e,(a,l)=>{if(l!==o){o=l,t(a,l);let u=h=>{o=null,r(h,l),l.removeEventListener("mouseleave",u)};l.addEventListener("mouseleave",u)}})}const Om=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function H_(n,e){let t=r=>{e(r),Om.forEach(o=>{n.removeEventListener(o,t)})};Om.forEach(r=>{n.addEventListener(r,t)})}function _v(n){return Object.assign({onClick:n},Ev(n))}function Ev(n){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(n(e),e.preventDefault())}}}let Mm=0;function Dr(){return Mm+=1,String(Mm)}function od(){document.body.classList.add("fc-not-allowed")}function ad(){document.body.classList.remove("fc-not-allowed")}function $_(n){n.style.userSelect="none",n.style.webkitUserSelect="none",n.addEventListener("selectstart",$a)}function z_(n){n.style.userSelect="",n.style.webkitUserSelect="",n.removeEventListener("selectstart",$a)}function F_(n){n.addEventListener("contextmenu",$a)}function W_(n){n.removeEventListener("contextmenu",$a)}function V_(n){let e=[],t=[],r,o;for(typeof n=="string"?t=n.split(/\s*,\s*/):typeof n=="function"?t=[n]:Array.isArray(n)&&(t=n),r=0;r<t.length;r+=1)o=t[r],typeof o=="string"?e.push(o.charAt(0)==="-"?{field:o.substring(1),order:-1}:{field:o,order:1}):typeof o=="function"&&e.push({func:o});return e}function q_(n,e,t){let r,o;for(r=0;r<t.length;r+=1)if(o=G_(n,e,t[r]),o)return o;return 0}function G_(n,e,t){return t.func?t.func(n,e):Q_(n[t.field],e[t.field])*(t.order||1)}function Q_(n,e){return!n&&!e?0:e==null?-1:n==null?1:typeof n=="string"||typeof e=="string"?String(n).localeCompare(String(e)):n-e}function vs(n,e){let t=String(n);return"000".substr(0,e-t.length)+t}function bi(n,e,t){return typeof n=="function"?n(...e):typeof n=="string"?e.reduce((r,o,a)=>r.replace("$"+a,o||""),n):t}function Y_(n,e){return n-e}function ca(n){return n%1===0}function K_(n){let e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}const Pm=["years","months","days","milliseconds"],J_=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function _e(n,e){return typeof n=="string"?Z_(n):typeof n=="object"&&n?Lm(n):typeof n=="number"?Lm({[e||"milliseconds"]:n}):null}function Z_(n){let e=J_.exec(n);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function Lm(n){let e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:(n.hours||n.hour||0)*60*60*1e3+(n.minutes||n.minute||0)*60*1e3+(n.seconds||n.second||0)*1e3+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=t*7,e.specifiedWeeks=!0),e}function X_(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}function Pu(n,e){return{years:n.years+e.years,months:n.months+e.months,days:n.days+e.days,milliseconds:n.milliseconds+e.milliseconds}}function eE(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}function tE(n,e){return{years:n.years*e,months:n.months*e,days:n.days*e,milliseconds:n.milliseconds*e}}function nE(n){return ys(n)/365}function rE(n){return ys(n)/30}function ys(n){return Jt(n)/864e5}function Jt(n){return n.years*(365*864e5)+n.months*(30*864e5)+n.days*864e5+n.milliseconds}function ld(n,e){let t=null;for(let r=0;r<Pm.length;r+=1){let o=Pm[r];if(e[o]){let a=n[o]/e[o];if(!ca(a)||t!==null&&t!==a)return null;t=a}else if(n[o])return null}return t}function Lu(n){let e=n.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return n.days?n.specifiedWeeks&&n.days%7===0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function Kn(n,e,t){if(n===e)return!0;let r=n.length,o;if(r!==e.length)return!1;for(o=0;o<r;o+=1)if(!(t?t(n[o],e[o]):n[o]===e[o]))return!1;return!0}const sE=["sun","mon","tue","wed","thu","fri","sat"];function Um(n,e){let t=Gn(n);return t[2]+=e*7,Et(t)}function Je(n,e){let t=Gn(n);return t[2]+=e,Et(t)}function Jn(n,e){let t=Gn(n);return t[6]+=e,Et(t)}function iE(n,e){return Xn(n,e)/7}function Xn(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60*24)}function oE(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60)}function aE(n,e){return(e.valueOf()-n.valueOf())/(1e3*60)}function lE(n,e){return(e.valueOf()-n.valueOf())/1e3}function cE(n,e){let t=Ie(n),r=Ie(e);return{years:0,months:0,days:Math.round(Xn(t,r)),milliseconds:e.valueOf()-r.valueOf()-(n.valueOf()-t.valueOf())}}function uE(n,e){let t=Sa(n,e);return t!==null&&t%7===0?t/7:null}function Sa(n,e){return Qn(n)===Qn(e)?Math.round(Xn(n,e)):null}function Ie(n){return Et([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function dE(n){return Et([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}function hE(n){return Et([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}function fE(n){return Et([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}function pE(n,e,t){let r=n.getUTCFullYear(),o=au(n,r,e,t);if(o<1)return au(n,r-1,e,t);let a=au(n,r+1,e,t);return a>=1?Math.min(o,a):o}function au(n,e,t,r){let o=Et([e,0,1+mE(e,t,r)]),a=Ie(n),l=Math.round(Xn(o,a));return Math.floor(l/7)+1}function mE(n,e,t){let r=7+e-t;return-((7+Et([n,0,r]).getUTCDay()-e)%7)+r-1}function Bm(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function Hm(n){return new Date(n[0],n[1]||0,n[2]==null?1:n[2],n[3]||0,n[4]||0,n[5]||0)}function Gn(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function Et(n){return n.length===1&&(n=n.concat([0])),new Date(Date.UTC(...n))}function kv(n){return!isNaN(n.valueOf())}function Qn(n){return n.getUTCHours()*1e3*60*60+n.getUTCMinutes()*1e3*60+n.getUTCSeconds()*1e3+n.getUTCMilliseconds()}function Cv(n,e,t=!1){let r=n.toISOString();return r=r.replace(".000",""),t&&(r=r.replace("T00:00:00Z","")),r.length>10&&(e==null?r=r.replace("Z",""):e!==0&&(r=r.replace("Z",cd(e,!0)))),r}function Oi(n){return n.toISOString().replace(/T.*$/,"")}function gE(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}function vE(n){return vs(n.getUTCHours(),2)+":"+vs(n.getUTCMinutes(),2)+":"+vs(n.getUTCSeconds(),2)}function cd(n,e=!1){let t=n<0?"-":"+",r=Math.abs(n),o=Math.floor(r/60),a=Math.round(r%60);return e?`${t+vs(o,2)}:${vs(a,2)}`:`GMT${t}${o}${a?`:${vs(a,2)}`:""}`}function le(n,e,t){let r,o;return function(...a){if(!r)o=n.apply(this,a);else if(!Kn(r,a)){let l=n.apply(this,a);(!e||!e(l,o))&&(o=l)}return r=a,o}}function ua(n,e,t){let r,o;return a=>(r?Zt(r,a)||(o=n.call(this,a)):o=n.call(this,a),r=a,o)}const lu={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},_a={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},ta=/\s*([ap])\.?m\.?/i,yE=/,/g,wE=/\s+/g,bE=/\u200e/g,xE=/UTC|GMT/;class SE{constructor(e){let t={},r={},o=9;for(let a in e)a in lu?(r[a]=e[a],lu[a]<9&&(o=Math.min(lu[a],o))):(t[a]=e[a],a in _a&&(o=Math.min(_a[a],o)));this.standardDateProps=t,this.extendedSettings=r,this.smallestUnitNum=o,this.buildFormattingFunc=le($m)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,r,o){let{standardDateProps:a,extendedSettings:l}=this,u=TE(e.marker,t.marker,r.calendarSystem);if(!u)return this.format(e,r);let h=u;h>1&&(a.year==="numeric"||a.year==="2-digit")&&(a.month==="numeric"||a.month==="2-digit")&&(a.day==="numeric"||a.day==="2-digit")&&(h=1);let p=this.format(e,r),m=this.format(t,r);if(p===m)return p;let y=DE(a,h),b=$m(y,l,r),w=b(e),E=b(t),_=RE(p,w,m,E),S=l.separator||o||r.defaultSeparator||"";return _?_.before+w+S+E+_.after:p+S+m}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function $m(n,e,t){let r=Object.keys(n).length;return r===1&&n.timeZoneName==="short"?o=>cd(o.timeZoneOffset):r===0&&e.week?o=>AE(t.computeWeekNumber(o.marker),t.weekText,t.weekTextLong,t.locale,e.week):_E(n,e,t)}function _E(n,e,t){n=Object.assign({},n),e=Object.assign({},e),EE(n,e),n.timeZone="UTC";let r=new Intl.DateTimeFormat(t.locale.codes,n),o;if(e.omitZeroMinute){let a=Object.assign({},n);delete a.minute,o=new Intl.DateTimeFormat(t.locale.codes,a)}return a=>{let{marker:l}=a,u;o&&!l.getUTCMinutes()?u=o:u=r;let h=u.format(l);return kE(h,a,n,e,t)}}function EE(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),n.timeZoneName==="long"&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}function kE(n,e,t,r,o){return n=n.replace(bE,""),t.timeZoneName==="short"&&(n=CE(n,o.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":cd(e.timeZoneOffset))),r.omitCommas&&(n=n.replace(yE,"").trim()),r.omitZeroMinute&&(n=n.replace(":00","")),r.meridiem===!1?n=n.replace(ta,"").trim():r.meridiem==="narrow"?n=n.replace(ta,(a,l)=>l.toLocaleLowerCase()):r.meridiem==="short"?n=n.replace(ta,(a,l)=>`${l.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(n=n.replace(ta,a=>a.toLocaleLowerCase())),n=n.replace(wE," "),n=n.trim(),n}function CE(n,e){let t=!1;return n=n.replace(xE,()=>(t=!0,e)),t||(n+=` ${e}`),n}function AE(n,e,t,r,o){let a=[];return o==="long"?a.push(t):(o==="short"||o==="narrow")&&a.push(e),(o==="long"||o==="short")&&a.push(" "),a.push(r.simpleNumberFormat.format(n)),r.options.direction==="rtl"&&a.reverse(),a.join("")}function TE(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:Qn(n)!==Qn(e)?1:0}function DE(n,e){let t={};for(let r in n)(!(r in _a)||_a[r]<=e)&&(t[r]=n[r]);return t}function RE(n,e,t,r){let o=0;for(;o<n.length;){let a=n.indexOf(e,o);if(a===-1)break;let l=n.substr(0,a);o=a+e.length;let u=n.substr(o),h=0;for(;h<t.length;){let p=t.indexOf(r,h);if(p===-1)break;let m=t.substr(0,p);h=p+r.length;let y=t.substr(h);if(l===m&&u===y)return{before:l,after:u}}}return null}function zm(n,e){let t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function Ea(n,e,t,r){let o=zm(n,t.calendarSystem),a=e?zm(e,t.calendarSystem):null;return{date:o,start:o,end:a,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:r||t.defaultSeparator}}class NE{constructor(e){this.cmdStr=e}format(e,t,r){return t.cmdFormatter(this.cmdStr,Ea(e,null,t,r))}formatRange(e,t,r,o){return r.cmdFormatter(this.cmdStr,Ea(e,t,r,o))}}class jE{constructor(e){this.func=e}format(e,t,r){return this.func(Ea(e,null,t,r))}formatRange(e,t,r,o){return this.func(Ea(e,t,r,o))}}function Be(n){return typeof n=="object"&&n?new SE(n):typeof n=="string"?new NE(n):typeof n=="function"?new jE(n):null}const Fm={navLinkDayClick:U,navLinkWeekClick:U,duration:_e,bootstrapFontAwesome:U,buttonIcons:U,customButtons:U,defaultAllDayEventDuration:_e,defaultTimedEventDuration:_e,nextDayThreshold:_e,scrollTime:_e,scrollTimeReset:Boolean,slotMinTime:_e,slotMaxTime:_e,dayPopoverFormat:Be,slotDuration:_e,snapDuration:_e,headerToolbar:U,footerToolbar:U,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Be,dayHeaderClassNames:U,dayHeaderContent:U,dayHeaderDidMount:U,dayHeaderWillUnmount:U,dayCellClassNames:U,dayCellContent:U,dayCellDidMount:U,dayCellWillUnmount:U,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:U,weekNumbers:Boolean,weekNumberClassNames:U,weekNumberContent:U,weekNumberDidMount:U,weekNumberWillUnmount:U,editable:Boolean,viewClassNames:U,viewDidMount:U,viewWillUnmount:U,nowIndicator:Boolean,nowIndicatorSnap:U,nowIndicatorClassNames:U,nowIndicatorContent:U,nowIndicatorDidMount:U,nowIndicatorWillUnmount:U,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:U,locale:U,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:U,eventOrder:V_,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:U,contentHeight:U,direction:String,weekNumberFormat:Be,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:U,initialDate:U,now:U,eventDataTransform:U,stickyHeaderDates:U,stickyFooterScrollbar:U,viewHeight:U,defaultAllDay:Boolean,eventSourceFailure:U,eventSourceSuccess:U,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:U,eventConstraint:U,eventAllow:U,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:U,eventContent:U,eventDidMount:U,eventWillUnmount:U,selectConstraint:U,selectOverlap:U,selectAllow:U,droppable:Boolean,unselectCancel:String,slotLabelFormat:U,slotLaneClassNames:U,slotLaneContent:U,slotLaneDidMount:U,slotLaneWillUnmount:U,slotLabelClassNames:U,slotLabelContent:U,slotLabelDidMount:U,slotLabelWillUnmount:U,dayMaxEvents:U,dayMaxEventRows:U,dayMinWidth:Number,slotLabelInterval:_e,allDayText:String,allDayClassNames:U,allDayContent:U,allDayDidMount:U,allDayWillUnmount:U,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Be,rerenderDelay:Number,moreLinkText:U,moreLinkHint:U,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:U,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:_e,hiddenDays:U,fixedWeekCount:Boolean,validRange:U,visibleRange:U,titleFormat:U,eventInteractive:Boolean,noEventsText:String,viewHint:U,navLinkHint:U,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:U,moreLinkClassNames:U,moreLinkContent:U,moreLinkDidMount:U,moreLinkWillUnmount:U,monthStartFormat:Be,handleCustomRendering:U,customRenderingMetaMap:U,customRenderingReplaces:Boolean},xi={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},Wm={datesSet:U,eventsSet:U,eventAdd:U,eventChange:U,eventRemove:U,windowResize:U,eventClick:U,eventMouseEnter:U,eventMouseLeave:U,select:U,unselect:U,loading:U,_unmount:U,_beforeprint:U,_afterprint:U,_noEventDrop:U,_noEventResize:U,_resize:U,_scrollRequest:U},Vm={buttonText:U,buttonHints:U,views:U,plugins:U,initialEvents:U,events:U,eventSources:U},wr={headerToolbar:br,footerToolbar:br,buttonText:br,buttonHints:br,buttonIcons:br,dateIncrement:br,plugins:na,events:na,eventSources:na,resources:na};function br(n,e){return typeof n=="object"&&typeof e=="object"&&n&&e?Zt(n,e):n===e}function na(n,e){return Array.isArray(n)&&Array.isArray(e)?Kn(n,e):n===e}const IE={type:String,component:U,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:U,usesMinMaxTime:Boolean,classNames:U,content:U,didMount:U,willUnmount:U};function cu(n){return dd(n,wr)}function ud(n,e){let t={},r={};for(let o in e)o in n&&(t[o]=e[o](n[o]));for(let o in n)o in e||(r[o]=n[o]);return{refined:t,extra:r}}function U(n){return n}const{hasOwnProperty:ka}=Object.prototype;function dd(n,e){let t={};if(e){for(let r in e)if(e[r]===br){let o=[];for(let a=n.length-1;a>=0;a-=1){let l=n[a][r];if(typeof l=="object"&&l)o.unshift(l);else if(l!==void 0){t[r]=l;break}}o.length&&(t[r]=dd(o))}}for(let r=n.length-1;r>=0;r-=1){let o=n[r];for(let a in o)a in t||(t[a]=o[a])}return t}function Ar(n,e){let t={};for(let r in n)e(n[r],r)&&(t[r]=n[r]);return t}function Sn(n,e){let t={};for(let r in n)t[r]=e(n[r],r);return t}function Av(n){let e={};for(let t of n)e[t]=!0;return e}function hd(n){let e=[];for(let t in n)e.push(n[t]);return e}function Zt(n,e){if(n===e)return!0;for(let t in n)if(ka.call(n,t)&&!(t in e))return!1;for(let t in e)if(ka.call(e,t)&&n[t]!==e[t])return!1;return!0}const OE=/^on[A-Z]/;function ME(n,e){const t=PE(n,e);for(let r of t)if(!OE.test(r))return!1;return!0}function PE(n,e){let t=[];for(let r in n)ka.call(n,r)&&(r in e||t.push(r));for(let r in e)ka.call(e,r)&&n[r]!==e[r]&&t.push(r);return t}function uu(n,e,t={}){if(n===e)return!0;for(let r in e)if(!(r in n&&LE(n[r],e[r],t[r])))return!1;for(let r in n)if(!(r in e))return!1;return!0}function LE(n,e,t){return n===e||t===!0?!0:t?t(n,e):!1}function UE(n,e=0,t,r=1){let o=[];t==null&&(t=Object.keys(n).length);for(let a=e;a<t;a+=r){let l=n[a];l!==void 0&&o.push(l)}return o}let Tv={};function BE(n,e){Tv[n]=e}function HE(n){return new Tv[n]}class $E{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Et(e)}markerToArray(e){return Gn(e)}}BE("gregory",$E);const zE=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function FE(n){let e=zE.exec(n);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(kv(t)){let r=null;return e[13]&&(r=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}class WE{constructor(e){let t=this.timeZone=e.timeZone,r=t!=="local"&&t!=="UTC";e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=HE(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return t===null?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Et(Bm(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let t=null;return typeof e=="number"?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=Et(e)),t===null||!kv(t)?null:{marker:t,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let t=FE(e);if(t===null)return null;let{marker:r}=t,o=null;return t.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-t.timeZoneOffset*60*1e3):o=t.timeZoneOffset),{marker:r,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:o}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]+=t.years,r[1]+=t.months,r[2]+=t.days,r[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]-=t.years,r[1]-=t.months,r[2]-=t.days,r[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,t){let r=this.calendarSystem.markerToArray(e);return r[0]+=t,this.calendarSystem.arrayToMarker(r)}addMonths(e,t){let r=this.calendarSystem.markerToArray(e);return r[1]+=t,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,t){let{calendarSystem:r}=this;return Qn(e)===Qn(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)&&r.getMarkerMonth(e)===r.getMarkerMonth(t)?r.getMarkerYear(t)-r.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:r}=this;return Qn(e)===Qn(t)&&r.getMarkerDay(e)===r.getMarkerDay(t)?r.getMarkerMonth(t)-r.getMarkerMonth(e)+(r.getMarkerYear(t)-r.getMarkerYear(e))*12:null}greatestWholeUnit(e,t){let r=this.diffWholeYears(e,t);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(e,t),r!==null?{unit:"month",value:r}:(r=uE(e,t),r!==null?{unit:"week",value:r}:(r=Sa(e,t),r!==null?{unit:"day",value:r}:(r=oE(e,t),ca(r)?{unit:"hour",value:r}:(r=aE(e,t),ca(r)?{unit:"minute",value:r}:(r=lE(e,t),ca(r)?{unit:"second",value:r}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,r){let o;return r.years&&(o=this.diffWholeYears(e,t),o!==null)?o/nE(r):r.months&&(o=this.diffWholeMonths(e,t),o!==null)?o/rE(r):r.days&&(o=Sa(e,t),o!==null)?o/ys(r):(t.valueOf()-e.valueOf())/Jt(r)}startOf(e,t){return t==="year"?this.startOfYear(e):t==="month"?this.startOfMonth(e):t==="week"?this.startOfWeek(e):t==="day"?Ie(e):t==="hour"?dE(e):t==="minute"?hE(e):t==="second"?fE(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):pE(e,this.weekDow,this.weekDoy)}format(e,t,r={}){return t.format({marker:e,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,r,o={}){return o.isEndExclusive&&(t=Jn(t,-1)),r.formatRange({marker:e,timeZoneOffset:o.forcedStartTzo!=null?o.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:o.forcedEndTzo!=null?o.forcedEndTzo:this.offsetForMarker(t)},this,o.defaultSeparator)}formatIso(e,t={}){let r=null;return t.omitTimeZoneOffset||(t.forcedTzo!=null?r=t.forcedTzo:r=this.offsetForMarker(e)),Cv(e,r,t.omitTime)}timestampToMarker(e){return this.timeZone==="local"?Et(Bm(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):Et(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-Hm(Gn(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Gn(e)):null}toDate(e,t){return this.timeZone==="local"?Hm(Gn(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Gn(e))*1e3*60):new Date(e.valueOf()-(t||0))}}class Mi{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,r;if(typeof e=="object"&&e){t=Object.assign({},this.iconClasses);for(r in e)t[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=t}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&e.indexOf(t)!==0&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let r;return t&&this.rtlIconClasses?r=this.rtlIconClasses[e]||this.iconClasses[e]:r=this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}}Mi.prototype.classes={};Mi.prototype.iconClasses={};Mi.prototype.baseIconClass="";Mi.prototype.iconOverridePrefix="";function Ca(n){n();let e=de.debounceRendering,t=[];function r(o){t.push(o)}for(de.debounceRendering=r,Ri(C(VE,{}),document.createElement("div"));t.length;)t.shift()();de.debounceRendering=e}class VE extends jt{render(){return C("div",{})}componentDidMount(){this.setState({})}}function Dv(n){let e=m_(n),t=e.Provider;return e.Provider=function(){let r=!this.getChildContext,o=t.apply(this,arguments);if(r){let a=[];this.shouldComponentUpdate=l=>{this.props.value!==l.value&&a.forEach(u=>{u.context=l.value,u.forceUpdate()})},this.sub=l=>{a.push(l);let u=l.componentWillUnmount;l.componentWillUnmount=()=>{a.splice(a.indexOf(l),1),u&&u.call(l)}}}return o},e}class qE{constructor(e,t,r,o){this.execFunc=e,this.emitter=t,this.scrollTime=r,this.scrollTimeReset=o,this.handleScrollRequest=a=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},a),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const En=Dv({});function GE(n,e,t,r,o,a,l,u,h,p,m,y,b,w){return{dateEnv:o,nowManager:a,options:t,pluginHooks:u,emitter:m,dispatch:h,getCurrentData:p,calendarApi:y,viewSpec:n,viewApi:e,dateProfileGenerator:r,theme:l,isRtl:t.direction==="rtl",addResizeHandler(E){m.on("_resize",E)},removeResizeHandler(E){m.off("_resize",E)},createScrollResponder(E){return new qE(E,m,_e(t.scrollTime),t.scrollTimeReset)},registerInteractiveComponent:b,unregisterInteractiveComponent:w}}class Rr extends jt{shouldComponentUpdate(e,t){return!uu(this.props,e,this.propEquality)||!uu(this.state,t,this.stateEquality)}safeSetState(e){uu(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Rr.addPropsEquality=QE;Rr.addStateEquality=YE;Rr.contextType=En;Rr.prototype.propEquality={};Rr.prototype.stateEquality={};class Ce extends Rr{}Ce.contextType=En;function QE(n){let e=Object.create(this.prototype.propEquality);Object.assign(e,n),this.prototype.propEquality=e}function YE(n){let e=Object.create(this.prototype.stateEquality);Object.assign(e,n),this.prototype.stateEquality=e}function an(n,e){typeof n=="function"?n(e):n&&(n.current=e)}class fd extends Ce{constructor(){super(...arguments),this.id=Dr(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:t}=this.context,{generatorName:r}=this.props;(!t.customRenderingReplaces||!Uu(r,t))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&an(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:r}=t,{customGenerator:o,defaultGenerator:a,renderProps:l}=e,u=Rv(e,[],this.handleEl);let h=!1,p,m=[],y;if(o!=null){const b=typeof o=="function"?o(l,C):o;if(b===!0)h=!0;else{const w=b&&typeof b=="object";w&&"html"in b?u.dangerouslySetInnerHTML={__html:b.html}:w&&"domNodes"in b?m=Array.prototype.slice.call(b.domNodes):(w?ev(b):typeof b!="function")?p=b:y=b}}else h=!Uu(e.generatorName,r);return h&&a&&(p=a(l)),this.queuedDomNodes=m,this.currentGeneratorMeta=y,C(e.elTag,u,p)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:r,context:o}=this,{handleCustomRendering:a,customRenderingMetaMap:l}=o.options;if(a){const u=(t=this.currentGeneratorMeta)!==null&&t!==void 0?t:l==null?void 0:l[r.generatorName];u&&a(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:u},r),{elClasses:(r.elClasses||[]).filter(KE)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,r=this.base;if(!Kn(e,t)){t.forEach(id);for(let o of e)r.appendChild(o);this.currentDomNodes=e}}}fd.addPropsEquality({elClasses:Kn,elStyle:Zt,elAttrs:ME,renderProps:Zt});function Uu(n,e){var t;return!!(e.handleCustomRendering&&n&&(!((t=e.customRenderingMetaMap)===null||t===void 0)&&t[n]))}function Rv(n,e,t){const r=Object.assign(Object.assign({},n.elAttrs),{ref:t});return(n.elClasses||e)&&(r.className=(n.elClasses||[]).concat(e||[]).concat(r.className||[]).filter(Boolean).join(" ")),n.elStyle&&(r.style=n.elStyle),r}function KE(n){return!!n}const Nv=Dv(0);class pt extends jt{constructor(){super(...arguments),this.InnerContent=JE.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(an(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,t=ZE(e.classNameGenerator,e.renderProps);if(e.children){const r=Rv(e,t,this.handleEl),o=e.children(this.InnerContent,e.renderProps,r);return e.elTag?C(e.elTag,r,o):o}else return C(fd,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(t),renderId:this.context}))}componentDidMount(){var e,t;this.el?(t=(e=this.props).didMount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,t;(t=(e=this.props).willUnmount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}pt.contextType=Nv;function JE(n,e){const t=n.props;return C(fd,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:n.context},e))}function ZE(n,e){const t=typeof n=="function"?n(e):n||[];return typeof t=="string"?[t]:t}class Ni extends Ce{render(){let{props:e,context:t}=this,{options:r}=t,o={view:t.viewApi};return C(pt,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...jv(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:o,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount},()=>e.children)}}function jv(n){return[`fc-${n.type}-view`,"fc-view"]}function XE(n,e){let t=null,r=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(r=e.createMarker(n.end)),!t&&!r||t&&r&&r<t?null:{start:t,end:r}}function qm(n,e){let t=[],{start:r}=e,o,a;for(n.sort(ek),o=0;o<n.length;o+=1)a=n[o],a.start>r&&t.push({start:r,end:a.start}),a.end>r&&(r=a.end);return r<e.end&&t.push({start:r,end:e.end}),t}function ek(n,e){return n.start.valueOf()-e.start.valueOf()}function Zn(n,e){let{start:t,end:r}=n,o=null;return e.start!==null&&(t===null?t=e.start:t=new Date(Math.max(t.valueOf(),e.start.valueOf()))),e.end!=null&&(r===null?r=e.end:r=new Date(Math.min(r.valueOf(),e.end.valueOf()))),(t===null||r===null||t<r)&&(o={start:t,end:r}),o}function tk(n,e){return(n.start===null?null:n.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(n.end===null?null:n.end.valueOf())===(e.end===null?null:e.end.valueOf())}function pd(n,e){return(n.end===null||e.start===null||n.end>e.start)&&(n.start===null||e.end===null||n.start<e.end)}function za(n,e){return(n.start===null||e.start!==null&&e.start>=n.start)&&(n.end===null||e.end!==null&&e.end<=n.end)}function bn(n,e){return(n.start===null||e>=n.start)&&(n.end===null||e<n.end)}function nk(n,e){return e.start!=null&&n<e.start?e.start:e.end!=null&&n>=e.end?new Date(e.end.valueOf()-1):n}function Iv(n){let e=Math.floor(Xn(n.start,n.end))||1,t=Ie(n.start),r=Je(t,e);return{start:t,end:r}}function md(n,e=_e(0)){let t=null,r=null;if(n.end){r=Ie(n.end);let o=n.end.valueOf()-r.valueOf();o&&o>=Jt(e)&&(r=Je(r,1))}return n.start&&(t=Ie(n.start),r&&r<=t&&(r=Je(t,1))),{start:t,end:r}}function rk(n){let e=md(n);return Xn(e.start,e.end)>1}function ms(n,e,t,r){return r==="year"?_e(t.diffWholeYears(n,e),"year"):r==="month"?_e(t.diffWholeMonths(n,e),"month"):cE(n,e)}class Ov{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,t,r){let{dateEnv:o}=this.props,a=o.subtract(o.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(a,-1,r)}buildNext(e,t,r){let{dateEnv:o}=this.props,a=o.add(o.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(a,1,r)}build(e,t,r=!0){let{props:o}=this,a,l,u,h,p,m;return a=this.buildValidRange(),a=this.trimHiddenDays(a),r&&(e=nk(e,a)),l=this.buildCurrentRangeInfo(e,t),u=/^(year|month|week|day)$/.test(l.unit),h=this.buildRenderRange(this.trimHiddenDays(l.range),l.unit,u),h=this.trimHiddenDays(h),p=h,o.showNonCurrentDates||(p=Zn(p,l.range)),p=this.adjustActiveRange(p),p=Zn(p,a),m=pd(l.range,a),bn(h,e)||(e=h.start),{currentDate:e,validRange:a,currentRange:l.range,currentRangeUnit:l.unit,isRangeAllDay:u,activeRange:p,renderRange:h,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,isValid:m,dateIncrement:this.buildDateIncrement(l.duration)}}buildValidRange(){let e=this.props.validRangeInput,t=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let{props:r}=this,o=null,a=null,l=null,u;return r.duration?(o=r.duration,a=r.durationUnit,l=this.buildRangeFromDuration(e,t,o,a)):(u=this.props.dayCount)?(a="day",l=this.buildRangeFromDayCount(e,t,u)):(l=this.buildCustomVisibleRange(e))?a=r.dateEnv.greatestWholeUnit(l.start,l.end).unit:(o=this.getFallbackDuration(),a=Lu(o).unit,l=this.buildRangeFromDuration(e,t,o,a)),{duration:o,unit:a,range:l}}getFallbackDuration(){return _e({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:r,slotMinTime:o,slotMaxTime:a}=this.props,{start:l,end:u}=e;return r&&(ys(o)<0&&(l=Ie(l),l=t.add(l,o)),ys(a)>1&&(u=Ie(u),u=Je(u,-1),u=t.add(u,a))),{start:l,end:u}}buildRangeFromDuration(e,t,r,o){let{dateEnv:a,dateAlignment:l}=this.props,u,h,p;if(!l){let{dateIncrement:y}=this.props;y&&Jt(y)<Jt(r)?l=Lu(y).unit:l=o}ys(r)<=1&&this.isHiddenDay(u)&&(u=this.skipHiddenDays(u,t),u=Ie(u));function m(){u=a.startOf(e,l),h=a.add(u,r),p={start:u,end:h}}return m(),this.trimHiddenDays(p)||(e=this.skipHiddenDays(e,t),m()),p}buildRangeFromDayCount(e,t,r){let{dateEnv:o,dateAlignment:a}=this.props,l=0,u=e,h;a&&(u=o.startOf(u,a)),u=Ie(u),u=this.skipHiddenDays(u,t),h=u;do h=Je(h,1),this.isHiddenDay(h)||(l+=1);while(l<r);return{start:u,end:h}}buildCustomVisibleRange(e){let{props:t}=this,r=t.visibleRangeInput,o=typeof r=="function"?r.call(t.calendarApi,t.dateEnv.toDate(e)):r,a=this.refineRange(o);return a&&(a.start==null||a.end==null)?null:a}buildRenderRange(e,t,r){return e}buildDateIncrement(e){let{dateIncrement:t}=this.props,r;return t||((r=this.props.dateAlignment)?_e(1,r):e||_e({days:1}))}refineRange(e){if(e){let t=XE(e,this.props.dateEnv);return t&&(t=md(t)),t}return null}initHiddenDays(){let e=this.props.hiddenDays||[],t=[],r=0,o;for(this.props.weekends===!1&&e.push(0,6),o=0;o<7;o+=1)(t[o]=e.indexOf(o)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:r}=e;return t&&(t=this.skipHiddenDays(t)),r&&(r=this.skipHiddenDays(r,-1,!0)),t==null||r==null||t<r?{start:t,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?t:0)+7)%7];)e=Je(e,t);return e}}function gd(n,e,t,r){return{instanceId:Dr(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:r??null}}function sk(n,e,t,r){for(let o=0;o<r.length;o+=1){let a=r[o].parse(n,t);if(a){let{allDay:l}=n;return l==null&&(l=e,l==null&&(l=a.allDayGuess,l==null&&(l=!1))),{allDay:l,duration:a.duration,typeData:a.typeData,typeId:o}}}return null}function Tr(n,e,t){let{dateEnv:r,pluginHooks:o,options:a}=t,{defs:l,instances:u}=n;u=Ar(u,h=>!l[h.defId].recurringDef);for(let h in l){let p=l[h];if(p.recurringDef){let{duration:m}=p.recurringDef;m||(m=p.allDay?a.defaultAllDayEventDuration:a.defaultTimedEventDuration);let y=ik(p,m,e,r,o.recurringTypes);for(let b of y){let w=gd(h,{start:b,end:r.add(b,m)});u[w.instanceId]=w}}}return{defs:l,instances:u}}function ik(n,e,t,r,o){let l=o[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:r.subtract(t.start,e),end:t.end},r);return n.allDay&&(l=l.map(Ie)),l}const da={id:String,groupId:String,title:String,url:String,interactive:Boolean},Mv={start:U,end:U,date:U,allDay:Boolean},ok=Object.assign(Object.assign(Object.assign({},da),Mv),{extendedProps:U});function Pv(n,e,t,r,o=vd(t),a,l){let{refined:u,extra:h}=Lv(n,t,o),p=lk(e,t),m=sk(u,p,t.dateEnv,t.pluginHooks.recurringTypes);if(m){let b=Bu(u,h,e?e.sourceId:"",m.allDay,!!m.duration,t,a);return b.recurringDef={typeId:m.typeId,typeData:m.typeData,duration:m.duration},{def:b,instance:null}}let y=ak(u,p,t,r);if(y){let b=Bu(u,h,e?e.sourceId:"",y.allDay,y.hasEnd,t,a),w=gd(b.defId,y.range,y.forcedStartTzo,y.forcedEndTzo);return l&&b.publicId&&l[b.publicId]&&(w.instanceId=l[b.publicId]),{def:b,instance:w}}return null}function Lv(n,e,t=vd(e)){return ud(n,t)}function vd(n){return Object.assign(Object.assign(Object.assign({},Aa),ok),n.pluginHooks.eventRefiners)}function Bu(n,e,t,r,o,a,l){let u={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(l&&n.id?l[n.id]:"")||Dr(),sourceId:t,allDay:r,hasEnd:o,interactive:n.interactive,ui:Ta(n,a),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),e)};for(let h of a.pluginHooks.eventDefMemberAdders)Object.assign(u,h(n));return Object.freeze(u.ui.classNames),Object.freeze(u.extendedProps),u}function ak(n,e,t,r){let{allDay:o}=n,a,l=null,u=!1,h,p=null,m=n.start!=null?n.start:n.date;if(a=t.dateEnv.createMarkerMeta(m),a)l=a.marker;else if(!r)return null;return n.end!=null&&(h=t.dateEnv.createMarkerMeta(n.end)),o==null&&(e!=null?o=e:o=(!a||a.isTimeUnspecified)&&(!h||h.isTimeUnspecified)),o&&l&&(l=Ie(l)),h&&(p=h.marker,o&&(p=Ie(p)),l&&p<=l&&(p=null)),p?u=!0:r||(u=t.options.forceEventDuration||!1,p=t.dateEnv.add(l,o?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:o,hasEnd:u,range:{start:l,end:p},forcedStartTzo:a?a.forcedTzo:null,forcedEndTzo:h?h.forcedTzo:null}}function lk(n,e){let t=null;return n&&(t=n.defaultAllDay),t==null&&(t=e.options.defaultAllDay),t}function ji(n,e,t,r,o,a){let l=It(),u=vd(t);for(let h of n){let p=Pv(h,e,t,r,u,o,a);p&&Hu(p,l)}return l}function Hu(n,e=It()){return e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function yd(n,e){let t=n.instances[e];if(t){let r=n.defs[t.defId],o=Fa(n,a=>ck(r,a));return o.defs[r.defId]=r,o.instances[t.instanceId]=t,o}return It()}function ck(n,e){return!!(n.groupId&&n.groupId===e.groupId)}function It(){return{defs:{},instances:{}}}function wd(n,e){return{defs:Object.assign(Object.assign({},n.defs),e.defs),instances:Object.assign(Object.assign({},n.instances),e.instances)}}function Fa(n,e){let t=Ar(n.defs,e),r=Ar(n.instances,o=>t[o.defId]);return{defs:t,instances:r}}function uk(n,e){let{defs:t,instances:r}=n,o={},a={};for(let l in t)e.defs[l]||(o[l]=t[l]);for(let l in r)!e.instances[l]&&o[r[l].defId]&&(a[l]=r[l]);return{defs:o,instances:a}}function dk(n,e){return Array.isArray(n)?ji(n,null,e,!0):typeof n=="object"&&n?ji([n],null,e,!0):n!=null?String(n):null}function Gm(n){return Array.isArray(n)?n:typeof n=="string"?n.split(/\s+/):[]}const Aa={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:U,overlap:U,allow:U,className:Gm,classNames:Gm,color:String,backgroundColor:String,borderColor:String,textColor:String},hk={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Ta(n,e){let t=dk(n.constraint,e);return{display:n.display||null,startEditable:n.startEditable!=null?n.startEditable:n.editable,durationEditable:n.durationEditable!=null?n.durationEditable:n.editable,constraints:t!=null?[t]:[],overlap:n.overlap!=null?n.overlap:null,allows:n.allow!=null?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function Uv(n){return n.reduce(fk,hk)}function fk(n,e){return{display:e.display!=null?e.display:n.display,startEditable:e.startEditable!=null?e.startEditable:n.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}const pk={id:String,defaultAllDay:Boolean,url:String,format:String,events:U,eventDataTransform:U,success:U,failure:U};function Bv(n,e,t=Hv(e)){let r;if(typeof n=="string"?r={url:n}:typeof n=="function"||Array.isArray(n)?r={events:n}:typeof n=="object"&&n&&(r=n),r){let{refined:o,extra:a}=ud(r,t),l=mk(o,e);if(l)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:o.defaultAllDay,eventDataTransform:o.eventDataTransform,success:o.success,failure:o.failure,publicId:o.id||"",sourceId:Dr(),sourceDefId:l.sourceDefId,meta:l.meta,ui:Ta(o,e),extendedProps:a}}return null}function Hv(n){return Object.assign(Object.assign(Object.assign({},Aa),pk),n.pluginHooks.eventSourceRefiners)}function mk(n,e){let t=e.pluginHooks.eventSourceDefs;for(let r=t.length-1;r>=0;r-=1){let a=t[r].parseMeta(n);if(a)return{sourceDefId:r,meta:a}}return null}function gk(n,e,t,r,o){switch(e.type){case"RECEIVE_EVENTS":return vk(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,o);case"RESET_RAW_EVENTS":return yk(n,t[e.sourceId],e.rawEvents,r.activeRange,o);case"ADD_EVENTS":return wk(n,e.eventStore,r?r.activeRange:null,o);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return wd(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?Tr(n,r.activeRange,o):n;case"REMOVE_EVENTS":return uk(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return zv(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Fa(n,a=>!a.sourceId);case"REMOVE_ALL_EVENTS":return It();default:return n}}function vk(n,e,t,r,o,a){if(e&&t===e.latestFetchId){let l=ji($v(o,e,a),e,a);return r&&(l=Tr(l,r,a)),wd(zv(n,e.sourceId),l)}return n}function yk(n,e,t,r,o){const{defIdMap:a,instanceIdMap:l}=xk(n);let u=ji($v(t,e,o),e,o,!1,a,l);return Tr(u,r,o)}function $v(n,e,t){let r=t.options.eventDataTransform,o=e?e.eventDataTransform:null;return o&&(n=Qm(n,o)),r&&(n=Qm(n,r)),n}function Qm(n,e){let t;if(!e)t=n;else{t=[];for(let r of n){let o=e(r);o?t.push(o):o==null&&t.push(r)}}return t}function wk(n,e,t,r){return t&&(e=Tr(e,t,r)),wd(n,e)}function Ym(n,e,t){let{defs:r}=n,o=Sn(n.instances,a=>r[a.defId].allDay?a:Object.assign(Object.assign({},a),{range:{start:t.createMarker(e.toDate(a.range.start,a.forcedStartTzo)),end:t.createMarker(e.toDate(a.range.end,a.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:a.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:a.forcedEndTzo}));return{defs:r,instances:o}}function zv(n,e){return Fa(n,t=>t.sourceId!==e)}function bk(n,e){return{defs:n.defs,instances:Ar(n.instances,t=>!e[t.instanceId])}}function xk(n){const{defs:e,instances:t}=n,r={},o={};for(let a in e){const l=e[a],{publicId:u}=l;u&&(r[u]=a)}for(let a in t){const l=t[a],u=e[l.defId],{publicId:h}=u;h&&(o[h]=a)}return{defIdMap:r,instanceIdMap:o}}class Wa{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){Sk(this.handlers,e,t)}off(e,t){_k(this.handlers,e,t)}trigger(e,...t){let r=this.handlers[e]||[],o=this.options&&this.options[e],a=[].concat(o||[],r);for(let l of a)l.apply(this.thisContext,t)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function Sk(n,e,t){(n[e]||(n[e]=[])).push(t)}function _k(n,e,t){t?n[e]&&(n[e]=n[e].filter(r=>r!==t)):delete n[e]}const Ek={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function kk(n,e){return ji(Ck(n),null,e)}function Ck(n){let e;return n===!0?e=[{}]:Array.isArray(n)?e=n.filter(t=>t.daysOfWeek):typeof n=="object"&&n?e=[n]:e=[],e=e.map(t=>Object.assign(Object.assign({},Ek),t)),e}function Fv(n,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},bd(n,t)),{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view}))}function Ak(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}function bd(n,e){let t={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(t,r(n,e));return Object.assign(t,$k(n,e.dateEnv)),t}function Km(n,e,t){let{dateEnv:r,options:o}=t,a=e;return n?(a=Ie(a),a=r.add(a,o.defaultAllDayEventDuration)):a=r.add(a,o.defaultTimedEventDuration),a}function xd(n,e,t,r){let o=Da(n.defs,e),a=It();for(let l in n.defs){let u=n.defs[l];a.defs[l]=Tk(u,o[l],t,r)}for(let l in n.instances){let u=n.instances[l],h=a.defs[u.defId];a.instances[l]=Dk(u,h,o[u.defId],t,r)}return a}function Tk(n,e,t,r){let o=t.standardProps||{};o.hasEnd==null&&e.durationEditable&&(t.startDelta||t.endDelta)&&(o.hasEnd=!0);let a=Object.assign(Object.assign(Object.assign({},n),o),{ui:Object.assign(Object.assign({},n.ui),o.ui)});t.extendedProps&&(a.extendedProps=Object.assign(Object.assign({},a.extendedProps),t.extendedProps));for(let l of r.pluginHooks.eventDefMutationAppliers)l(a,t,r);return!a.hasEnd&&r.options.forceEventDuration&&(a.hasEnd=!0),a}function Dk(n,e,t,r,o){let{dateEnv:a}=o,l=r.standardProps&&r.standardProps.allDay===!0,u=r.standardProps&&r.standardProps.hasEnd===!1,h=Object.assign({},n);return l&&(h.range=Iv(h.range)),r.datesDelta&&t.startEditable&&(h.range={start:a.add(h.range.start,r.datesDelta),end:a.add(h.range.end,r.datesDelta)}),r.startDelta&&t.durationEditable&&(h.range={start:a.add(h.range.start,r.startDelta),end:h.range.end}),r.endDelta&&t.durationEditable&&(h.range={start:h.range.start,end:a.add(h.range.end,r.endDelta)}),u&&(h.range={start:h.range.start,end:Km(e.allDay,h.range.start,o)}),e.allDay&&(h.range={start:Ie(h.range.start),end:Ie(h.range.end)}),h.range.end<h.range.start&&(h.range.end=Km(e.allDay,h.range.start,o)),h}class fs{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class $e{constructor(e,t,r){this._context=e,this._def=t,this._instance=r||null}setProp(e,t){if(e in Mv)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")t=da[e](t),this.mutate({standardProps:{publicId:t}});else if(e in da)t=da[e](t),this.mutate({standardProps:{[e]:t}});else if(e in Aa){let r=Aa[e](t);e==="color"?r={backgroundColor:t,borderColor:t}:e==="editable"?r={startEditable:t,durationEditable:t}:r={[e]:t},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:r}=this._context,o=r.createMarker(e);if(o&&this._instance){let a=this._instance.range,l=ms(a.start,o,r,t.granularity);t.maintainDuration?this.mutate({datesDelta:l}):this.mutate({startDelta:l})}}setEnd(e,t={}){let{dateEnv:r}=this._context,o;if(!(e!=null&&(o=r.createMarker(e),!o))&&this._instance)if(o){let a=ms(this._instance.range.end,o,r,t.granularity);this.mutate({endDelta:a})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,r={}){let{dateEnv:o}=this._context,a={allDay:r.allDay},l=o.createMarker(e),u;if(l&&!(t!=null&&(u=o.createMarker(t),!u))&&this._instance){let h=this._instance.range;r.allDay===!0&&(h=Iv(h));let p=ms(h.start,l,o,r.granularity);if(u){let m=ms(h.end,u,o,r.granularity);X_(p,m)?this.mutate({datesDelta:p,standardProps:a}):this.mutate({startDelta:p,endDelta:m,standardProps:a})}else a.hasEnd=!1,this.mutate({datesDelta:p,standardProps:a})}}moveStart(e){let t=_e(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=_e(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=_e(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let r={allDay:e},{maintainDuration:o}=t;o==null&&(o=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=o),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:t}=this._context,r=this._instance,o=Be(e);return this._def.hasEnd?t.formatRange(r.range.start,r.range.end,o,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):t.format(r.range.start,o,{forcedTzo:r.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let r=this._def,o=this._context,{eventStore:a}=o.getCurrentData(),l=yd(a,t.instanceId);l=xd(l,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,o);let h=new $e(o,r,t);this._def=l.defs[r.defId],this._instance=l.instances[t.instanceId],o.dispatch({type:"MERGE_EVENTS",eventStore:l}),o.emitter.trigger("eventChange",{oldEvent:h,event:this,relatedEvents:kr(l,o,t),revert(){o.dispatch({type:"RESET_EVENTS",eventStore:a})}})}}remove(){let e=this._context,t=Wv(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new fs(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:r}=t,{startStr:o,endStr:a}=this,l={allDay:t.allDay};return t.title&&(l.title=t.title),o&&(l.start=o),a&&(l.end=a),t.publicId&&(l.id=t.publicId),t.groupId&&(l.groupId=t.groupId),t.url&&(l.url=t.url),r.display&&r.display!=="auto"&&(l.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?l.color=r.backgroundColor:(r.backgroundColor&&(l.backgroundColor=r.backgroundColor),r.borderColor&&(l.borderColor=r.borderColor)),r.textColor&&(l.textColor=r.textColor),r.classNames.length&&(l.classNames=r.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(l,t.extendedProps):l.extendedProps=t.extendedProps),l}toJSON(){return this.toPlainObject()}}function Wv(n){let e=n._def,t=n._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function kr(n,e,t){let{defs:r,instances:o}=n,a=[],l=t?t.instanceId:"";for(let u in o){let h=o[u],p=r[h.defId];h.instanceId!==l&&a.push(new $e(e,p,h))}return a}function $u(n,e,t,r){let o={},a={},l={},u=[],h=[],p=Da(n.defs,e);for(let m in n.defs){let y=n.defs[m];p[y.defId].display==="inverse-background"&&(y.groupId?(o[y.groupId]=[],l[y.groupId]||(l[y.groupId]=y)):a[m]=[])}for(let m in n.instances){let y=n.instances[m],b=n.defs[y.defId],w=p[b.defId],E=y.range,_=!b.allDay&&r?md(E,r):E,S=Zn(_,t);S&&(w.display==="inverse-background"?b.groupId?o[b.groupId].push(S):a[y.defId].push(S):w.display!=="none"&&(w.display==="background"?u:h).push({def:b,ui:w,instance:y,range:S,isStart:_.start&&_.start.valueOf()===S.start.valueOf(),isEnd:_.end&&_.end.valueOf()===S.end.valueOf()}))}for(let m in o){let y=o[m],b=qm(y,t);for(let w of b){let E=l[m],_=p[E.defId];u.push({def:E,ui:_,instance:null,range:w,isStart:!1,isEnd:!1})}}for(let m in a){let y=a[m],b=qm(y,t);for(let w of b)u.push({def:n.defs[m],ui:p[m],instance:null,range:w,isStart:!1,isEnd:!1})}return{bg:u,fg:h}}function Rk(n){return n.ui.display==="background"||n.ui.display==="inverse-background"}function Jm(n,e){n.fcSeg=e}function xs(n){return n.fcSeg||n.parentNode.fcSeg||null}function Da(n,e){return Sn(n,t=>Vv(t,e))}function Vv(n,e){let t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),Uv(t)}function Sd(n,e){let t=n.map(Nk);return t.sort((r,o)=>q_(r,o,e)),t.map(r=>r._seg)}function Nk(n){let{eventRange:e}=n,t=e.def,r=e.instance?e.instance.range:e.range,o=r.start?r.start.valueOf():0,a=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:o,end:a,duration:a-o,allDay:Number(t.allDay),_seg:n})}function jk(n,e){let{pluginHooks:t}=e,r=t.isDraggableTransformers,{def:o,ui:a}=n.eventRange,l=a.startEditable;for(let u of r)l=u(l,o,a,e);return l}function Ik(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function Ok(n,e){return n.isEnd&&n.eventRange.ui.durationEditable}function Si(n,e,t,r,o,a,l){let{dateEnv:u,options:h}=t,{displayEventTime:p,displayEventEnd:m}=h,y=n.eventRange.def,b=n.eventRange.instance;p==null&&(p=r!==!1),m==null&&(m=o!==!1);let w=b.range.start,E=b.range.end,_=a||n.start||n.eventRange.range.start,S=l||n.end||n.eventRange.range.end,T=Ie(w).valueOf()===Ie(_).valueOf(),R=Ie(Jn(E,-1)).valueOf()===Ie(Jn(S,-1)).valueOf();return p&&!y.allDay&&(T||R)?(_=T?w:_,S=R?E:S,m&&y.hasEnd?u.formatRange(_,S,e,{forcedStartTzo:a?null:b.forcedStartTzo,forcedEndTzo:l?null:b.forcedEndTzo}):u.format(_,e,{forcedTzo:a?null:b.forcedStartTzo})):""}function xn(n,e,t){let r=n.eventRange.range;return{isPast:r.end<=(t||e.start),isFuture:r.start>=(t||e.end),isToday:e&&bn(e,r.start)}}function Mk(n){let e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}function qv(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function _d(n,e){let{def:t,instance:r}=n.eventRange,{url:o}=t;if(o)return{href:o};let{emitter:a,options:l}=e,{eventInteractive:u}=l;return u==null&&(u=t.interactive,u==null&&(u=!!a.hasHandlers("eventClick"))),u?Ev(h=>{a.trigger("eventClick",{el:h.target,event:new $e(e,t,r),jsEvent:h,view:e.viewApi})}):{}}const Pk={start:U,end:U,allDay:Boolean};function Lk(n,e,t){let r=Uk(n,e),{range:o}=r;if(!o.start)return null;if(!o.end){if(t==null)return null;o.end=e.add(o.start,t)}return r}function Uk(n,e){let{refined:t,extra:r}=ud(n,Pk),o=t.start?e.createMarkerMeta(t.start):null,a=t.end?e.createMarkerMeta(t.end):null,{allDay:l}=t;return l==null&&(l=o&&o.isTimeUnspecified&&(!a||a.isTimeUnspecified)),Object.assign({range:{start:o?o.marker:null,end:a?a.marker:null},allDay:l},r)}function Bk(n,e){return tk(n.range,e.range)&&n.allDay===e.allDay&&Hk(n,e)}function Hk(n,e){for(let t in e)if(t!=="range"&&t!=="allDay"&&n[t]!==e[t])return!1;for(let t in n)if(!(t in e))return!1;return!0}function $k(n,e){return Object.assign(Object.assign({},Qv(n.range,e,n.allDay)),{allDay:n.allDay})}function Gv(n,e,t){return Object.assign(Object.assign({},Qv(n,e,t)),{timeZone:e.timeZone})}function Qv(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}function zk(n,e,t){let r=Lv({editable:!1},t),o=Bu(r.refined,r.extra,"",n.allDay,!0,t);return{def:o,ui:Vv(o,e),instance:gd(o.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function Fk(n,e,t){let r=!1,o=function(u){r||(r=!0,e(u))},a=function(u){r||(r=!0,t(u))},l=n(o,a);l&&typeof l.then=="function"&&l.then(o,a)}class Zm extends Error{constructor(e,t){super(e),this.response=t}}function Wk(n,e,t){n=n.toUpperCase();const r={method:n};return n==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(t):(r.body=new URLSearchParams(t),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(o=>{if(o.ok)return o.json().then(a=>[a,o],()=>{throw new Zm("Failure parsing JSON",o)});throw new Zm("Request failed",o)})}let du;function Yv(){return du==null&&(du=Vk()),du}function Vk(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}class qk extends Ce{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Ca(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Ca(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:t}=e,{forPrint:r}=this.state,o=r||t.height==="auto"||t.contentHeight==="auto",a=!o&&t.height!=null?t.height:"",l=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return Yv()||l.push("fc-liquid-hack"),e.children(l,a,o,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class Es{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function Gk(n,e){return{component:n,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function Ed(n){return{[n.component.uid]:n}}const zu={};class Nr extends jt{constructor(e,t){super(e,t),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:t}=this;return e.children(t.nowDate,t.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:t}=this,r=t.nowManager.getDateMarker(),{nowIndicatorSnap:o}=t.options;o==="auto"&&(o=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let a,l;return o?(a=t.dateEnv.startOf(r,e.unit),l=t.dateEnv.add(a,_e(1,e.unit)).valueOf()-r.valueOf()):(a=r,l=1e3*60),l=Math.min(1e3*60*60*24,l),{state:{nowDate:a,todayRange:Qk(a)},waitMs:l}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const t=this.computeTiming();this.setState(t.state,()=>{this.setTimeout(t.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Nr.contextType=En;function Qk(n){let e=Ie(n),t=Je(e,1);return{start:e,end:t}}class Yk{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let r=this.getCurrentData(),o;t=t||"day",o=r.viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),o?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:o.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:t,toolbarConfig:r}=this.getCurrentData(),o=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),a,l;for(let u in t)o.push(u);for(a=0;a<o.length;a+=1)if(l=t[o[a]],l&&l.singleUnit===e)return l;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),r=_e(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),Be(t))}formatRange(e,t,r){let{dateEnv:o}=this.getCurrentData();return o.formatRange(o.createMarker(e),o.createMarker(t),Be(r),r)}formatIso(e,t){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:t})}select(e,t){let r;t==null?e.start!=null?r=e:r={start:e,end:null}:r={start:e,end:t};let o=this.getCurrentData(),a=Lk(r,o.dateEnv,_e({days:1}));a&&(this.dispatch({type:"SELECT_DATES",selection:a}),Fv(a,null,o))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),Ak(e,t))}addEvent(e,t){if(e instanceof $e){let l=e._def,u=e._instance;return this.getCurrentData().eventStore.defs[l.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Hu({def:l,instance:u})}),this.triggerEventAdd(e)),e}let r=this.getCurrentData(),o;if(t instanceof fs)o=t.internalEventSource;else if(typeof t=="boolean")t&&([o]=hd(r.eventSources));else if(t!=null){let l=this.getEventSourceById(t);if(!l)return console.warn(`Could not find an event source with ID "${t}"`),null;o=l.internalEventSource}let a=Pv(e,o,r,!1);if(a){let l=new $e(r,a.def,a.def.recurringDef?null:a.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Hu(a)}),this.triggerEventAdd(l),l}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:Wv(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:r,instances:o}=t.eventStore;e=String(e);for(let a in r){let l=r[a];if(l.publicId===e){if(l.recurringDef)return new $e(t,l,null);for(let u in o){let h=o[u];if(h.defId===l.defId)return new $e(t,l,h)}}}return null}getEvents(){let e=this.getCurrentData();return kr(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,r=[];for(let o in t)r.push(new fs(e,t[o]));return r}getEventSourceById(e){let t=this.getCurrentData(),r=t.eventSources;e=String(e);for(let o in r)if(r[o].publicId===e)return new fs(t,r[o]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof fs)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=Bv(e,t);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new fs(t,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=_e(e);t&&this.trigger("_scrollRequest",{time:t})}}function Kk(n,e){return n.left>=e.left&&n.left<e.right&&n.top>=e.top&&n.top<e.bottom}function Kv(n,e){let t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom?t:!1}function Jk(n,e){return{left:Math.min(Math.max(n.left,e.left),e.right),top:Math.min(Math.max(n.top,e.top),e.bottom)}}function Zk(n){return{left:(n.left+n.right)/2,top:(n.top+n.bottom)/2}}function Xk(n,e){return{left:n.left-e.left,top:n.top-e.top}}const hu=It();class eC{constructor(){this.getKeysForEventDefs=le(this._getKeysForEventDefs),this.splitDateSelection=le(this._splitDateSpan),this.splitEventStore=le(this._splitEventStore),this.splitIndividualUi=le(this._splitIndividualUi),this.splitEventDrag=le(this._splitInteraction),this.splitEventResize=le(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let t=this.getKeyInfo(e),r=this.getKeysForEventDefs(e.eventStore),o=this.splitDateSelection(e.dateSelection),a=this.splitIndividualUi(e.eventUiBases,r),l=this.splitEventStore(e.eventStore,r),u=this.splitEventDrag(e.eventDrag),h=this.splitEventResize(e.eventResize),p={};this.eventUiBuilders=Sn(t,(m,y)=>this.eventUiBuilders[y]||le(tC));for(let m in t){let y=t[m],b=l[m]||hu,w=this.eventUiBuilders[m];p[m]={businessHours:y.businessHours||e.businessHours,dateSelection:o[m]||null,eventStore:b,eventUiBases:w(e.eventUiBases[""],y.ui,a[m]),eventSelection:b.instances[e.eventSelection]?e.eventSelection:"",eventDrag:u[m]||null,eventResize:h[m]||null}}return p}_splitDateSpan(e){let t={};if(e){let r=this.getKeysForDateSpan(e);for(let o of r)t[o]=e}return t}_getKeysForEventDefs(e){return Sn(e.defs,t=>this.getKeysForEventDef(t))}_splitEventStore(e,t){let{defs:r,instances:o}=e,a={};for(let l in r)for(let u of t[l])a[u]||(a[u]=It()),a[u].defs[l]=r[l];for(let l in o){let u=o[l];for(let h of t[u.defId])a[h]&&(a[h].instances[l]=u)}return a}_splitIndividualUi(e,t){let r={};for(let o in e)if(o)for(let a of t[o])r[a]||(r[a]={}),r[a][o]=e[o];return r}_splitInteraction(e){let t={};if(e){let r=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),o=this._getKeysForEventDefs(e.mutatedEvents),a=this._splitEventStore(e.mutatedEvents,o),l=u=>{t[u]||(t[u]={affectedEvents:r[u]||hu,mutatedEvents:a[u]||hu,isEvent:e.isEvent})};for(let u in r)l(u);for(let u in a)l(u)}return t}}function tC(n,e,t){let r=[];n&&r.push(n),e&&r.push(e);let o={"":Uv(r)};return t&&Object.assign(o,t),o}function kd(n,e,t,r){return{dow:n.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!bn(r.activeRange,n))),isOther:!!(r&&!bn(r.currentRange,n)),isToday:!!(e&&bn(e,n)),isPast:!!(t?n<t:e&&n<e.start),isFuture:!!(t?n>t:e&&n>=e.end)}}function Va(n,e){let t=["fc-day",`fc-day-${sE[n.dow]}`];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}const nC=Be({year:"numeric",month:"long",day:"numeric"}),rC=Be({week:"long"});function Ss(n,e,t="day",r=!0){const{dateEnv:o,options:a,calendarApi:l}=n;let u=o.format(e,t==="week"?rC:nC);if(a.navLinks){let h=o.toDate(e);const p=m=>{let y=t==="day"?a.navLinkDayClick:t==="week"?a.navLinkWeekClick:null;typeof y=="function"?y.call(l,o.toDate(e),m):(typeof y=="string"&&(t=y),l.zoomTo(e,t))};return Object.assign({title:bi(a.navLinkHint,[u,h],u),"data-navlink":""},r?_v(p):{onClick:p})}return{"aria-label":u}}let fu=null;function sC(){return fu===null&&(fu=iC()),fu}function iC(){let n=document.createElement("div");wi(n,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),n.innerHTML="<div></div>",document.body.appendChild(n);let t=n.firstChild.getBoundingClientRect().left>n.getBoundingClientRect().left;return id(n),t}let pu;function oC(){return pu||(pu=aC()),pu}function aC(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let e=Jv(n);return document.body.removeChild(n),e}function Jv(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function lC(n,e=!1){let t=window.getComputedStyle(n),r=parseInt(t.borderLeftWidth,10)||0,o=parseInt(t.borderRightWidth,10)||0,a=parseInt(t.borderTopWidth,10)||0,l=parseInt(t.borderBottomWidth,10)||0,u=Jv(n),h=u.y-r-o,p=u.x-a-l,m={borderLeft:r,borderRight:o,borderTop:a,borderBottom:l,scrollbarBottom:p,scrollbarLeft:0,scrollbarRight:0};return sC()&&t.direction==="rtl"?m.scrollbarLeft=h:m.scrollbarRight=h,e&&(m.paddingLeft=parseInt(t.paddingLeft,10)||0,m.paddingRight=parseInt(t.paddingRight,10)||0,m.paddingTop=parseInt(t.paddingTop,10)||0,m.paddingBottom=parseInt(t.paddingBottom,10)||0),m}function cC(n,e=!1,t){let r=Cd(n),o=lC(n,e),a={left:r.left+o.borderLeft+o.scrollbarLeft,right:r.right-o.borderRight-o.scrollbarRight,top:r.top+o.borderTop,bottom:r.bottom-o.borderBottom-o.scrollbarBottom};return e&&(a.left+=o.paddingLeft,a.right-=o.paddingRight,a.top+=o.paddingTop,a.bottom-=o.paddingBottom),a}function Cd(n){let e=n.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function uC(n){let e=Zv(n),t=n.getBoundingClientRect();for(let r of e){let o=Kv(t,r.getBoundingClientRect());if(o)t=o;else return null}return t}function Zv(n){let e=[];for(;n instanceof HTMLElement;){let t=window.getComputedStyle(n);if(t.position==="fixed")break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}class _s{constructor(e,t,r,o){this.els=t;let a=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(a.left),o&&this.buildElVerticals(a.top)}buildElHorizontals(e){let t=[],r=[];for(let o of this.els){let a=o.getBoundingClientRect();t.push(a.left-e),r.push(a.right-e)}this.lefts=t,this.rights=r}buildElVerticals(e){let t=[],r=[];for(let o of this.els){let a=o.getBoundingClientRect();t.push(a.top-e),r.push(a.bottom-e)}this.tops=t,this.bottoms=r}leftToIndex(e){let{lefts:t,rights:r}=this,o=t.length,a;for(a=0;a<o;a+=1)if(e>=t[a]&&e<r[a])return a}topToIndex(e){let{tops:t,bottoms:r}=this,o=t.length,a;for(a=0;a<o;a+=1)if(e>=t[a]&&e<r[a])return a}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return ra(this.tops||[],e.tops||[])&&ra(this.bottoms||[],e.bottoms||[])&&ra(this.lefts||[],e.lefts||[])&&ra(this.rights||[],e.rights||[])}}function ra(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(Math.round(n[r])!==Math.round(e[r]))return!1;return!0}class Ad{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class dC extends Ad{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class hC extends Ad{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Xt extends Ce{constructor(){super(...arguments),this.uid=Dr()}prepareHits(){}queryHit(e,t,r,o){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!ft(e,".fc-event-mirror")}isValidDateDownEl(e){return!ft(e,".fc-event:not(.fc-bg-event)")&&!ft(e,".fc-more-link")&&!ft(e,"a[data-navlink]")&&!ft(e,".fc-popover")}}class Xv{constructor(e=t=>t.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let r of e)this.insertEntry(r,t);return t}insertEntry(e,t){let r=this.findInsertion(e);this.isInsertionValid(r,e)?this.insertEntryAt(e,r):this.handleInvalidInsertion(r,e,t)}isInsertionValid(e,t){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,r){if(this.allowReslicing&&e.touchingEntry){const o=Object.assign(Object.assign({},t),{span:Td(t.span,e.touchingEntry.span)});r.push(o),this.splitEntry(t,e.touchingEntry,r)}else r.push(t)}splitEntry(e,t,r){let o=e.span,a=t.span;o.start<a.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:o.start,end:a.start}},r),o.end>a.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.end,end:o.end}},r)}insertEntryAt(e,t){let{entriesByLevel:r,levelCoords:o}=this;t.lateral===-1?(mu(o,t.level,t.levelCoord),mu(r,t.level,[e])):mu(r[t.level],t.lateral,e),this.stackCnts[Cr(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:r,strictOrder:o,stackCnts:a}=this,l=t.length,u=0,h=-1,p=-1,m=null,y=0;for(let E=0;E<l;E+=1){const _=t[E];if(!o&&_>=u+this.getEntryThickness(e))break;let S=r[E],T,R=Wu(S,e.span.start,Fu),N=R[0]+R[1];for(;(T=S[N])&&T.span.start<e.span.end;){let I=_+this.getEntryThickness(T);I>u&&(u=I,m=T,h=E,p=N),I===u&&(y=Math.max(y,a[Cr(T)]+1)),N+=1}}let b=0;if(m)for(b=h+1;b<l&&t[b]<u;)b+=1;let w=-1;return b<l&&t[b]===u&&(w=Wu(r[b],e.span.end,Fu)[0]),{touchingLevel:h,touchingLateral:p,touchingEntry:m,stackCnt:y,levelCoord:u,level:b,lateral:w}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,r=e.length,o=[];for(let a=0;a<r;a+=1){let l=e[a],u=t[a];for(let h of l)o.push(Object.assign(Object.assign({},h),{thickness:this.getEntryThickness(h),levelCoord:u}))}return o}}function Fu(n){return n.span.end}function Cr(n){return n.index+":"+n.span.start}function fC(n){let e=[];for(let t of n){let r=[],o={span:t.span,entries:[t]};for(let a of e)Td(a.span,o.span)?o={entries:a.entries.concat(o.entries),span:pC(a.span,o.span)}:r.push(a);r.push(o),e=r}return e}function pC(n,e){return{start:Math.min(n.start,e.start),end:Math.max(n.end,e.end)}}function Td(n,e){let t=Math.max(n.start,e.start),r=Math.min(n.end,e.end);return t<r?{start:t,end:r}:null}function mu(n,e,t){n.splice(e,0,t)}function Wu(n,e,t){let r=0,o=n.length;if(!o||e<t(n[r]))return[0,0];if(e>t(n[o-1]))return[o,0];for(;r<o;){let a=Math.floor(r+(o-r)/2),l=t(n[a]);if(e<l)o=a;else if(e>l)r=a+1;else return[a,1]}return[r,0]}class mC{constructor(e,t){this.emitter=new Wa}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const Dd={};function gC(n,e){return!n||e>10?Be({weekday:"short"}):e>1?Be({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Be({weekday:"long"})}const ey="fc-col-header-cell";function ty(n){return n.text}class vC extends Ce{render(){let{dateEnv:e,options:t,theme:r,viewApi:o}=this.context,{props:a}=this,{date:l,dateProfile:u}=a,h=kd(l,a.todayRange,null,u),p=[ey].concat(Va(h,r)),m=e.format(l,a.dayHeaderFormat),y=!h.isDisabled&&a.colCnt>1?Ss(this.context,l):{},b=e.toDate(l);e.namedTimeZoneImpl&&(b=Jn(b,36e5));let w=Object.assign(Object.assign(Object.assign({date:b,view:o},a.extraRenderProps),{text:m}),h);return C(pt,{elTag:"th",elClasses:p,elAttrs:Object.assign({role:"columnheader",colSpan:a.colSpan,"data-date":h.isDisabled?void 0:Oi(l)},a.extraDataAttrs),renderProps:w,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:ty,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},E=>C("div",{className:"fc-scrollgrid-sync-inner"},!h.isDisabled&&C(E,{elTag:"a",elAttrs:y,elClasses:["fc-col-header-cell-cushion",a.isSticky&&"fc-sticky"]})))}}const yC=Be({weekday:"long"});class wC extends Ce{render(){let{props:e}=this,{dateEnv:t,theme:r,viewApi:o,options:a}=this.context,l=Je(new Date(2592e5),e.dow),u={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},h=t.format(l,e.dayHeaderFormat),p=Object.assign(Object.assign(Object.assign(Object.assign({date:l},u),{view:o}),e.extraRenderProps),{text:h});return C(pt,{elTag:"th",elClasses:[ey,...Va(u,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:p,generatorName:"dayHeaderContent",customGenerator:a.dayHeaderContent,defaultGenerator:ty,classNameGenerator:a.dayHeaderClassNames,didMount:a.dayHeaderDidMount,willUnmount:a.dayHeaderWillUnmount},m=>C("div",{className:"fc-scrollgrid-sync-inner"},C(m,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(l,yC)}})))}}class ny extends Ce{constructor(){super(...arguments),this.createDayHeaderFormatter=le(bC)}render(){let{context:e}=this,{dates:t,dateProfile:r,datesRepDistinctDays:o,renderIntro:a}=this.props,l=this.createDayHeaderFormatter(e.options.dayHeaderFormat,o,t.length);return C(Nr,{unit:"day"},(u,h)=>C("tr",{role:"row"},a&&a("day"),t.map(p=>o?C(vC,{key:p.toISOString(),date:p,dateProfile:r,todayRange:h,colCnt:t.length,dayHeaderFormat:l}):C(wC,{key:p.getUTCDay(),dow:p.getUTCDay(),dayHeaderFormat:l}))))}}function bC(n,e,t){return n||gC(e,t)}class ry{constructor(e,t){let r=e.start,{end:o}=e,a=[],l=[],u=-1;for(;r<o;)t.isHiddenDay(r)?a.push(u+.5):(u+=1,a.push(u),l.push(r)),r=Je(r,1);this.dates=l,this.indices=a,this.cnt=l.length}sliceRange(e){let t=this.getDateDayIndex(e.start),r=this.getDateDayIndex(Je(e.end,-1)),o=Math.max(0,t),a=Math.min(this.cnt-1,r);return o=Math.ceil(o),a=Math.floor(a),o<=a?{firstIndex:o,lastIndex:a,isStart:t===o,isEnd:r===a}:null}getDateDayIndex(e){let{indices:t}=this,r=Math.floor(Xn(this.dates[0],e));return r<0?t[0]-1:r>=t.length?t[t.length-1]+1:t[r]}}class sy{constructor(e,t){let{dates:r}=e,o,a,l;if(t){for(a=r[0].getUTCDay(),o=1;o<r.length&&r[o].getUTCDay()!==a;o+=1);l=Math.ceil(r.length/o)}else l=1,o=r.length;this.rowCnt=l,this.colCnt=o,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let r=[];for(let o=0;o<this.colCnt;o+=1)r.push(this.buildCell(t,o));e.push(r)}return e}buildCell(e,t){let r=this.daySeries.dates[e*this.colCnt+t];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,r=this.daySeries.sliceRange(e),o=[];if(r){let{firstIndex:a,lastIndex:l}=r,u=a;for(;u<=l;){let h=Math.floor(u/t),p=Math.min((h+1)*t,l+1);o.push({row:h,firstCol:u%t,lastCol:(p-1)%t,isStart:r.isStart&&u===a,isEnd:r.isEnd&&p-1===l}),u=p}}return o}}class iy{constructor(){this.sliceBusinessHours=le(this._sliceBusinessHours),this.sliceDateSelection=le(this._sliceDateSpan),this.sliceEventStore=le(this._sliceEventStore),this.sliceEventDrag=le(this._sliceInteraction),this.sliceEventResize=le(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,r,o,...a){let{eventUiBases:l}=e,u=this.sliceEventStore(e.eventStore,l,t,r,...a);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,r,l,o,...a),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,r,o,...a),fgEventSegs:u.fg,bgEventSegs:u.bg,eventDrag:this.sliceEventDrag(e.eventDrag,l,t,r,...a),eventResize:this.sliceEventResize(e.eventResize,l,t,r,...a),eventSelection:e.eventSelection}}sliceNowDate(e,t,r,o,...a){return this._sliceDateSpan({range:{start:e,end:Jn(e,1)},allDay:!1},t,r,{},o,...a)}_sliceBusinessHours(e,t,r,o,...a){return e?this._sliceEventStore(Tr(e,sa(t,!!r),o),{},t,r,...a).bg:[]}_sliceEventStore(e,t,r,o,...a){if(e){let l=$u(e,t,sa(r,!!o),o);return{bg:this.sliceEventRanges(l.bg,a),fg:this.sliceEventRanges(l.fg,a)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,r,o,...a){if(!e)return null;let l=$u(e.mutatedEvents,t,sa(r,!!o),o);return{segs:this.sliceEventRanges(l.fg,a),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,r,o,a,...l){if(!e)return[];let u=sa(t,!!r),h=Zn(e.range,u);if(h){e=Object.assign(Object.assign({},e),{range:h});let p=zk(e,o,a),m=this.sliceRange(e.range,...l);for(let y of m)y.eventRange=p;return m}return[]}sliceEventRanges(e,t){let r=[];for(let o of e)r.push(...this.sliceEventRange(o,t));return r}sliceEventRange(e,t){let r=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(r={start:r.start,end:Je(r.start,1)});let o=this.sliceRange(r,...t);for(let a of o)a.eventRange=e,a.isStart=e.isStart&&a.isStart,a.isEnd=e.isEnd&&a.isEnd;return o}}function sa(n,e){let t=n.activeRange;return e?t:{start:Jn(t.start,n.slotMinTime.milliseconds),end:Jn(t.end,n.slotMaxTime.milliseconds-864e5)}}function oy(n,e,t){let{instances:r}=n.mutatedEvents;for(let o in r)if(!za(e.validRange,r[o].range))return!1;return ay({eventDrag:n},t)}function xC(n,e,t){return za(e.validRange,n.range)?ay({dateSelection:n},t):!1}function ay(n,e){let t=e.getCurrentData(),r=Object.assign({businessHours:t.businessHours,dateSelection:"",eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},n);return(e.pluginHooks.isPropsValid||SC)(r,e)}function SC(n,e,t={},r){return!(n.eventDrag&&!_C(n,e,t,r)||n.dateSelection&&!EC(n,e,t,r))}function _C(n,e,t,r){let o=e.getCurrentData(),a=n.eventDrag,l=a.mutatedEvents,u=l.defs,h=l.instances,p=Da(u,a.isEvent?n.eventUiBases:{"":o.selectionConfig});r&&(p=Sn(p,r));let m=bk(n.eventStore,a.affectedEvents.instances),y=m.defs,b=m.instances,w=Da(y,n.eventUiBases);for(let E in h){let _=h[E],S=_.range,T=p[_.defId],R=u[_.defId];if(!ly(T.constraints,S,m,n.businessHours,e))return!1;let{eventOverlap:N}=e.options,I=typeof N=="function"?N:null;for(let A in b){let M=b[A];if(pd(S,M.range)&&(w[M.defId].overlap===!1&&a.isEvent||T.overlap===!1||I&&!I(new $e(e,y[M.defId],M),new $e(e,R,_))))return!1}let $=o.eventStore;for(let A of T.allows){let M=Object.assign(Object.assign({},t),{range:_.range,allDay:R.allDay}),H=$.defs[R.defId],G=$.instances[E],te;if(H?te=new $e(e,H,G):te=new $e(e,R),!A(bd(M,e),te))return!1}}return!0}function EC(n,e,t,r){let o=n.eventStore,a=o.defs,l=o.instances,u=n.dateSelection,h=u.range,{selectionConfig:p}=e.getCurrentData();if(r&&(p=r(p)),!ly(p.constraints,h,o,n.businessHours,e))return!1;let{selectOverlap:m}=e.options,y=typeof m=="function"?m:null;for(let b in l){let w=l[b];if(pd(h,w.range)&&(p.overlap===!1||y&&!y(new $e(e,a[w.defId],w),null)))return!1}for(let b of p.allows){let w=Object.assign(Object.assign({},t),u);if(!b(bd(w,e),null))return!1}return!0}function ly(n,e,t,r,o){for(let a of n)if(!CC(kC(a,e,t,r,o),e))return!1;return!0}function kC(n,e,t,r,o){return n==="businessHours"?gu(Tr(r,e,o)):typeof n=="string"?gu(Fa(t,a=>a.groupId===n)):typeof n=="object"&&n?gu(Tr(n,e,o)):[]}function gu(n){let{instances:e}=n,t=[];for(let r in e)t.push(e[r].range);return t}function CC(n,e){for(let t of n)if(za(t,e))return!0;return!1}const ia=/^(visible|hidden)$/;class cy extends Ce{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,an(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:r}=e,o=t&&r,a=["fc-scroller"];return t&&(r?a.push("fc-scroller-liquid-absolute"):a.push("fc-scroller-liquid")),C("div",{ref:this.handleEl,className:a.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:o&&-(e.overcomeLeft||0)||"",right:o&&-(e.overcomeRight||0)||"",bottom:o&&-(e.overcomeBottom||0)||"",marginLeft:!o&&-(e.overcomeLeft||0)||"",marginRight:!o&&-(e.overcomeRight||0)||"",marginBottom:!o&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(ia.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let o=0;o<r.length;o+=1)if(r[o].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(ia.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let o=0;o<r.length;o+=1)if(r[o].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return ia.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return ia.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class wn{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,r)=>{let{depths:o,currentMap:a}=this,l=!1,u=!1;t!==null?(l=r in a,a[r]=t,o[r]=(o[r]||0)+1,u=!0):(o[r]-=1,o[r]||(delete a[r],delete this.callbackMap[r],l=!0)),this.masterCallback&&(l&&this.masterCallback(null,String(r)),u&&this.masterCallback(t,String(r)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),t}collect(e,t,r){return UE(this.currentMap,e,t,r)}getAll(){return hd(this.currentMap)}}function AC(n){let e=P_(n,".fc-scrollgrid-shrink"),t=0;for(let r of e)t=Math.max(t,K_(r));return Math.ceil(t)}function uy(n,e){return n.liquid&&e.liquid}function TC(n,e){return e.maxHeight!=null||uy(n,e)}function DC(n,e,t,r){let{expandRows:o}=t;return typeof e.content=="function"?e.content(t):C("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:o?t.clientHeight:""}},t.tableColGroupNode,C(r?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(t):e.rowContent))}function RC(n,e){return Kn(n,e,Zt)}function NC(n,e){let t=[];for(let r of n){let o=r.span||1;for(let a=0;a<o;a+=1)t.push(C("col",{style:{width:r.width==="shrink"?jC(e):r.width||"",minWidth:r.minWidth||""}}))}return C("colgroup",{},...t)}function jC(n){return n??4}function IC(n){for(let e of n)if(e.width==="shrink")return!0;return!1}function OC(n,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}function MC(n,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return e&&n.liquid&&n.maxHeight==null&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function Vu(n){return C("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function Ra(n){let{stickyHeaderDates:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}function dy(n){let{stickyFooterScrollbar:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}class Rd extends Ce{constructor(){super(...arguments),this.processCols=le(e=>e,RC),this.renderMicroColGroup=le(NC),this.scrollerRefs=new wn,this.scrollerElRefs=new wn(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:r}=this,o=e.sections||[],a=this.processCols(e.cols),l=this.renderMicroColGroup(a,t.shrinkWidth),u=OC(e.liquid,r);e.collapsibleWidth&&u.push("fc-scrollgrid-collapsible");let h=o.length,p=0,m,y=[],b=[],w=[];for(;p<h&&(m=o[p]).type==="header";)y.push(this.renderSection(m,l,!0)),p+=1;for(;p<h&&(m=o[p]).type==="body";)b.push(this.renderSection(m,l,!1)),p+=1;for(;p<h&&(m=o[p]).type==="footer";)w.push(this.renderSection(m,l,!0)),p+=1;let E=!Yv();const _={role:"rowgroup"};return C("table",{role:"grid",className:u.join(" "),style:{height:e.height}},!!(!E&&y.length)&&C("thead",_,...y),!!(!E&&b.length)&&C("tbody",_,...b),!!(!E&&w.length)&&C("tfoot",_,...w),E&&C("tbody",_,...y,...b,...w))}renderSection(e,t,r){return"outerContent"in e?C(Re,{key:e.key},e.outerContent):C("tr",{key:e.key,role:"presentation",className:MC(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,r))}renderChunkTd(e,t,r,o){if("outerContent"in r)return r.outerContent;let{props:a}=this,{forceYScrollbars:l,scrollerClientWidths:u,scrollerClientHeights:h}=this.state,p=TC(a,e),m=uy(a,e),y=a.liquid?l?"scroll":p?"auto":"hidden":"visible",b=e.key,w=DC(e,r,{tableColGroupNode:t,tableMinWidth:"",clientWidth:!a.collapsibleWidth&&u[b]!==void 0?u[b]:null,clientHeight:h[b]!==void 0?h[b]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},o);return C(o?"th":"td",{ref:r.elRef,role:"presentation"},C("div",{className:`fc-scroller-harness${m?" fc-scroller-harness-liquid":""}`},C(cy,{ref:this.scrollerRefs.createRef(b),elRef:this.scrollerElRefs.createRef(b),overflowY:y,overflowX:a.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:m,liquidIsAbsolute:!0},w)))}_handleScrollerEl(e,t){let r=PC(this.props.sections,t);r&&an(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return IC(this.props.cols)?AC(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=oC(),{scrollerRefs:t,scrollerElRefs:r}=this,o=!1,a={},l={};for(let u in t.currentMap){let h=t.currentMap[u];if(h&&h.needsYScrolling()){o=!0;break}}for(let u of this.props.sections){let h=u.key,p=r.currentMap[h];if(p){let m=p.parentNode;a[h]=Math.floor(m.getBoundingClientRect().width-(o?e.y:0)),l[h]=Math.floor(m.getBoundingClientRect().height)}}return{forceYScrollbars:o,scrollerClientWidths:a,scrollerClientHeights:l}}}Rd.addStateEquality({scrollerClientWidths:Zt,scrollerClientHeights:Zt});function PC(n,e){for(let t of n)if(t.key===e)return t;return null}class qa extends Ce{constructor(){super(...arguments),this.buildPublicEvent=le((e,t,r)=>new $e(e,t,r)),this.handleEl=e=>{this.el=e,an(this.props.elRef,e),e&&Jm(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:r}=t,{seg:o}=e,{eventRange:a}=o,{ui:l}=a,u={event:this.buildPublicEvent(t,a.def,a.instance),view:t.viewApi,timeText:e.timeText,textColor:l.textColor,backgroundColor:l.backgroundColor,borderColor:l.borderColor,isDraggable:!e.disableDragging&&jk(o,t),isStartResizable:!e.disableResizing&&Ik(o,t),isEndResizable:!e.disableResizing&&Ok(o),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!o.isStart,isEnd:!!o.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return C(pt,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...Mk(u),...o.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:u,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&Jm(this.el,this.props.seg)}}class Nd extends Ce{render(){let{props:e,context:t}=this,{options:r}=t,{seg:o}=e,{ui:a}=o.eventRange,l=r.eventTimeFormat||e.defaultTimeFormat,u=Si(o,l,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return C(qa,Object.assign({},e,{elTag:"a",elStyle:{borderColor:a.borderColor,backgroundColor:a.backgroundColor},elAttrs:_d(o,t),defaultGenerator:LC,timeText:u}),(h,p)=>C(Re,null,C(h,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:p.textColor}}),!!p.isStartResizable&&C("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!p.isEndResizable&&C("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}Nd.addPropsEquality({seg:Zt});function LC(n){return C("div",{className:"fc-event-main-frame"},n.timeText&&C("div",{className:"fc-event-time"},n.timeText),C("div",{className:"fc-event-title-container"},C("div",{className:"fc-event-title fc-sticky"},n.event.title||C(Re,null,""))))}const jd=n=>C(En.Consumer,null,e=>{let{options:t}=e,r={isAxis:n.isAxis,date:e.dateEnv.toDate(n.date),view:e.viewApi};return C(pt,{elRef:n.elRef,elTag:n.elTag||"div",elAttrs:n.elAttrs,elClasses:n.elClasses,elStyle:n.elStyle,renderProps:r,generatorName:"nowIndicatorContent",customGenerator:t.nowIndicatorContent,classNameGenerator:t.nowIndicatorClassNames,didMount:t.nowIndicatorDidMount,willUnmount:t.nowIndicatorWillUnmount},n.children)}),UC=Be({day:"numeric"});class Id extends Ce{constructor(){super(...arguments),this.refineRenderProps=ua(BC)}render(){let{props:e,context:t}=this,{options:r}=t,o=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:r.monthStartFormat});return C(pt,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),o.isDisabled?{}:{"data-date":Oi(e.date)}),elClasses:[...Va(o,t.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:o,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:o.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount},e.children)}}function Od(n){return!!(n.dayCellContent||Uu("dayCellContent",n))}function BC(n){let{date:e,dateEnv:t,dateProfile:r,isMonthStart:o}=n,a=kd(e,n.todayRange,null,r),l=n.showDayNumber?t.format(e,o?n.monthStartFormat:UC):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:n.viewApi},a),{isMonthStart:o,dayNumberText:l}),n.extraRenderProps)}class hy extends Ce{render(){let{props:e}=this,{seg:t}=e;return C(qa,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:HC,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function HC(n){let{title:e}=n.event;return e&&C("div",{className:"fc-event-title"},n.event.title)}function fy(n){return C("div",{className:`fc-${n}`})}const py=n=>C(En.Consumer,null,e=>{let{dateEnv:t,options:r}=e,{date:o}=n,a=r.weekNumberFormat||n.defaultFormat,l=t.computeWeekNumber(o),u=t.format(o,a),h={num:l,text:u,date:o};return C(pt,{elRef:n.elRef,elTag:n.elTag,elAttrs:n.elAttrs,elClasses:n.elClasses,elStyle:n.elStyle,renderProps:h,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:$C,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},n.children)});function $C(n){return n.text}const vu=10;class zC extends Ce{constructor(){super(...arguments),this.state={titleId:Yn()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&an(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=xv(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:r,state:o}=this,a=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return S_(C("div",Object.assign({},r.extraAttrs,{id:r.id,className:a.join(" "),"aria-labelledby":o.titleId,ref:this.handleRootEl}),C("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},C("span",{className:"fc-popover-title",id:o.titleId},r.title),C("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),C("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:r}=this.props,{rootEl:o}=this,a=uC(t);if(a){let l=o.getBoundingClientRect(),u=r?ft(t,".fc-scrollgrid").getBoundingClientRect().top:a.top,h=e?a.right-l.width:a.left;u=Math.max(u,vu),h=Math.min(h,document.documentElement.clientWidth-vu-l.width),h=Math.max(h,vu);let p=o.offsetParent.getBoundingClientRect();wi(o,{top:u-p.top,left:h-p.left})}}}class FC extends Xt{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:r}=this,{startDate:o,todayRange:a,dateProfile:l}=r,u=t.format(o,e.dayPopoverFormat);return C(Id,{elRef:this.handleRootEl,date:o,dateProfile:l,todayRange:a},(h,p,m)=>C(zC,{elRef:m.ref,id:r.id,title:u,extraClassNames:["fc-more-popover"].concat(m.className||[]),extraAttrs:m,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},Od(e)&&C(h,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,t,r,o){let{rootEl:a,props:l}=this;return e>=0&&e<r&&t>=0&&t<o?{dateProfile:l.dateProfile,dateSpan:Object.assign({allDay:!l.forceTimed,range:{start:l.startDate,end:l.endDate}},l.extraDateSpan),dayEl:a,rect:{left:0,top:0,right:r,bottom:o},layer:1}:null}}class my extends Ce{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Yn()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&an(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:r}=this,{moreLinkClick:o}=r.options,a=Xm(t).start;function l(u){let{def:h,instance:p,range:m}=u.eventRange;return{event:new $e(r,h,p),start:r.dateEnv.toDate(m.start),end:r.dateEnv.toDate(m.end),isStart:u.isStart,isEnd:u.isEnd}}typeof o=="function"&&(o=o({date:a,allDay:!!t.allDayDate,allSegs:t.allSegs.map(l),hiddenSegs:t.hiddenSegs.map(l),jsEvent:e,view:r.viewApi})),!o||o==="popover"?this.setState({isPopoverOpen:!0}):typeof o=="string"&&r.calendarApi.zoomTo(a,o)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return C(En.Consumer,null,r=>{let{viewApi:o,options:a,calendarApi:l}=r,{moreLinkText:u}=a,{moreCnt:h}=e,p=Xm(e),m=typeof u=="function"?u.call(l,h):`+${h} ${u}`,y=bi(a.moreLinkHint,[h],m),b={num:h,shortText:`+${h}`,text:m,view:o};return C(Re,null,!!e.moreCnt&&C(pt,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),_v(this.handleClick)),{title:y,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:b,generatorName:"moreLinkContent",customGenerator:a.moreLinkContent,defaultGenerator:e.defaultGenerator||WC,classNameGenerator:a.moreLinkClassNames,didMount:a.moreLinkDidMount,willUnmount:a.moreLinkWillUnmount},e.children),t.isPopoverOpen&&C(FC,{id:t.popoverId,startDate:p.start,endDate:p.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=ft(this.linkEl,".fc-view-harness"))}}function WC(n){return n.text}function Xm(n){if(n.allDayDate)return{start:n.allDayDate,end:Je(n.allDayDate,1)};let{hiddenSegs:e}=n;return{start:gy(e),end:qC(e)}}function gy(n){return n.reduce(VC).eventRange.range.start}function VC(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function qC(n){return n.reduce(GC).eventRange.range.end}function GC(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}class QC{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let t of this.handlers)t(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class YC extends QC{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:t}=this;let r=!1;e.isActive?(t.set(e.id,e),r=!0):t.has(e.id)&&(t.delete(e.id),r=!0),r&&this.set(t)}}const KC=[],vy={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},yy=Object.assign(Object.assign({},vy),{buttonHints:{prev:"Previous $0",next:"Next $0",today(n,e){return e==="day"?"Today":`This ${n}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(n){return`Show ${n} more event${n===1?"":"s"}`}});function JC(n){let e=n.length>0?n[0].code:"en",t=KC.concat(n),r={en:yy};for(let o of t)r[o.code]=o;return{map:r,defaultCode:e}}function wy(n,e){return typeof n=="object"&&!Array.isArray(n)?by(n.code,[n.code],n):ZC(n,e)}function ZC(n,e){let t=[].concat(n||[]),r=XC(t,e)||yy;return by(n,t,r)}function XC(n,e){for(let t=0;t<n.length;t+=1){let r=n[t].toLocaleLowerCase().split("-");for(let o=r.length;o>0;o-=1){let a=r.slice(0,o).join("-");if(e[a])return e[a]}}return null}function by(n,e,t){let r=dd([vy,t],["buttonText"]);delete r.code;let{week:o}=r;return delete r.week,{codeArg:n,codes:e,week:o,simpleNumberFormat:new Intl.NumberFormat(n),options:r}}function cn(n){return{id:Dr(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function eA(n,e){let t={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function o(a){for(let l of a){const u=l.name,h=t[u];h===void 0?(t[u]=l.id,o(l.deps),r=nA(r,l)):h!==l.id&&console.warn(`Duplicate plugin '${u}'`)}}return n&&o(n),o(e),r}function tA(){let n=[],e=[],t;return(r,o)=>((!t||!Kn(r,n)||!Kn(o,e))&&(t=eA(r,o)),n=r,e=o,t)}function nA(n,e){return{premiumReleaseDate:rA(n.premiumReleaseDate,e.premiumReleaseDate),reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),e.propSetHandlers)}}function rA(n,e){return n===void 0?e:e===void 0?n:new Date(Math.max(n.valueOf(),e.valueOf()))}class er extends Mi{}er.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};er.prototype.baseIconClass="fc-icon";er.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};er.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};er.prototype.iconOverrideOption="buttonIcons";er.prototype.iconOverrideCustomButtonOption="icon";er.prototype.iconOverridePrefix="fc-icon-";function sA(n,e){let t={},r;for(r in n)qu(r,t,n,e);for(r in e)qu(r,t,n,e);return t}function qu(n,e,t,r){if(e[n])return e[n];let o=iA(n,e,t,r);return o&&(e[n]=o),o}function iA(n,e,t,r){let o=t[n],a=r[n],l=m=>o&&o[m]!==null?o[m]:a&&a[m]!==null?a[m]:null,u=l("component"),h=l("superType"),p=null;if(h){if(h===n)throw new Error("Can't have a custom view type that references itself");p=qu(h,e,t,r)}return!u&&p&&(u=p.component),u?{type:n,component:u,defaults:Object.assign(Object.assign({},p?p.defaults:{}),o?o.rawOptions:{}),overrides:Object.assign(Object.assign({},p?p.overrides:{}),a?a.rawOptions:{})}:null}function eg(n){return Sn(n,oA)}function oA(n){let e=typeof n=="function"?{component:n}:n,{component:t}=e;return e.content?t=tg(e):t&&!(t.prototype instanceof Ce)&&(t=tg(Object.assign(Object.assign({},e),{content:t}))),{superType:e.type,component:t,rawOptions:e}}function tg(n){return e=>C(En.Consumer,null,t=>C(pt,{elTag:"div",elClasses:jv(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function aA(n,e,t,r){let o=eg(n),a=eg(e.views),l=sA(o,a);return Sn(l,u=>lA(u,a,e,t,r))}function lA(n,e,t,r,o){let a=n.overrides.duration||n.defaults.duration||r.duration||t.duration,l=null,u="",h="",p={};if(a&&(l=cA(a),l)){let b=Lu(l);u=b.unit,b.value===1&&(h=u,p=e[u]?e[u].rawOptions:{})}let m=b=>{let w=b.buttonText||{},E=n.defaults.buttonTextKey;return E!=null&&w[E]!=null?w[E]:w[n.type]!=null?w[n.type]:w[h]!=null?w[h]:null},y=b=>{let w=b.buttonHints||{},E=n.defaults.buttonTextKey;return E!=null&&w[E]!=null?w[E]:w[n.type]!=null?w[n.type]:w[h]!=null?w[h]:null};return{type:n.type,component:n.component,duration:l,durationUnit:u,singleUnit:h,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},p),n.overrides),buttonTextOverride:m(r)||m(t)||n.overrides.buttonText,buttonTextDefault:m(o)||n.defaults.buttonText||m(xi)||n.type,buttonTitleOverride:y(r)||y(t)||n.overrides.buttonHint,buttonTitleDefault:y(o)||n.defaults.buttonHint||y(xi)}}let ng={};function cA(n){let e=JSON.stringify(n),t=ng[e];return t===void 0&&(t=_e(n),ng[e]=t),t}function uA(n,e){switch(e.type){case"CHANGE_VIEW_TYPE":n=e.viewType}return n}function dA(n,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return n}}function hA(n,e,t){let r=n.initialDate;return r!=null?e.createMarker(r):t.getDateMarker()}function fA(n,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},n),{[e.optionName]:e.rawOptionValue});default:return n}}function pA(n,e,t,r){let o;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||t);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(o=r.buildPrev(n,t),o.isValid)return o;break;case"NEXT":if(o=r.buildNext(n,t),o.isValid)return o;break}return n}function mA(n,e,t){let r=e?e.activeRange:null;return Sy({},SA(n,t),r,t)}function gA(n,e,t,r){let o=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return Sy(n,e.sources,o,r);case"REMOVE_EVENT_SOURCE":return yA(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?_y(n,o,r):n;case"FETCH_EVENT_SOURCES":return Md(n,e.sourceIds?Av(e.sourceIds):Ey(n,r),o,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return xA(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}function vA(n,e,t){let r=e?e.activeRange:null;return Md(n,Ey(n,t),r,!0,t)}function xy(n){for(let e in n)if(n[e].isFetching)return!0;return!1}function Sy(n,e,t,r){let o={};for(let a of e)o[a.sourceId]=a;return t&&(o=_y(o,t,r)),Object.assign(Object.assign({},n),o)}function yA(n,e){return Ar(n,t=>t.sourceId!==e)}function _y(n,e,t){return Md(n,Ar(n,r=>wA(r,e,t)),e,!1,t)}function wA(n,e,t){return ky(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}function Md(n,e,t,r,o){let a={};for(let l in n){let u=n[l];e[l]?a[l]=bA(u,t,r,o):a[l]=u}return a}function bA(n,e,t,r){let{options:o,calendarApi:a}=r,l=r.pluginHooks.eventSourceDefs[n.sourceDefId],u=Dr();return l.fetch({eventSource:n,range:e,isRefetch:t,context:r},h=>{let{rawEvents:p}=h;o.eventSourceSuccess&&(p=o.eventSourceSuccess.call(a,p,h.response)||p),n.success&&(p=n.success.call(a,p,h.response)||p),r.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:u,fetchRange:e,rawEvents:p})},h=>{let p=!1;o.eventSourceFailure&&(o.eventSourceFailure.call(a,h),p=!0),n.failure&&(n.failure(h),p=!0),p||console.warn(h.message,h),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:u,fetchRange:e,error:h})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:u})}function xA(n,e,t,r){let o=n[e];return o&&t===o.latestFetchId?Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},o),{isFetching:!1,fetchRange:r})}):n}function Ey(n,e){return Ar(n,t=>ky(t,e))}function SA(n,e){let t=Hv(e),r=[].concat(n.eventSources||[]),o=[];n.initialEvents&&r.unshift(n.initialEvents),n.events&&r.unshift(n.events);for(let a of r){let l=Bv(a,e,t);l&&o.push(l)}return o}function ky(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function _A(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function EA(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function kA(n,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function CA(n,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function AA(n,e,t,r,o){let a=n.headerToolbar?rg(n.headerToolbar,n,e,t,r,o):null,l=n.footerToolbar?rg(n.footerToolbar,n,e,t,r,o):null;return{header:a,footer:l}}function rg(n,e,t,r,o,a){let l={},u=[],h=!1;for(let p in n){let m=n[p],y=TA(m,e,t,r,o,a);l[p]=y.widgets,u.push(...y.viewsWithButtons),h=h||y.hasTitle}return{sectionWidgets:l,viewsWithButtons:u,hasTitle:h}}function TA(n,e,t,r,o,a){let l=e.direction==="rtl",u=e.customButtons||{},h=t.buttonText||{},p=e.buttonText||{},m=t.buttonHints||{},y=e.buttonHints||{},b=n?n.split(" "):[],w=[],E=!1;return{widgets:b.map(S=>S.split(",").map(T=>{if(T==="title")return E=!0,{buttonName:T};let R,N,I,$,A,M;if(R=u[T])I=H=>{R.click&&R.click.call(H.target,H,H.target)},($=r.getCustomButtonIconClass(R))||($=r.getIconClass(T,l))||(A=R.text),M=R.hint||R.text;else if(N=o[T]){w.push(T),I=()=>{a.changeView(T)},(A=N.buttonTextOverride)||($=r.getIconClass(T,l))||(A=N.buttonTextDefault);let H=N.buttonTextOverride||N.buttonTextDefault;M=bi(N.buttonTitleOverride||N.buttonTitleDefault||e.viewHint,[H,T],H)}else if(a[T])if(I=()=>{a[T]()},(A=h[T])||($=r.getIconClass(T,l))||(A=p[T]),T==="prevYear"||T==="nextYear"){let H=T==="prevYear"?"prev":"next";M=bi(m[H]||y[H],[p.year||"year","year"],p[T])}else M=H=>bi(m[T]||y[T],[p[H]||H,H],p[T]);return{buttonName:T,buttonClick:I,buttonIcon:$,buttonText:A,buttonHint:M}})),viewsWithButtons:w,hasTitle:E}}class DA{constructor(e,t,r){this.type=e,this.getCurrentData=t,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let RA={ignoreRange:!0,parseMeta(n){return Array.isArray(n.events)?n.events:null},fetch(n,e){e({rawEvents:n.eventSource.meta})}};const NA=cn({name:"array-event-source",eventSourceDefs:[RA]});let jA={parseMeta(n){return typeof n.events=="function"?n.events:null},fetch(n,e,t){const{dateEnv:r}=n.context,o=n.eventSource.meta;Fk(o.bind(null,Gv(n.range,r)),a=>e({rawEvents:a}),t)}};const IA=cn({name:"func-event-source",eventSourceDefs:[jA]}),OA={method:String,extraParams:U,startParam:String,endParam:String,timeZoneParam:String};let MA={parseMeta(n){return n.url&&(n.format==="json"||!n.format)?{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}:null},fetch(n,e,t){const{meta:r}=n.eventSource,o=LA(r,n.range,n.context);Wk(r.method,r.url,o).then(([a,l])=>{e({rawEvents:a,response:l})},t)}};const PA=cn({name:"json-event-source",eventSourceRefiners:OA,eventSourceDefs:[MA]});function LA(n,e,t){let{dateEnv:r,options:o}=t,a,l,u,h,p={};return a=n.startParam,a==null&&(a=o.startParam),l=n.endParam,l==null&&(l=o.endParam),u=n.timeZoneParam,u==null&&(u=o.timeZoneParam),typeof n.extraParams=="function"?h=n.extraParams():h=n.extraParams||{},Object.assign(p,h),p[a]=r.formatIso(e.start),p[l]=r.formatIso(e.end),r.timeZone!=="local"&&(p[u]=r.timeZone),p}const UA={daysOfWeek:U,startTime:_e,endTime:_e,duration:_e,startRecur:U,endRecur:U};let BA={parse(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null,dateEnv:e},r;return n.duration&&(r=n.duration),!r&&n.startTime&&n.endTime&&(r=eE(n.endTime,n.startTime)),{allDayGuess:!n.startTime&&!n.endTime,duration:r,typeData:t}}return null},expand(n,e,t){let r=Zn(e,{start:n.startRecur,end:n.endRecur});return r?$A(n.daysOfWeek,n.startTime,n.dateEnv,t,r):[]}};const HA=cn({name:"simple-recurring-event",recurringTypes:[BA],eventRefiners:UA});function $A(n,e,t,r,o){let a=n?Av(n):null,l=Ie(o.start),u=o.end,h=[];for(e&&(e.milliseconds<0?u=Je(u,1):e.milliseconds>=1e3*60*60*24&&(l=Je(l,-1)));l<u;){let p;(!a||a[l.getUTCDay()])&&(e?p=r.add(l,e):p=l,h.push(r.createMarker(t.toDate(p)))),l=Je(l,1)}return h}const zA=cn({name:"change-handler",optionChangeHandlers:{events(n,e){sg([n],e)},eventSources:sg}});function sg(n,e){let t=hd(e.getCurrentData().eventSources);if(t.length===1&&n.length===1&&Array.isArray(t[0]._raw)&&Array.isArray(n[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:n[0]});return}let r=[];for(let o of n){let a=!1;for(let l=0;l<t.length;l+=1)if(t[l]._raw===o){t.splice(l,1),a=!0;break}a||r.push(o)}for(let o of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:o.sourceId});for(let o of r)e.calendarApi.addEventSource(o)}function FA(n,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},Gv(n.activeRange,e.dateEnv)),{view:e.viewApi}))}function WA(n,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",kr(n,e))}const VA=[NA,IA,PA,HA,zA,cn({name:"misc",isLoadingFuncs:[n=>xy(n.eventSources)],propSetHandlers:{dateProfile:FA,eventStore:WA}})];class qA{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new sd(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let t=[],r;for(;r=e.shift();)this.runTask(r),t.push(r);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function GA(n,e,t){let r;return/^(year|month)$/.test(n.currentRangeUnit)?r=n.currentRange:r=n.activeRange,t.formatRange(r.start,r.end,Be(e.titleFormat||QA(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function QA(n){let{currentRangeUnit:e}=n;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let t=Sa(n.currentRange.start,n.currentRange.end);return t!==null&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class ig{constructor(){this.resetListeners=new Set}handleInput(e,t){const r=this.dateEnv;if(e!==r&&(typeof t=="function"?this.nowFn=t:r||(this.nowAnchorDate=e.toDate(t?e.createMarker(t):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,r))for(const o of this.resetListeners.values())o()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class YA{constructor(e){this.computeCurrentViewData=le(this._computeCurrentViewData),this.organizeRawLocales=le(JC),this.buildLocale=le(wy),this.buildPluginHooks=tA(),this.buildDateEnv=le(KA),this.buildTheme=le(JA),this.parseToolbars=le(AA),this.buildViewSpecs=le(aA),this.buildDateProfileGenerator=ua(ZA),this.buildViewApi=le(XA),this.buildViewUiProps=ua(nT),this.buildEventUiBySource=le(eT,Zt),this.buildEventUiBases=le(tT),this.parseContextBusinessHours=ua(rT),this.buildTitle=le(GA),this.nowManager=new ig,this.emitter=new Wa,this.actionRunner=new qA(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=b=>{this.actionRunner.request(b)},this.props=e,this.actionRunner.pause(),this.nowManager=new ig;let t={},r=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),o=r.calendarOptions.initialView||r.pluginHooks.initialView,a=this.computeCurrentViewData(o,r,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(a.options);let l={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},u=hA(r.calendarOptions,r.dateEnv,this.nowManager),h=a.dateProfileGenerator.build(u);bn(h.activeRange,u)||(u=h.currentRange.start);for(let b of r.pluginHooks.contextInit)b(l);let p=mA(r.calendarOptions,h,l),m={dynamicOptionOverrides:t,currentViewType:o,currentDate:u,dateProfile:h,businessHours:this.parseContextBusinessHours(l),eventSources:p,eventUiBases:{},eventStore:It(),renderableEventStore:It(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(l).selectionConfig},y=Object.assign(Object.assign({},l),m);for(let b of r.pluginHooks.reducers)Object.assign(m,b(null,null,y));yu(m,l)&&this.emitter.trigger("loading",!0),this.state=m,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:r}=this;t===void 0?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(t===void 0||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:r,emitter:o}=this,a=fA(r.dynamicOptionOverrides,e),l=this.computeOptionsData(t.optionOverrides,a,t.calendarApi),u=uA(r.currentViewType,e),h=this.computeCurrentViewData(u,l,t.optionOverrides,a);t.calendarApi.currentDataManager=this,o.setThisContext(t.calendarApi),o.setOptions(h.options);let p={nowManager:this.nowManager,dateEnv:l.dateEnv,options:l.calendarOptions,pluginHooks:l.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:o,getCurrentData:this.getCurrentData},{currentDate:m,dateProfile:y}=r;this.data&&this.data.dateProfileGenerator!==h.dateProfileGenerator&&(y=h.dateProfileGenerator.build(m)),m=dA(m,e),y=pA(y,e,m,h.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!bn(y.currentRange,m))&&(m=y.currentRange.start);let b=gA(r.eventSources,e,y,p),w=gk(r.eventStore,e,b,y,p),_=xy(b)&&!h.options.progressiveEventRendering&&r.renderableEventStore||w,{eventUiSingleBase:S,selectionConfig:T}=this.buildViewUiProps(p),R=this.buildEventUiBySource(b),N=this.buildEventUiBases(_.defs,S,R),I={dynamicOptionOverrides:a,currentViewType:u,currentDate:m,dateProfile:y,eventSources:b,eventStore:w,renderableEventStore:_,selectionConfig:T,eventUiBases:N,businessHours:this.parseContextBusinessHours(p),dateSelection:_A(r.dateSelection,e),eventSelection:EA(r.eventSelection,e),eventDrag:kA(r.eventDrag,e),eventResize:CA(r.eventResize,e)},$=Object.assign(Object.assign({},p),I);for(let H of l.pluginHooks.reducers)Object.assign(I,H(r,e,$));let A=yu(r,p),M=yu(I,p);!A&&M?o.trigger("loading",!0):A&&!M&&o.trigger("loading",!1),this.state=I,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,r=this.data,o=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),a=this.computeCurrentViewData(t.currentViewType,o,e.optionOverrides,t.dynamicOptionOverrides),l=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(t.dateProfile,a.options,o.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},o),a),t),u=o.pluginHooks.optionChangeHandlers,h=r&&r.calendarOptions,p=o.calendarOptions;if(h&&h!==p){h.timeZone!==p.timeZone&&(t.eventSources=l.eventSources=vA(l.eventSources,t.dateProfile,l),t.eventStore=l.eventStore=Ym(l.eventStore,r.dateEnv,l.dateEnv),t.renderableEventStore=l.renderableEventStore=Ym(l.renderableEventStore,r.dateEnv,l.dateEnv));for(let m in u)(this.optionsForHandling.indexOf(m)!==-1||h[m]!==p[m])&&u[m](p[m],l)}this.optionsForHandling=[],e.onData&&e.onData(l)}computeOptionsData(e,t,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:o,pluginHooks:a,localeDefaults:l,availableLocaleData:u,extra:h}=this.processRawCalendarOptions(e,t);og(h);let p=this.buildDateEnv(o.timeZone,o.locale,o.weekNumberCalculation,o.firstDay,o.weekText,a,u,o.defaultRangeSeparator),m=this.buildViewSpecs(a.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,l),y=this.buildTheme(o,a),b=this.parseToolbars(o,this.stableOptionOverrides,y,m,r);return this.stableCalendarOptionsData={calendarOptions:o,pluginHooks:a,dateEnv:p,viewSpecs:m,theme:y,toolbarConfig:b,localeDefaults:l,availableRawLocales:u.map}}processRawCalendarOptions(e,t){let{locales:r,locale:o}=cu([xi,e,t]),a=this.organizeRawLocales(r),l=a.map,u=this.buildLocale(o||a.defaultCode,l).options,h=this.buildPluginHooks(e.plugins||[],VA),p=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Fm),Wm),Vm),h.listenerRefiners),h.optionRefiners),m={},y=cu([xi,u,e,t]),b={},w=this.currentCalendarOptionsInput,E=this.currentCalendarOptionsRefined,_=!1;for(let S in y)this.optionsForRefining.indexOf(S)===-1&&(y[S]===w[S]||wr[S]&&S in w&&wr[S](w[S],y[S]))?b[S]=E[S]:p[S]?(b[S]=p[S](y[S]),_=!0):m[S]=w[S];return _&&(this.currentCalendarOptionsInput=y,this.currentCalendarOptionsRefined=b,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:h,availableLocaleData:a,localeDefaults:u,extra:m}}_computeCurrentViewData(e,t,r,o){let a=t.viewSpecs[e];if(!a)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:l,extra:u}=this.processRawViewOptions(a,t.pluginHooks,t.localeDefaults,r,o);og(u),this.nowManager.handleInput(t.dateEnv,l.now);let h=this.buildDateProfileGenerator({dateProfileGeneratorClass:a.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:a.duration,durationUnit:a.durationUnit,usesMinMaxTime:a.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:l.slotMinTime,slotMaxTime:l.slotMaxTime,showNonCurrentDates:l.showNonCurrentDates,dayCount:l.dayCount,dateAlignment:l.dateAlignment,dateIncrement:l.dateIncrement,hiddenDays:l.hiddenDays,weekends:l.weekends,validRangeInput:l.validRange,visibleRangeInput:l.visibleRange,fixedWeekCount:l.fixedWeekCount}),p=this.buildViewApi(e,this.getCurrentData,t.dateEnv);return{viewSpec:a,options:l,dateProfileGenerator:h,viewApi:p}}processRawViewOptions(e,t,r,o,a){let l=cu([xi,e.optionDefaults,r,o,e.optionOverrides,a]),u=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Fm),Wm),Vm),IE),t.listenerRefiners),t.optionRefiners),h={},p=this.currentViewOptionsInput,m=this.currentViewOptionsRefined,y=!1,b={};for(let w in l)l[w]===p[w]||wr[w]&&wr[w](l[w],p[w])?h[w]=m[w]:(l[w]===this.currentCalendarOptionsInput[w]||wr[w]&&wr[w](l[w],this.currentCalendarOptionsInput[w])?w in this.currentCalendarOptionsRefined&&(h[w]=this.currentCalendarOptionsRefined[w]):u[w]?h[w]=u[w](l[w]):b[w]=l[w],y=!0);return y&&(this.currentViewOptionsInput=l,this.currentViewOptionsRefined=h),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:b}}}function KA(n,e,t,r,o,a,l,u){let h=wy(e||l.defaultCode,l.map);return new WE({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:a.namedTimeZonedImpl,locale:h,weekNumberCalculation:t,firstDay:r,weekText:o,cmdFormatter:a.cmdFormatter,defaultSeparator:u})}function JA(n,e){let t=e.themeClasses[n.themeSystem]||er;return new t(n)}function ZA(n){let e=n.dateProfileGeneratorClass||Ov;return new e(n)}function XA(n,e,t){return new DA(n,e,t)}function eT(n){return Sn(n,e=>e.ui)}function tT(n,e,t){let r={"":e};for(let o in n){let a=n[o];a.sourceId&&t[a.sourceId]&&(r[o]=t[a.sourceId])}return r}function nT(n){let{options:e}=n;return{eventUiSingleBase:Ta({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:Ta({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function yu(n,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(n))return!0;return!1}function rT(n){return kk(n.options.businessHours,n)}function og(n,e){for(let t in n)console.warn(`Unknown option '${t}'`)}class sT extends Ce{render(){let e=this.props.widgetGroups.map(t=>this.renderWidgetGroup(t));return C("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:t}=this,{theme:r}=this.context,o=[],a=!0;for(let l of e){let{buttonName:u,buttonClick:h,buttonText:p,buttonIcon:m,buttonHint:y}=l;if(u==="title")a=!1,o.push(C("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let b=u===t.activeButton,w=!t.isTodayEnabled&&u==="today"||!t.isPrevEnabled&&u==="prev"||!t.isNextEnabled&&u==="next",E=[`fc-${u}-button`,r.getClass("button")];b&&E.push(r.getClass("buttonActive")),o.push(C("button",{type:"button",title:typeof y=="function"?y(t.navUnit):y,disabled:w,"aria-pressed":b,className:E.join(" "),onClick:h},p||(m?C("span",{className:m,role:"img"}):"")))}}if(o.length>1){let l=a&&r.getClass("buttonGroup")||"";return C("div",{className:l},...o)}return o[0]}}class ag extends Ce{render(){let{model:e,extraClassName:t}=this.props,r=!1,o,a,l=e.sectionWidgets,u=l.center;return l.left?(r=!0,o=l.left):o=l.start,l.right?(r=!0,a=l.right):a=l.end,C("div",{className:[t||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",o||[]),this.renderSection("center",u||[]),this.renderSection("end",a||[]))}renderSection(e,t){let{props:r}=this;return C(sT,{key:e,widgetGroups:t,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class iT extends Ce{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,an(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:r}=e,o=["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],a="",l="";return r?t.availableWidth!==null?a=t.availableWidth/r:l=`${1/r*100}%`:a=e.height||"",C("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:o.join(" "),style:{height:a,paddingBottom:l}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class oT extends Es{constructor(e){super(e),this.handleSegClick=(t,r)=>{let{component:o}=this,{context:a}=o,l=xs(r);if(l&&o.isValidSegDownEl(t.target)){let u=ft(t.target,".fc-event-forced-url"),h=u?u.querySelector("a[href]").href:"";a.emitter.trigger("eventClick",{el:r,event:new $e(o.context,l.eventRange.def,l.eventRange.instance),jsEvent:t,view:a.viewApi}),h&&!t.defaultPrevented&&(window.location.href=h)}},this.destroy=Sv(e.el,"click",".fc-event",this.handleSegClick)}}class aT extends Es{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,r)=>{xs(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",t,r))},this.handleSegLeave=(t,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,r))},this.removeHoverListeners=B_(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,r){let{component:o}=this,{context:a}=o,l=xs(r);(!t||o.isValidSegDownEl(t.target))&&a.emitter.trigger(e,{el:r,event:new $e(a,l.eventRange.def,l.eventRange.instance),jsEvent:t,view:a.viewApi})}}class lT extends Rr{constructor(){super(...arguments),this.buildViewContext=le(GE),this.buildViewPropTransformers=le(uT),this.buildToolbarProps=le(cT),this.headerRef=vt(),this.footerRef=vt(),this.interactionsStore={},this.state={viewLabelId:Yn()},this.registerInteractiveComponent=(e,t)=>{let r=Gk(e,t),l=[oT,aT].concat(this.props.pluginHooks.componentInteractions).map(u=>new u(r));this.interactionsStore[e.uid]=l,zu[e.uid]=r},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let r of t)r.destroy();delete this.interactionsStore[e.uid]}delete zu[e.uid]},this.resizeRunner=new sd(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:t,options:r}=e,o=!1,a="",l;e.isHeightAuto||e.forPrint?a="":r.height!=null?o=!0:r.contentHeight!=null?a=r.contentHeight:l=Math.max(r.aspectRatio,.5);let u=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),h=t.header&&t.header.hasTitle?this.state.viewLabelId:void 0;return C(En.Provider,{value:u},C(Nr,{unit:"day"},p=>{let m=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,p,e.viewTitle);return C(Re,null,t.header&&C(ag,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:h},m)),C(iT,{liquid:o,height:a,aspectRatio:l,labeledById:h},this.renderView(e),this.buildAppendContent()),t.footer&&C(ag,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},m)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let r in t)t[r](e[r],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:r}=t.pluginHooks;for(let o in r)t[o]!==e[o]&&r[o](t[o],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,t=e.pluginHooks.viewContainerAppends.map(r=>r(e));return C(Re,{},...t)}renderView(e){let{pluginHooks:t}=e,{viewSpec:r}=e,o={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},a=this.buildViewPropTransformers(t.viewPropsTransformers);for(let u of a)Object.assign(o,u.transform(o,e));let l=r.component;return C(l,Object.assign({},o))}}function cT(n,e,t,r,o,a){let l=t.build(o,void 0,!1),u=t.buildPrev(e,r,!1),h=t.buildNext(e,r,!1);return{title:a,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:l.isValid&&!bn(e.currentRange,o),isPrevEnabled:u.isValid,isNextEnabled:h.isValid}}function uT(n){return n.map(e=>new e)}let dT=class extends Yk{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;Ca(()=>{Ri(C(qk,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(o,a,l,u)=>(this.setClassNames(o),this.setHeight(a),C(Nv.Provider,{value:this.customContentRenderId},C(lT,Object.assign({isHeightAuto:l,forPrint:u},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Ri(null,this.el),this.setClassNames([]),this.setHeight(""))},R_(e),this.el=e,this.renderRunner=new sd(this.handleRenderRequest),new YA({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Ca(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!Kn(e,this.currentClassNames)){let{classList:t}=this.el;for(let r of this.currentClassNames)t.remove(r);for(let r of e)t.add(r);this.currentClassNames=e}}setHeight(e){bv(this.el,"height",e)}};const hT=parseInt(String(pa.version).split(".")[0]),fT=hT<18;class Cy extends z.Component{constructor(){super(...arguments),this.elRef=z.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const t of this.state.customRenderingMap.values())e.push(pa.createElement(pT,{key:t.id,customRendering:t}));return pa.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new YC;this.handleCustomRendering=e.handle.bind(e),this.calendar=new dT(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{ju.flushSync(()=>{})});let t;e.subscribe(r=>{const o=Date.now(),a=!t;(fT||a||this.isUpdating||this.isUnmounting||o-t<100?Ay:ju.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{t=o,a?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}Cy.act=Ay;class pT extends z.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:t}=e,r=typeof t=="function"?t(e.renderProps):t;return ju.createPortal(r,e.containerEl)}}function Ay(n){n()}class mT extends Xt{constructor(){super(...arguments),this.headerElRef=vt()}renderSimpleLayout(e,t){let{props:r,context:o}=this,a=[],l=Ra(o.options);return e&&a.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),a.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),C(Ni,{elClasses:["fc-daygrid"],viewSpec:o.viewSpec},C(Rd,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:a}))}renderHScrollLayout(e,t,r,o){let a=this.context.pluginHooks.scrollGridImpl;if(!a)throw new Error("No ScrollGrid implementation");let{props:l,context:u}=this,h=!l.forPrint&&Ra(u.options),p=!l.forPrint&&dy(u.options),m=[];return e&&m.push({type:"header",key:"header",isSticky:h,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),m.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),p&&m.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:Vu}]}),C(Ni,{elClasses:["fc-daygrid"],viewSpec:u.viewSpec},C(a,{liquid:!l.isHeightAuto&&!l.forPrint,forPrint:l.forPrint,collapsibleWidth:l.forPrint,colGroups:[{cols:[{span:r,minWidth:o}]}],sections:m}))}}function ha(n,e){let t=[];for(let r=0;r<e;r+=1)t[r]=[];for(let r of n)t[r.row].push(r);return t}function oa(n,e){let t=[];for(let r=0;r<e;r+=1)t[r]=[];for(let r of n)t[r.firstCol].push(r);return t}function lg(n,e){let t=[];if(n){for(let r=0;r<e;r+=1)t[r]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let r of n.segs)t[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)t[r]=null;return t}const Ty=Be({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function Dy(n){let{display:e}=n.eventRange.ui;return e==="list-item"||e==="auto"&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class Ry extends Ce{render(){let{props:e}=this;return C(Nd,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:Ty,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class Ny extends Ce{render(){let{props:e,context:t}=this,{options:r}=t,{seg:o}=e,a=r.eventTimeFormat||Ty,l=Si(o,a,t,!0,e.defaultDisplayEventEnd);return C(qa,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:_d(e.seg,t),defaultGenerator:gT,timeText:l,isResizing:!1,isDateSelecting:!1}))}}function gT(n){return C(Re,null,C("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&C("div",{className:"fc-event-time"},n.timeText),C("div",{className:"fc-event-title"},n.event.title||C(Re,null,"")))}class vT extends Ce{constructor(){super(...arguments),this.compileSegs=le(yT)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return C(my,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let o=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return C(Re,null,t.map(a=>{let l=a.eventRange.instance.instanceId;return C("div",{className:"fc-daygrid-event-harness",key:l,style:{visibility:o[l]?"hidden":""}},Dy(a)?C(Ny,Object.assign({seg:a,isDragging:!1,isSelected:l===e.eventSelection,defaultDisplayEventEnd:!1},xn(a,e.todayRange))):C(Ry,Object.assign({seg:a,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:l===e.eventSelection,defaultDisplayEventEnd:!1},xn(a,e.todayRange))))}))}})}}function yT(n){let e=[],t=[];for(let r of n)e.push(r.seg),r.isVisible||t.push(r.seg);return{allSegs:e,invisibleSegs:t}}const wT=Be({week:"narrow"});class bT extends Xt{constructor(){super(...arguments),this.rootElRef=vt(),this.state={dayNumberId:Yn()},this.handleRootEl=e=>{an(this.rootElRef,e),an(this.props.elRef,e)}}render(){let{context:e,props:t,state:r,rootElRef:o}=this,{options:a,dateEnv:l}=e,{date:u,dateProfile:h}=t;const p=t.showDayNumber&&ST(u,h.currentRange,l);return C(Id,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:xT,date:u,dateProfile:h,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:p,extraRenderProps:t.extraRenderProps},(m,y)=>C("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&C(py,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Ss(e,u,"week"),date:u,defaultFormat:wT}),!y.isDisabled&&(t.showDayNumber||Od(a)||t.forceDayTop)?C("div",{className:"fc-daygrid-day-top"},C(m,{elTag:"a",elClasses:["fc-daygrid-day-number",p&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Ss(e,u)),{id:r.dayNumberId})})):t.showDayNumber?C("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},C("a",{className:"fc-daygrid-day-number"},"")):void 0,C("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,C("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},C(vT,{allDayDate:u,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:o,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),C("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function xT(n){return n.dayNumberText||C(Re,null,"")}function ST(n,e,t){const{start:r,end:o}=e,a=Jn(o,-1),l=t.getYear(r),u=t.getMonth(r),h=t.getYear(a),p=t.getMonth(a);return!(l===h&&u===p)&&(n.valueOf()===r.valueOf()||t.getDay(n)===1&&n.valueOf()<o.valueOf())}function jy(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function Iy(n){return jy(n)+":"+n.lastCol}function _T(n,e,t,r,o,a,l){let u=new CT(T=>{let R=n[T.index].eventRange.instance.instanceId+":"+T.span.start+":"+(T.span.end-1);return o[R]||1});u.allowReslicing=!0,u.strictOrder=r,e===!0||t===!0?(u.maxCoord=a,u.hiddenConsumes=!0):typeof e=="number"?u.maxStackCnt=e:typeof t=="number"&&(u.maxStackCnt=t,u.hiddenConsumes=!0);let h=[],p=[];for(let T=0;T<n.length;T+=1){let R=n[T],N=Iy(R);o[N]!=null?h.push({index:T,span:{start:R.firstCol,end:R.lastCol+1}}):p.push(R)}let m=u.addSegs(h),y=u.toRects(),{singleColPlacements:b,multiColPlacements:w,leftoverMargins:E}=ET(y,n,l),_=[],S=[];for(let T of p){w[T.firstCol].push({seg:T,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let R=T.firstCol;R<=T.lastCol;R+=1)b[R].push({seg:ws(T,R,R+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let T=0;T<l.length;T+=1)_.push(0);for(let T of m){let R=n[T.index],N=T.span;w[N.start].push({seg:ws(R,N.start,N.end,l),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let I=N.start;I<N.end;I+=1)_[I]+=1,b[I].push({seg:ws(R,I,I+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let T=0;T<l.length;T+=1)S.push(E[T]);return{singleColPlacements:b,multiColPlacements:w,moreCnts:_,moreMarginTops:S}}function ET(n,e,t){let r=kT(n,t.length),o=[],a=[],l=[];for(let u=0;u<t.length;u+=1){let h=r[u],p=[],m=0,y=0;for(let w of h){let E=e[w.index];p.push({seg:ws(E,u,u+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:w.levelCoord,marginTop:w.levelCoord-m}),m=w.levelCoord+w.thickness}let b=[];m=0,y=0;for(let w of h){let E=e[w.index],_=w.span.end-w.span.start>1,S=w.span.start===u;y+=w.levelCoord-m,m=w.levelCoord+w.thickness,_?(y+=w.thickness,S&&b.push({seg:ws(E,w.span.start,w.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:w.levelCoord,marginTop:0})):S&&(b.push({seg:ws(E,w.span.start,w.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:w.levelCoord,marginTop:y}),y=0)}o.push(p),a.push(b),l.push(y)}return{singleColPlacements:o,multiColPlacements:a,leftoverMargins:l}}function kT(n,e){let t=[];for(let r=0;r<e;r+=1)t.push([]);for(let r of n)for(let o=r.span.start;o<r.span.end;o+=1)t[o].push(r);return t}function ws(n,e,t,r){if(n.firstCol===e&&n.lastCol===t-1)return n;let o=n.eventRange,a=o.range,l=Zn(a,{start:r[e].date,end:Je(r[t-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:e,lastCol:t-1,eventRange:{def:o.def,ui:Object.assign(Object.assign({},o.ui),{durationEditable:!1}),instance:o.instance,range:l},isStart:n.isStart&&l.start.valueOf()===a.start.valueOf(),isEnd:n.isEnd&&l.end.valueOf()===a.end.valueOf()})}class CT extends Xv{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:r}=this,o=a=>!this.forceHidden[Cr(a)];for(let a=0;a<r.length;a+=1)r[a]=r[a].filter(o);return t}handleInvalidInsertion(e,t,r){const{entriesByLevel:o,forceHidden:a}=this,{touchingEntry:l,touchingLevel:u,touchingLateral:h}=e;if(this.hiddenConsumes&&l){const p=Cr(l);if(!a[p])if(this.allowReslicing){const m=Object.assign(Object.assign({},l),{span:Td(l.span,t.span)}),y=Cr(m);a[y]=!0,o[u][h]=m,r.push(m),this.splitEntry(l,t,r)}else a[p]=!0,r.push(l)}super.handleInvalidInsertion(e,t,r)}}class Oy extends Xt{constructor(){super(...arguments),this.cellElRefs=new wn,this.frameElRefs=new wn,this.fgElRefs=new wn,this.segHarnessRefs=new wn,this.rootElRef=vt(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:r}=this,{options:o}=r,a=e.cells.length,l=oa(e.businessHourSegs,a),u=oa(e.bgEventSegs,a),h=oa(this.getHighlightSegs(),a),p=oa(this.getMirrorSegs(),a),{singleColPlacements:m,multiColPlacements:y,moreCnts:b,moreMarginTops:w}=_T(Sd(e.fgEventSegs,o.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,o.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),E=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return C("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((_,S)=>{let T=this.renderFgSegs(S,e.forPrint?m[S]:y[S],e.todayRange,E),R=this.renderFgSegs(S,AT(p[S],y),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return C(bT,{key:_.key,elRef:this.cellElRefs.createRef(_.key),innerElRef:this.frameElRefs.createRef(_.key),dateProfile:e.dateProfile,date:_.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&S===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:_.extraRenderProps,extraDataAttrs:_.extraDataAttrs,extraClassNames:_.extraClassNames,extraDateSpan:_.extraDateSpan,moreCnt:b[S],moreMarginTop:w[S],singlePlacements:m[S],fgContentElRef:this.fgElRefs.createRef(_.key),fgContent:C(Re,null,C(Re,null,T),C(Re,null,R)),bgContent:C(Re,null,this.renderFillSegs(h[S],"highlight"),this.renderFillSegs(l[S],"non-business"),this.renderFillSegs(u[S],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let r=this.props;this.updateSizing(!Zt(e,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,r,o,a,l,u){let{context:h}=this,{eventSelection:p}=this.props,{framePositions:m}=this.state,y=this.props.cells.length===1,b=a||l||u,w=[];if(m)for(let E of t){let{seg:_}=E,{instanceId:S}=_.eventRange.instance,T=E.isVisible&&!o[S],R=E.isAbsolute,N="",I="";R&&(h.isRtl?(I=0,N=m.lefts[_.lastCol]-m.lefts[_.firstCol]):(N=0,I=m.rights[_.firstCol]-m.rights[_.lastCol])),w.push(C("div",{className:"fc-daygrid-event-harness"+(R?" fc-daygrid-event-harness-abs":""),key:jy(_),ref:b?null:this.segHarnessRefs.createRef(Iy(_)),style:{visibility:T?"":"hidden",marginTop:R?"":E.marginTop,top:R?E.absoluteTop:"",left:N,right:I}},Dy(_)?C(Ny,Object.assign({seg:_,isDragging:a,isSelected:S===p,defaultDisplayEventEnd:y},xn(_,r))):C(Ry,Object.assign({seg:_,isDragging:a,isResizing:l,isDateSelecting:u,isSelected:S===p,defaultDisplayEventEnd:y},xn(_,r)))))}return w}renderFillSegs(e,t){let{isRtl:r}=this.context,{todayRange:o}=this.props,{framePositions:a}=this.state,l=[];if(a)for(let u of e){let h=r?{right:0,left:a.lefts[u.lastCol]-a.lefts[u.firstCol]}:{left:0,right:a.rights[u.firstCol]-a.rights[u.lastCol]};l.push(C("div",{key:qv(u.eventRange),className:"fc-daygrid-bg-harness",style:h},t==="bg-event"?C(hy,Object.assign({seg:u},xn(u,o))):fy(t)))}return C(Re,{},...l)}updateSizing(e){let{props:t,state:r,frameElRefs:o}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let h=t.cells.map(p=>o.currentMap[p.key]);if(h.length){let p=this.rootElRef.current,m=new _s(p,h,!0,!1);(!r.framePositions||!r.framePositions.similarTo(m))&&this.setState({framePositions:new _s(p,h,!0,!1)})}}const a=this.state.segHeights,l=this.querySegHeights(),u=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},a),l),maxContentHeight:u?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let r in e){let o=Math.round(e[r].getBoundingClientRect().height);t[r]=Math.max(t[r]||0,o)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],r=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}Oy.addStateEquality({segHeights:Zt});function AT(n,e){if(!n.length)return[];let t=TT(e);return n.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:t[r.eventRange.instance.instanceId],marginTop:0}))}function TT(n){let e={};for(let t of n)for(let r of t)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}class DT extends Xt{constructor(){super(...arguments),this.splitBusinessHourSegs=le(ha),this.splitBgEventSegs=le(RT),this.splitFgEventSegs=le(ha),this.splitDateSelectionSegs=le(ha),this.splitEventDrag=le(lg),this.splitEventResize=le(lg),this.rowRefs=new wn}render(){let{props:e,context:t}=this,r=e.cells.length,o=this.splitBusinessHourSegs(e.businessHourSegs,r),a=this.splitBgEventSegs(e.bgEventSegs,r),l=this.splitFgEventSegs(e.fgEventSegs,r),u=this.splitDateSelectionSegs(e.dateSelectionSegs,r),h=this.splitEventDrag(e.eventDrag,r),p=this.splitEventResize(e.eventResize,r),m=r>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return C(Nr,{unit:"day"},(y,b)=>C(Re,null,e.cells.map((w,E)=>C(Oy,{ref:this.rowRefs.createRef(E),key:w.length?w[0].date.toISOString():E,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:b,dateProfile:e.dateProfile,cells:w,renderIntro:e.renderRowIntro,businessHourSegs:o[E],eventSelection:e.eventSelection,bgEventSegs:a[E],fgEventSegs:l[E],dateSelectionSegs:u[E],eventDrag:h[E],eventResize:p[E],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:m,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new _s(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new _s(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:r,rowPositions:o}=this,a=r.leftToIndex(e),l=o.topToIndex(t);if(l!=null&&a!=null){let u=this.props.cells[l][a];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(l,a),allDay:!0},u.extraDateSpan),dayEl:this.getCellEl(l,a),rect:{left:r.lefts[a],right:r.rights[a],top:o.tops[l],bottom:o.bottoms[l]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let r=this.props.cells[e][t].date,o=Je(r,1);return{start:r,end:o}}}function RT(n,e){return ha(n.filter(NT),e)}function NT(n){return n.eventRange.def.allDay}class jT extends Xt{constructor(){super(...arguments),this.elRef=vt(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:r,expandRows:o}=e,a=r===!0||t===!0;a&&!o&&(a=!1,t=null,r=null);let l=["fc-daygrid-body",a?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",o?"":"fc-daygrid-body-natural"];return C("div",{ref:this.elRef,className:l.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},C("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:o?e.clientHeight:""}},e.colGroupNode,C("tbody",{role:"presentation"},C(DT,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=IT(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),r=t.closest(".fc-scroller"),o=e.getBoundingClientRect().top-t.getBoundingClientRect().top;r.scrollTop=o?o+1:0}this.needsScrollReset=!1}}}function IT(n,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=n.querySelector(`[data-date="${gE(e.currentDate)}-01"]`)),t||(t=n.querySelector(`[data-date="${Oi(e.currentDate)}"]`)),t}class OT extends iy{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class My extends Xt{constructor(){super(...arguments),this.slicer=new OT,this.tableRef=vt()}render(){let{props:e,context:t}=this;return C(jT,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class MT extends mT{constructor(){super(...arguments),this.buildDayTableModel=le(PT),this.headerRef=vt(),this.tableRef=vt()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:r}=this,o=this.buildDayTableModel(r.dateProfile,t),a=e.dayHeaders&&C(ny,{ref:this.headerRef,dateProfile:r.dateProfile,dates:o.headerDates,datesRepDistinctDays:o.rowCnt===1}),l=u=>C(My,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:o,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:u.tableColGroupNode,tableMinWidth:u.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:u.clientWidth,clientHeight:u.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(a,l,o.colCnt,e.dayMinWidth):this.renderSimpleLayout(a,l)}}function PT(n,e){let t=new ry(n.renderRange,e);return new sy(t,/year|month|week/.test(n.currentRangeUnit))}class LT extends Ov{buildRenderRange(e,t,r){let o=super.buildRenderRange(e,t,r),{props:a}=this;return UT({currentRange:o,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:a.fixedWeekCount,dateEnv:a.dateEnv})}}function UT(n){let{dateEnv:e,currentRange:t}=n,{start:r,end:o}=t,a;if(n.snapToWeek&&(r=e.startOfWeek(r),a=e.startOfWeek(o),a.valueOf()!==o.valueOf()&&(o=Um(a,1))),n.fixedWeekCount){let l=e.startOfWeek(e.startOfMonth(Je(t.end,-1))),u=Math.ceil(iE(l,o));o=Um(o,6-u)}return{start:r,end:o}}var BT=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';Ha(BT);var HT=cn({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:MT,dateProfileGeneratorClass:LT},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class $T extends eC{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?Rk(e)?["timed","allDay"]:["allDay"]:["timed"]}}const zT=Be({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function Py(n){let e=["fc-timegrid-slot","fc-timegrid-slot-label",n.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return C(En.Consumer,null,t=>{if(!n.isLabeled)return C("td",{className:e.join(" "),"data-time":n.isoTimeStr});let{dateEnv:r,options:o,viewApi:a}=t,l=o.slotLabelFormat==null?zT:Array.isArray(o.slotLabelFormat)?Be(o.slotLabelFormat[0]):Be(o.slotLabelFormat),u={level:0,time:n.time,date:r.toDate(n.date),view:a,text:r.format(n.date,l)};return C(pt,{elTag:"td",elClasses:e,elAttrs:{"data-time":n.isoTimeStr},renderProps:u,generatorName:"slotLabelContent",customGenerator:o.slotLabelContent,defaultGenerator:FT,classNameGenerator:o.slotLabelClassNames,didMount:o.slotLabelDidMount,willUnmount:o.slotLabelWillUnmount},h=>C("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},C(h,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function FT(n){return n.text}class WT extends Ce{render(){return this.props.slatMetas.map(e=>C("tr",{key:e.key},C(Py,Object.assign({},e))))}}const VT=Be({week:"short"}),qT=5;class GT extends Xt{constructor(){super(...arguments),this.allDaySplitter=new $T,this.headerElRef=vt(),this.rootElRef=vt(),this.scrollerElRef=vt(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let t=this.scrollerElRef.current;t&&(t.scrollTop=e)},this.renderHeadAxis=(e,t="")=>{let{options:r}=this.context,{dateProfile:o}=this.props,a=o.renderRange,u=Xn(a.start,a.end)===1?Ss(this.context,a.start,"week"):{};return r.weekNumbers&&e==="day"?C(py,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:a.start,defaultFormat:VT},h=>C("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:t}},C(h,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:u}))):C("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},C("div",{className:"fc-timegrid-axis-frame",style:{height:t}}))},this.renderTableRowAxis=e=>{let{options:t,viewApi:r}=this.context,o={text:t.allDayText,view:r};return C(pt,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:o,generatorName:"allDayContent",customGenerator:t.allDayContent,defaultGenerator:QT,classNameGenerator:t.allDayClassNames,didMount:t.allDayDidMount,willUnmount:t.allDayWillUnmount},a=>C("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},C(a,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,t,r){let{context:o,props:a}=this,l=[],u=Ra(o.options);return e&&l.push({type:"header",key:"header",isSticky:u,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),t&&(l.push({type:"body",key:"all-day",chunk:{content:t}}),l.push({type:"body",key:"all-day-divider",outerContent:C("tr",{role:"presentation",className:"fc-scrollgrid-section"},C("td",{className:"fc-timegrid-divider "+o.theme.getClass("tableCellShaded")}))})),l.push({type:"body",key:"body",liquid:!0,expandRows:!!o.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:r}}),C(Ni,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:o.viewSpec},C(Rd,{liquid:!a.isHeightAuto&&!a.forPrint,collapsibleWidth:a.forPrint,cols:[{width:"shrink"}],sections:l}))}renderHScrollLayout(e,t,r,o,a,l,u){let h=this.context.pluginHooks.scrollGridImpl;if(!h)throw new Error("No ScrollGrid implementation");let{context:p,props:m}=this,y=!m.forPrint&&Ra(p.options),b=!m.forPrint&&dy(p.options),w=[];e&&w.push({type:"header",key:"header",isSticky:y,syncRowHeights:!0,chunks:[{key:"axis",rowContent:_=>C("tr",{role:"presentation"},this.renderHeadAxis("day",_.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),t&&(w.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:_=>C("tr",{role:"presentation"},this.renderTableRowAxis(_.rowSyncHeights[0]))},{key:"cols",content:t}]}),w.push({key:"all-day-divider",type:"body",outerContent:C("tr",{role:"presentation",className:"fc-scrollgrid-section"},C("td",{colSpan:2,className:"fc-timegrid-divider "+p.theme.getClass("tableCellShaded")}))}));let E=p.options.nowIndicator;return w.push({type:"body",key:"body",liquid:!0,expandRows:!!p.options.expandRows,chunks:[{key:"axis",content:_=>C("div",{className:"fc-timegrid-axis-chunk"},C("table",{"aria-hidden":!0,style:{height:_.expandRows?_.clientHeight:""}},_.tableColGroupNode,C("tbody",null,C(WT,{slatMetas:l}))),C("div",{className:"fc-timegrid-now-indicator-container"},C(Nr,{unit:E?"minute":"day"},S=>{let T=E&&u&&u.safeComputeTop(S);return typeof T=="number"?C(jd,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:T},isAxis:!0,date:S}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:r}]}),b&&w.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:Vu},{key:"cols",content:Vu}]}),C(Ni,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:p.viewSpec},C(h,{liquid:!m.isHeightAuto&&!m.forPrint,forPrint:m.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:o,minWidth:a}]}],sections:w}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:t}=this.context.options;return(e===!0||t===!0)&&(e=void 0,t=qT),{dayMaxEvents:e,dayMaxEventRows:t}}}function QT(n){return n.text}class YT{constructor(e,t,r){this.positions=e,this.dateProfile=t,this.slotDuration=r}safeComputeTop(e){let{dateProfile:t}=this;if(bn(t.currentRange,e)){let r=Ie(e),o=e.valueOf()-r.valueOf();if(o>=Jt(t.slotMinTime)&&o<Jt(t.slotMaxTime))return this.computeTimeTop(_e(o))}return null}computeDateTop(e,t){return t||(t=Ie(e)),this.computeTimeTop(_e(e.valueOf()-t.valueOf()))}computeTimeTop(e){let{positions:t,dateProfile:r}=this,o=t.els.length,a=(e.milliseconds-Jt(r.slotMinTime))/Jt(this.slotDuration),l,u;return a=Math.max(0,a),a=Math.min(o,a),l=Math.floor(a),l=Math.min(l,o-1),u=a-l,t.tops[l]+t.getHeight(l)*u}}class KT extends Ce{render(){let{props:e,context:t}=this,{options:r}=t,{slatElRefs:o}=e;return C("tbody",null,e.slatMetas.map((a,l)=>{let u={time:a.time,date:t.dateEnv.toDate(a.date),view:t.viewApi};return C("tr",{key:a.key,ref:o.createRef(a.key)},e.axis&&C(Py,Object.assign({},a)),C(pt,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!a.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":a.isoTimeStr},renderProps:u,generatorName:"slotLaneContent",customGenerator:r.slotLaneContent,classNameGenerator:r.slotLaneClassNames,didMount:r.slotLaneDidMount,willUnmount:r.slotLaneWillUnmount}))}))}}class JT extends Ce{constructor(){super(...arguments),this.rootElRef=vt(),this.slatElRefs=new wn}render(){let{props:e,context:t}=this;return C("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},C("table",{"aria-hidden":!0,className:t.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,C(KT,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:t}=this;t.onCoords&&t.clientWidth!==null&&this.rootElRef.current.offsetHeight&&t.onCoords(new YT(new _s(this.rootElRef.current,ZT(this.slatElRefs.currentMap,t.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function ZT(n,e){return e.map(t=>n[t.key])}function pi(n,e){let t=[],r;for(r=0;r<e;r+=1)t.push([]);if(n)for(r=0;r<n.length;r+=1)t[n[r].col].push(n[r]);return t}function cg(n,e){let t=[];if(n){for(let r=0;r<e;r+=1)t[r]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let r of n.segs)t[r.col].segs.push(r)}else for(let r=0;r<e;r+=1)t[r]=null;return t}class XT extends Ce{render(){let{props:e}=this;return C(my,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>Uy(e.hiddenSegs,e),defaultGenerator:e1,forceTimed:!0},t=>C(t,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function e1(n){return n.shortText}function t1(n,e,t){let r=new Xv;e!=null&&(r.strictOrder=e),t!=null&&(r.maxStackCnt=t);let o=r.addSegs(n),a=fC(o),l=n1(r);return l=o1(l,1),{segRects:a1(l),hiddenGroups:a}}function n1(n){const{entriesByLevel:e}=n,t=Pd((r,o)=>r+":"+o,(r,o)=>{let a=i1(n,r,o),l=ug(a,t),u=e[r][o];return[Object.assign(Object.assign({},u),{nextLevelNodes:l[0]}),u.thickness+l[1]]});return ug(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,t)[0]}function ug(n,e){if(!n)return[[],0];let{level:t,lateralStart:r,lateralEnd:o}=n,a=r,l=[];for(;a<o;)l.push(e(t,a)),a+=1;return l.sort(r1),[l.map(s1),l[0][1]]}function r1(n,e){return e[1]-n[1]}function s1(n){return n[0]}function i1(n,e,t){let{levelCoords:r,entriesByLevel:o}=n,a=o[e][t],l=r[e]+a.thickness,u=r.length,h=e;for(;h<u&&r[h]<l;h+=1);for(;h<u;h+=1){let p=o[h],m,y=Wu(p,a.span.start,Fu),b=y[0]+y[1],w=b;for(;(m=p[w])&&m.span.start<a.span.end;)w+=1;if(b<w)return{level:h,lateralStart:b,lateralEnd:w}}return null}function o1(n,e){const t=Pd((r,o,a)=>Cr(r),(r,o,a)=>{let{nextLevelNodes:l,thickness:u}=r,h=u+a,p=u/h,m,y=[];if(!l.length)m=e;else for(let w of l)if(m===void 0){let E=t(w,o,h);m=E[0],y.push(E[1])}else{let E=t(w,m,0);y.push(E[1])}let b=(m-o)*p;return[m-b,Object.assign(Object.assign({},r),{thickness:b,nextLevelNodes:y})]});return n.map(r=>t(r,0,0)[1])}function a1(n){let e=[];const t=Pd((o,a,l)=>Cr(o),(o,a,l)=>{let u=Object.assign(Object.assign({},o),{levelCoord:a,stackDepth:l,stackForward:0});return e.push(u),u.stackForward=r(o.nextLevelNodes,a+o.thickness,l+1)+1});function r(o,a,l){let u=0;for(let h of o)u=Math.max(t(h,a,l),u);return u}return r(n,0,0),e}function Pd(n,e){const t={};return(...r)=>{let o=n(...r);return o in t?t[o]:t[o]=e(...r)}}function dg(n,e,t=null,r=0){let o=[];if(t)for(let a=0;a<n.length;a+=1){let l=n[a],u=t.computeDateTop(l.start,e),h=Math.max(u+(r||0),t.computeDateTop(l.end,e));o.push({start:Math.round(u),end:Math.round(h)})}return o}function l1(n,e,t,r){let o=[],a=[];for(let p=0;p<n.length;p+=1){let m=e[p];m?o.push({index:p,thickness:1,span:m}):a.push(n[p])}let{segRects:l,hiddenGroups:u}=t1(o,t,r),h=[];for(let p of l)h.push({seg:n[p.index],rect:p});for(let p of a)h.push({seg:p,rect:null});return{segPlacements:h,hiddenGroups:u}}const c1=Be({hour:"numeric",minute:"2-digit",meridiem:!1});class Ly extends Ce{render(){return C(Nd,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:c1}))}}class u1 extends Ce{constructor(){super(...arguments),this.sortEventSegs=le(Sd)}render(){let{props:e,context:t}=this,{options:r}=t,o=r.selectMirror,a=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||o&&e.dateSelectionSegs||[],l=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},u=this.sortEventSegs(e.fgEventSegs,r.eventOrder);return C(Id,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},h=>C("div",{className:"fc-timegrid-col-frame"},C("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),C("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(u,l,!1,!1,!1)),C("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(a,{},!!e.eventDrag,!!e.eventResize,!!o,"mirror")),C("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),Od(r)&&C(h,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,t,r,o,a,l){let{props:u}=this;return u.forPrint?Uy(e,u):this.renderPositionedFgSegs(e,t,r,o,a,l)}renderPositionedFgSegs(e,t,r,o,a,l){let{eventMaxStack:u,eventShortHeight:h,eventOrderStrict:p,eventMinHeight:m}=this.context.options,{date:y,slatCoords:b,eventSelection:w,todayRange:E,nowDate:_}=this.props,S=r||o||a,T=dg(e,y,b,m),{segPlacements:R,hiddenGroups:N}=l1(e,T,p,u);return C(Re,null,this.renderHiddenGroups(N,e),R.map(I=>{let{seg:$,rect:A}=I,M=$.eventRange.instance.instanceId,H=S||!!(!t[M]&&A),G=wu(A&&A.span),te=!S&&A?this.computeSegHStyle(A):{left:0,right:0},ee=!!A&&A.stackForward>0,ve=!!A&&A.span.end-A.span.start<h;return C("div",{className:"fc-timegrid-event-harness"+(ee?" fc-timegrid-event-harness-inset":""),key:l||M,style:Object.assign(Object.assign({visibility:H?"":"hidden"},G),te)},C(Ly,Object.assign({seg:$,isDragging:r,isResizing:o,isDateSelecting:a,isSelected:M===w,isShort:ve},xn($,E,_))))}))}renderHiddenGroups(e,t){let{extraDateSpan:r,dateProfile:o,todayRange:a,nowDate:l,eventSelection:u,eventDrag:h,eventResize:p}=this.props;return C(Re,null,e.map(m=>{let y=wu(m.span),b=d1(m.entries,t);return C(XT,{key:Cv(gy(b)),hiddenSegs:b,top:y.top,bottom:y.bottom,extraDateSpan:r,dateProfile:o,todayRange:a,nowDate:l,eventSelection:u,eventDrag:h,eventResize:p})}))}renderFillSegs(e,t){let{props:r,context:o}=this,l=dg(e,r.date,r.slatCoords,o.options.eventMinHeight).map((u,h)=>{let p=e[h];return C("div",{key:qv(p.eventRange),className:"fc-timegrid-bg-harness",style:wu(u)},t==="bg-event"?C(hy,Object.assign({seg:p},xn(p,r.todayRange,r.nowDate))):fy(t))});return C(Re,null,l)}renderNowIndicator(e){let{slatCoords:t,date:r}=this.props;return t?e.map((o,a)=>C(jd,{key:a,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:t.computeDateTop(o.start,r)},isAxis:!1,date:r})):null}computeSegHStyle(e){let{isRtl:t,options:r}=this.context,o=r.slotEventOverlap,a=e.levelCoord,l=e.levelCoord+e.thickness,u,h;o&&(l=Math.min(1,a+(l-a)*2)),t?(u=1-l,h=a):(u=a,h=1-l);let p={zIndex:e.stackDepth+1,left:u*100+"%",right:h*100+"%"};return o&&!e.stackForward&&(p[t?"marginLeft":"marginRight"]=20),p}}function Uy(n,{todayRange:e,nowDate:t,eventSelection:r,eventDrag:o,eventResize:a}){let l=(o?o.affectedInstances:null)||(a?a.affectedInstances:null)||{};return C(Re,null,n.map(u=>{let h=u.eventRange.instance.instanceId;return C("div",{key:h,style:{visibility:l[h]?"hidden":""}},C(Ly,Object.assign({seg:u,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:h===r,isShort:!1},xn(u,e,t))))}))}function wu(n){return n?{top:n.start,bottom:-n.end}:{top:"",bottom:""}}function d1(n,e){return n.map(t=>e[t.index])}class h1 extends Ce{constructor(){super(...arguments),this.splitFgEventSegs=le(pi),this.splitBgEventSegs=le(pi),this.splitBusinessHourSegs=le(pi),this.splitNowIndicatorSegs=le(pi),this.splitDateSelectionSegs=le(pi),this.splitEventDrag=le(cg),this.splitEventResize=le(cg),this.rootElRef=vt(),this.cellElRefs=new wn}render(){let{props:e,context:t}=this,r=t.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),o=e.cells.length,a=this.splitFgEventSegs(e.fgEventSegs,o),l=this.splitBgEventSegs(e.bgEventSegs,o),u=this.splitBusinessHourSegs(e.businessHourSegs,o),h=this.splitNowIndicatorSegs(e.nowIndicatorSegs,o),p=this.splitDateSelectionSegs(e.dateSelectionSegs,o),m=this.splitEventDrag(e.eventDrag,o),y=this.splitEventResize(e.eventResize,o);return C("div",{className:"fc-timegrid-cols",ref:this.rootElRef},C("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,C("tbody",{role:"presentation"},C("tr",{role:"row"},e.axis&&C("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},C("div",{className:"fc-timegrid-col-frame"},C("div",{className:"fc-timegrid-now-indicator-container"},typeof r=="number"&&C(jd,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:r},isAxis:!0,date:e.nowDate})))),e.cells.map((b,w)=>C(u1,{key:b.key,elRef:this.cellElRefs.createRef(b.key),dateProfile:e.dateProfile,date:b.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:b.extraRenderProps,extraDataAttrs:b.extraDataAttrs,extraClassNames:b.extraClassNames,extraDateSpan:b.extraDateSpan,fgEventSegs:a[w],bgEventSegs:l[w],businessHourSegs:u[w],nowIndicatorSegs:h[w],dateSelectionSegs:p[w],eventDrag:m[w],eventResize:y[w],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new _s(this.rootElRef.current,f1(this.cellElRefs.currentMap,e.cells),!0,!1))}}function f1(n,e){return e.map(t=>n[t.key])}class p1 extends Xt{constructor(){super(...arguments),this.processSlotOptions=le(m1),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:t}=this.props,{slatCoords:r}=this.state;if(t&&r){if(e.time){let o=r.computeTimeTop(e.time);o=Math.ceil(o),o&&(o+=1),t(o)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:t}=this;return C("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},C(JT,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),C(h1,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:t.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,t){let{dateEnv:r,options:o}=this.context,{colCoords:a}=this,{dateProfile:l}=this.props,{slatCoords:u}=this.state,{snapDuration:h,snapsPerSlot:p}=this.processSlotOptions(this.props.slotDuration,o.snapDuration),m=a.leftToIndex(e),y=u.positions.topToIndex(t);if(m!=null&&y!=null){let b=this.props.cells[m],w=u.positions.tops[y],E=u.positions.getHeight(y),_=(t-w)/E,S=Math.floor(_*p),T=y*p+S,R=this.props.cells[m].date,N=Pu(l.slotMinTime,tE(h,T)),I=r.add(R,N),$=r.add(I,h);return{dateProfile:l,dateSpan:Object.assign({range:{start:I,end:$},allDay:!1},b.extraDateSpan),dayEl:a.els[m],rect:{left:a.lefts[m],right:a.rights[m],top:w,bottom:w+E},layer:0}}return null}}function m1(n,e){let t=e||n,r=ld(n,t);return r===null&&(t=n,r=1),{snapDuration:t,snapsPerSlot:r}}class g1 extends iy{sliceRange(e,t){let r=[];for(let o=0;o<t.length;o+=1){let a=Zn(e,t[o]);a&&r.push({start:a.start,end:a.end,isStart:a.start.valueOf()===e.start.valueOf(),isEnd:a.end.valueOf()===e.end.valueOf(),col:o})}return r}}class v1 extends Xt{constructor(){super(...arguments),this.buildDayRanges=le(y1),this.slicer=new g1,this.timeColsRef=vt()}render(){let{props:e,context:t}=this,{dateProfile:r,dayTableModel:o}=e,{nowIndicator:a,nextDayThreshold:l}=t.options,u=this.buildDayRanges(o,r,t.dateEnv);return C(Nr,{unit:a?"minute":"day"},(h,p)=>C(p1,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,r,null,t,u),{forPrint:e.forPrint,axis:e.axis,dateProfile:r,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:o.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:h,nowIndicatorSegs:a&&this.slicer.sliceNowDate(h,r,l,t,u),todayRange:p,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function y1(n,e,t){let r=[];for(let o of n.headerDates)r.push({start:t.add(o,e.slotMinTime),end:t.add(o,e.slotMaxTime)});return r}const hg=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function w1(n,e,t,r,o){let a=new Date(0),l=n,u=_e(0),h=t||b1(r),p=[];for(;Jt(l)<Jt(e);){let m=o.add(a,l),y=ld(u,h)!==null;p.push({date:m,time:l,key:m.toISOString(),isoTimeStr:vE(m),isLabeled:y}),l=Pu(l,r),u=Pu(u,r)}return p}function b1(n){let e,t,r;for(e=hg.length-1;e>=0;e-=1)if(t=_e(hg[e]),r=ld(t,n),r!==null&&r>1)return t;return n}class x1 extends GT{constructor(){super(...arguments),this.buildTimeColsModel=le(S1),this.buildSlatMetas=le(w1)}render(){let{options:e,dateEnv:t,dateProfileGenerator:r}=this.context,{props:o}=this,{dateProfile:a}=o,l=this.buildTimeColsModel(a,r),u=this.allDaySplitter.splitProps(o),h=this.buildSlatMetas(a.slotMinTime,a.slotMaxTime,e.slotLabelInterval,e.slotDuration,t),{dayMinWidth:p}=e,m=!p,y=p,b=e.dayHeaders&&C(ny,{dates:l.headerDates,dateProfile:a,datesRepDistinctDays:!0,renderIntro:m?this.renderHeadAxis:null}),w=e.allDaySlot!==!1&&(_=>C(My,Object.assign({},u.allDay,{dateProfile:a,dayTableModel:l,nextDayThreshold:e.nextDayThreshold,tableMinWidth:_.tableMinWidth,colGroupNode:_.tableColGroupNode,renderRowIntro:m?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:_.clientWidth,clientHeight:_.clientHeight,forPrint:o.forPrint},this.getAllDayMaxEventProps()))),E=_=>C(v1,Object.assign({},u.timed,{dayTableModel:l,dateProfile:a,axis:m,slotDuration:e.slotDuration,slatMetas:h,forPrint:o.forPrint,tableColGroupNode:_.tableColGroupNode,tableMinWidth:_.tableMinWidth,clientWidth:_.clientWidth,clientHeight:_.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:_.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return y?this.renderHScrollLayout(b,w,E,l.colCnt,p,h,this.state.slatCoords):this.renderSimpleLayout(b,w,E)}}function S1(n,e){let t=new ry(n.renderRange,e);return new sy(t,!1)}var _1='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';Ha(_1);const E1={allDaySlot:Boolean};var k1=cn({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:E1,views:{timeGrid:{component:x1,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});class C1 extends Ce{constructor(){super(...arguments),this.state={textId:Yn()}}render(){let{theme:e,dateEnv:t,options:r,viewApi:o}=this.context,{cellId:a,dayDate:l,todayRange:u}=this.props,{textId:h}=this.state,p=kd(l,u),m=r.listDayFormat?t.format(l,r.listDayFormat):"",y=r.listDaySideFormat?t.format(l,r.listDaySideFormat):"",b=Object.assign({date:t.toDate(l),view:o,textId:h,text:m,sideText:y,navLinkAttrs:Ss(this.context,l),sideNavLinkAttrs:Ss(this.context,l,"day",!1)},p);return C(pt,{elTag:"tr",elClasses:["fc-list-day",...Va(p,e)],elAttrs:{"data-date":Oi(l)},renderProps:b,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:A1,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},w=>C("th",{scope:"colgroup",colSpan:3,id:a,"aria-labelledby":h},C(w,{elTag:"div",elClasses:["fc-list-day-cushion",e.getClass("tableCellShaded")]})))}}function A1(n){return C(Re,null,n.text&&C("a",Object.assign({id:n.textId,className:"fc-list-day-text"},n.navLinkAttrs),n.text),n.sideText&&C("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},n.sideNavLinkAttrs),n.sideText))}const T1=Be({hour:"numeric",minute:"2-digit",meridiem:"short"});class D1 extends Ce{render(){let{props:e,context:t}=this,{options:r}=t,{seg:o,timeHeaderId:a,eventHeaderId:l,dateHeaderId:u}=e,h=r.eventTimeFormat||T1;return C(qa,Object.assign({},e,{elTag:"tr",elClasses:["fc-list-event",o.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>R1(o,t),seg:o,timeText:"",disableDragging:!0,disableResizing:!0}),(p,m)=>C(Re,null,N1(o,h,t,a,u),C("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},C("span",{className:"fc-list-event-dot",style:{borderColor:m.borderColor||m.backgroundColor}})),C(p,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${l} ${u}`}})))}}function R1(n,e){let t=_d(n,e);return C("a",Object.assign({},t),n.eventRange.def.title)}function N1(n,e,t,r,o){let{options:a}=t;if(a.displayEventTime!==!1){let l=n.eventRange.def,u=n.eventRange.instance,h=!1,p;if(l.allDay?h=!0:rk(n.eventRange.range)?n.isStart?p=Si(n,e,t,null,null,u.range.start,n.end):n.isEnd?p=Si(n,e,t,null,null,n.start,u.range.end):h=!0:p=Si(n,e,t),h){let m={text:t.options.allDayText,view:t.viewApi};return C(pt,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${r} ${o}`},renderProps:m,generatorName:"allDayContent",customGenerator:a.allDayContent,defaultGenerator:j1,classNameGenerator:a.allDayClassNames,didMount:a.allDayDidMount,willUnmount:a.allDayWillUnmount})}return C("td",{className:"fc-list-event-time"},p)}return null}function j1(n){return n.text}let I1=class extends Xt{constructor(){super(...arguments),this.computeDateVars=le(M1),this.eventStoreToSegs=le(this._eventStoreToSegs),this.state={timeHeaderId:Yn(),eventHeaderId:Yn(),dateHeaderIdRoot:Yn()},this.setRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:e,context:t}=this,{dayDates:r,dayRanges:o}=this.computeDateVars(e.dateProfile),a=this.eventStoreToSegs(e.eventStore,e.eventUiBases,o);return C(Ni,{elRef:this.setRootEl,elClasses:["fc-list",t.theme.getClass("table"),t.options.stickyHeaderDates!==!1?"fc-list-sticky":""],viewSpec:t.viewSpec},C(cy,{liquid:!e.isHeightAuto,overflowX:e.isHeightAuto?"visible":"hidden",overflowY:e.isHeightAuto?"visible":"auto"},a.length>0?this.renderSegList(a,r):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:e,viewApi:t}=this.context,r={text:e.noEventsText,view:t};return C(pt,{elTag:"div",elClasses:["fc-list-empty"],renderProps:r,generatorName:"noEventsContent",customGenerator:e.noEventsContent,defaultGenerator:O1,classNameGenerator:e.noEventsClassNames,didMount:e.noEventsDidMount,willUnmount:e.noEventsWillUnmount},o=>C(o,{elTag:"div",elClasses:["fc-list-empty-cushion"]}))}renderSegList(e,t){let{theme:r,options:o}=this.context,{timeHeaderId:a,eventHeaderId:l,dateHeaderIdRoot:u}=this.state,h=P1(e);return C(Nr,{unit:"day"},(p,m)=>{let y=[];for(let b=0;b<h.length;b+=1){let w=h[b];if(w){let E=Oi(t[b]),_=u+"-"+E;y.push(C(C1,{key:E,cellId:_,dayDate:t[b],todayRange:m})),w=Sd(w,o.eventOrder);for(let S of w)y.push(C(D1,Object.assign({key:E+":"+S.eventRange.instance.instanceId,seg:S,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:a,eventHeaderId:l,dateHeaderId:_},xn(S,m,p))))}}return C("table",{className:"fc-list-table "+r.getClass("table")},C("thead",null,C("tr",null,C("th",{scope:"col",id:a},o.timeHint),C("th",{scope:"col","aria-hidden":!0}),C("th",{scope:"col",id:l},o.eventHint))),C("tbody",null,y))})}_eventStoreToSegs(e,t,r){return this.eventRangesToSegs($u(e,t,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,r)}eventRangesToSegs(e,t){let r=[];for(let o of e)r.push(...this.eventRangeToSegs(o,t));return r}eventRangeToSegs(e,t){let{dateEnv:r}=this.context,{nextDayThreshold:o}=this.context.options,a=e.range,l=e.def.allDay,u,h,p,m=[];for(u=0;u<t.length;u+=1)if(h=Zn(a,t[u]),h&&(p={component:this,eventRange:e,start:h.start,end:h.end,isStart:e.isStart&&h.start.valueOf()===a.start.valueOf(),isEnd:e.isEnd&&h.end.valueOf()===a.end.valueOf(),dayIndex:u},m.push(p),!p.isEnd&&!l&&u+1<t.length&&a.end<r.add(t[u+1].start,o))){p.end=a.end,p.isEnd=!0;break}return m}};function O1(n){return n.text}function M1(n){let e=Ie(n.renderRange.start),t=n.renderRange.end,r=[],o=[];for(;e<t;)r.push(e),o.push({start:e,end:Je(e,1)}),e=Je(e,1);return{dayDates:r,dayRanges:o}}function P1(n){let e=[],t,r;for(t=0;t<n.length;t+=1)r=n[t],(e[r.dayIndex]||(e[r.dayIndex]=[])).push(r);return e}var L1=':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}';Ha(L1);const U1={listDayFormat:fg,listDaySideFormat:fg,noEventsClassNames:U,noEventsContent:U,noEventsDidMount:U,noEventsWillUnmount:U};function fg(n){return n===!1?null:Be(n)}var B1=cn({name:"@fullcalendar/list",optionRefiners:U1,views:{list:{component:I1,buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});Dd.touchMouseIgnoreWait=500;let Gu=0,Na=0,Qu=!1;class By{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=t=>{if(!this.shouldIgnoreMouse()&&H1(t)&&this.tryStart(t)){let r=this.createEventFromMouse(t,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=t=>{let r=this.createEventFromMouse(t);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=t=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(t)),this.cleanup()},this.handleTouchStart=t=>{if(this.tryStart(t)){this.isTouchDragging=!0;let r=this.createEventFromTouch(t,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let o=t.target;this.shouldIgnoreMove||o.addEventListener("touchmove",this.handleTouchMove),o.addEventListener("touchend",this.handleTouchEnd),o.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=t=>{let r=this.createEventFromTouch(t);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=t=>{if(this.isDragging){let r=t.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(t)),this.cleanup(),this.isTouchDragging=!1,$1()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=t=>{if(!this.shouldIgnoreMove){let r=window.scrollX-this.prevScrollX+this.prevPageX,o=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:t,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:o,deltaX:r-this.origPageX,deltaY:o-this.origPageY})}},this.containerEl=e,this.emitter=new Wa,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),z1()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),F1()}tryStart(e){let t=this.querySubjectEl(e),r=e.target;return t&&(!this.handleSelector||ft(r,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){Qu=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?ft(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return Gu||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Qu=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let r=0,o=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,o=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:o}}createEventFromTouch(e,t){let r=e.touches,o,a,l=0,u=0;return r&&r.length?(o=r[0].pageX,a=r[0].pageY):(o=e.pageX,a=e.pageY),t?(this.origPageX=o,this.origPageY=a):(l=o-this.origPageX,u=a-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:o,pageY:a,deltaX:l,deltaY:u}}}function H1(n){return n.button===0&&!n.ctrlKey}function $1(){Gu+=1,setTimeout(()=>{Gu-=1},Dd.touchMouseIgnoreWait)}function z1(){Na+=1,Na===1&&window.addEventListener("touchmove",Hy,{passive:!1})}function F1(){Na-=1,Na||window.removeEventListener("touchmove",Hy,{passive:!1})}function Hy(n){Qu&&n.preventDefault()}class W1{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=r-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let r=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(e,t){let r=this.mirrorEl,o=this.sourceEl.getBoundingClientRect();r.style.transition="top "+t+"ms,left "+t+"ms",wi(r,{left:o.left,top:o.top}),H_(r,()=>{r.style.transition="",e()})}cleanup(){this.mirrorEl&&(id(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&wi(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),wi(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}}class $y extends Ad{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class zy extends $y{constructor(e,t){super(new dC(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return cC(this.scrollController.el)}}class V1 extends $y{constructor(e){super(new hC,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const pg=typeof performance=="function"?performance.now:Date.now;class q1{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=pg();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let r=e-window.scrollX,o=t-window.scrollY,a=this.pointerScreenY===null?0:o-this.pointerScreenY,l=this.pointerScreenX===null?0:r-this.pointerScreenX;a<0?this.everMovedUp=!0:a>0&&(this.everMovedDown=!0),l<0?this.everMovedLeft=!0:l>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=o,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(pg()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:r}=e,{edgeThreshold:o}=this,a=o-e.distance,l=a*a/(o*o)*this.maxVelocity*t,u=1;switch(e.name){case"left":u=-1;case"right":r.setScrollLeft(r.getScrollLeft()+l*u);break;case"top":u=-1;case"bottom":r.setScrollTop(r.getScrollTop()+l*u);break}}computeBestEdge(e,t){let{edgeThreshold:r}=this,o=null,a=this.scrollCaches||[];for(let l of a){let u=l.clientRect,h=e-u.left,p=u.right-e,m=t-u.top,y=u.bottom-t;h>=0&&p>=0&&m>=0&&y>=0&&(m<=r&&this.everMovedUp&&l.canScrollUp()&&(!o||o.distance>m)&&(o={scrollCache:l,name:"top",distance:m}),y<=r&&this.everMovedDown&&l.canScrollDown()&&(!o||o.distance>y)&&(o={scrollCache:l,name:"bottom",distance:y}),h<=r&&this.everMovedLeft&&l.canScrollLeft()&&(!o||o.distance>h)&&(o={scrollCache:l,name:"left",distance:h}),p<=r&&this.everMovedRight&&l.canScrollRight()&&(!o||o.distance>p)&&(o={scrollCache:l,name:"right",distance:p}))}return o}buildCaches(e){return this.queryScrollEls(e).map(t=>t===window?new V1(!1):new zy(t,!1))}queryScrollEls(e){let t=[];for(let r of this.scrollQuery)typeof r=="object"?t.push(r):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(r)));return t}}class Pi extends mC{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=o=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,$_(document.body),F_(document.body),o.isTouch||o.origEvent.preventDefault(),this.emitter.trigger("pointerdown",o),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(o.subjectEl,o.pageX,o.pageY),this.startDelay(o),this.minDistance||this.handleDistanceSurpassed(o)))},this.onPointerMove=o=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",o),!this.isDistanceSurpassed){let a=this.minDistance,l,{deltaX:u,deltaY:h}=o;l=u*u+h*h,l>=a*a&&this.handleDistanceSurpassed(o)}this.isDragging&&(o.origEvent.type!=="scroll"&&(this.mirror.handleMove(o.pageX,o.pageY),this.autoScroller.handleMove(o.pageX,o.pageY)),this.emitter.trigger("dragmove",o))}},this.onPointerUp=o=>{this.isInteracting&&(this.isInteracting=!1,z_(document.body),W_(document.body),this.emitter.trigger("pointerup",o),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(o)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new By(e);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),t&&(r.selector=t),this.mirror=new W1,this.autoScroller=new q1}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class G1{constructor(e){this.el=e,this.origRect=Cd(e),this.scrollCaches=Zv(e).map(t=>new zy(t,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let r={left:e,top:t};for(let o of this.scrollCaches)if(!Q1(o.getEventTarget())&&!Kk(r,o.clientRect))return!1;return!0}}function Q1(n){let e=n.tagName;return e==="HTML"||e==="BODY"}class Ga{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:o}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(o.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):o.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Wa}processFirstCoord(e){let t={left:e.pageX,top:e.pageY},r=t,o=e.subjectEl,a;o instanceof HTMLElement&&(a=Cd(o),r=Jk(r,a));let l=this.initialHit=this.queryHitForOffset(r.left,r.top);if(l){if(this.useSubjectCenter&&a){let u=Kv(a,l.rect);u&&(r=Zk(u))}this.coordAdjust=Xk(r,t)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!Qa(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))}prepareHits(){this.offsetTrackers=Sn(this.droppableStore,e=>(e.component.prepareHits(),new G1(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:r,offsetTrackers:o}=this,a=null;for(let l in r){let u=r[l].component,h=o[l];if(h&&h.isWithinClipping(e,t)){let p=h.computeLeft(),m=h.computeTop(),y=e-p,b=t-m,{origRect:w}=h,E=w.right-w.left,_=w.bottom-w.top;if(y>=0&&y<E&&b>=0&&b<_){let S=u.queryHit(y,b,E,_);S&&za(S.dateProfile.activeRange,S.dateSpan.range)&&(this.disablePointCheck||h.el.contains(h.el.getRootNode().elementFromPoint(y+p-window.scrollX,b+m-window.scrollY)))&&(!a||S.layer>a.layer)&&(S.componentId=l,S.context=u.context,S.rect.left+=p,S.rect.right+=p,S.rect.top+=m,S.rect.bottom+=m,a=S)}}}return a}}function Qa(n,e){return!n&&!e?!0:!!n!=!!e?!1:Bk(n.dateSpan,e.dateSpan)}function Fy(n,e){let t={};for(let r of e.pluginHooks.datePointTransforms)Object.assign(t,r(n,e));return Object.assign(t,Y1(n,e.dateEnv)),t}function Y1(n,e){return{date:e.toDate(n.range.start),dateStr:e.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay}}class K1 extends Es{constructor(e){super(e),this.handlePointerDown=r=>{let{dragging:o}=this,a=r.origEvent.target;o.setIgnoreMove(!this.component.isValidDateDownEl(a))},this.handleDragEnd=r=>{let{component:o}=this,{pointer:a}=this.dragging;if(!a.wasTouchScroll){let{initialHit:l,finalHit:u}=this.hitDragging;if(l&&u&&Qa(l,u)){let{context:h}=o,p=Object.assign(Object.assign({},Fy(l.dateSpan,h)),{dayEl:l.dayEl,jsEvent:r.origEvent,view:h.viewApi||h.calendarApi.view});h.emitter.trigger("dateClick",p)}}},this.dragging=new Pi(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new Ga(this.dragging,Ed(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class J1 extends Es{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=l=>{let{component:u,dragging:h}=this,{options:p}=u.context,m=p.selectable&&u.isValidDateDownEl(l.origEvent.target);h.setIgnoreMove(!m),h.delay=l.isTouch?Z1(u):null},this.handleDragStart=l=>{this.component.context.calendarApi.unselect(l)},this.handleHitUpdate=(l,u)=>{let{context:h}=this.component,p=null,m=!1;if(l){let y=this.hitDragging.initialHit;l.componentId===y.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(y,l)||(p=X1(y,l,h.pluginHooks.dateSelectionTransformers)),(!p||!xC(p,l.dateProfile,h))&&(m=!0,p=null)}p?h.dispatch({type:"SELECT_DATES",selection:p}):u||h.dispatch({type:"UNSELECT_DATES"}),m?od():ad(),u||(this.dragSelection=p)},this.handlePointerUp=l=>{this.dragSelection&&(Fv(this.dragSelection,l,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:r}=t.context,o=this.dragging=new Pi(e.el);o.touchScrollAllowed=!1,o.minDistance=r.selectMinDistance||0,o.autoScroller.isEnabled=r.dragScroll;let a=this.hitDragging=new Ga(this.dragging,Ed(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function Z1(n){let{options:e}=n.context,t=e.selectLongPressDelay;return t==null&&(t=e.longPressDelay),t}function X1(n,e,t){let r=n.dateSpan,o=e.dateSpan,a=[r.range.start,r.range.end,o.range.start,o.range.end];a.sort(Y_);let l={};for(let u of t){let h=u(n,e);if(h===!1)return null;h&&Object.assign(l,h)}return l.range={start:a[0],end:a[3]},l.allDay=r.allDay,l}class Li extends Es{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=l=>{let u=l.origEvent.target,{component:h,dragging:p}=this,{mirror:m}=p,{options:y}=h.context,b=h.context;this.subjectEl=l.subjectEl;let w=this.subjectSeg=xs(l.subjectEl),_=(this.eventRange=w.eventRange).instance.instanceId;this.relevantEvents=yd(b.getCurrentData().eventStore,_),p.minDistance=l.isTouch?0:y.eventDragMinDistance,p.delay=l.isTouch&&_!==h.props.eventSelection?tD(h):null,y.fixedMirrorParent?m.parentNode=y.fixedMirrorParent:m.parentNode=ft(u,".fc"),m.revertDuration=y.dragRevertDuration;let S=h.isValidSegDownEl(u)&&!ft(u,".fc-event-resizer");p.setIgnoreMove(!S),this.isDragging=S&&l.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=l=>{let u=this.component.context,h=this.eventRange,p=h.instance.instanceId;l.isTouch?p!==this.component.props.eventSelection&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:p}):u.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(u.calendarApi.unselect(l),u.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new $e(u,h.def,h.instance),jsEvent:l.origEvent,view:u.viewApi}))},this.handleHitUpdate=(l,u)=>{if(!this.isDragging)return;let h=this.relevantEvents,p=this.hitDragging.initialHit,m=this.component.context,y=null,b=null,w=null,E=!1,_={affectedEvents:h,mutatedEvents:It(),isEvent:!0};if(l){y=l.context;let S=y.options;m===y||S.editable&&S.droppable?(b=eD(p,l,this.eventRange.instance.range.start,y.getCurrentData().pluginHooks.eventDragMutationMassagers),b&&(w=xd(h,y.getCurrentData().eventUiBases,b,y),_.mutatedEvents=w,oy(_,l.dateProfile,y)||(E=!0,b=null,w=null,_.mutatedEvents=It()))):y=null}this.displayDrag(y,_),E?od():ad(),u||(m===y&&Qa(p,l)&&(b=null),this.dragging.setMirrorNeedsRevert(!b),this.dragging.setMirrorIsVisible(!l||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=y,this.validMutation=b,this.mutatedRelevantEvents=w)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=l=>{if(this.isDragging){let u=this.component.context,h=u.viewApi,{receivingContext:p,validMutation:m}=this,y=this.eventRange.def,b=this.eventRange.instance,w=new $e(u,y,b),E=this.relevantEvents,_=this.mutatedRelevantEvents,{finalHit:S}=this.hitDragging;if(this.clearDrag(),u.emitter.trigger("eventDragStop",{el:this.subjectEl,event:w,jsEvent:l.origEvent,view:h}),m){if(p===u){let T=new $e(u,_.defs[y.defId],b?_.instances[b.instanceId]:null);u.dispatch({type:"MERGE_EVENTS",eventStore:_});let R={oldEvent:w,event:T,relatedEvents:kr(_,u,b),revert(){u.dispatch({type:"MERGE_EVENTS",eventStore:E})}},N={};for(let I of u.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(N,I(m,u));u.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},R),N),{el:l.subjectEl,delta:m.datesDelta,jsEvent:l.origEvent,view:h})),u.emitter.trigger("eventChange",R)}else if(p){let T={event:w,relatedEvents:kr(E,u,b),revert(){u.dispatch({type:"MERGE_EVENTS",eventStore:E})}};u.emitter.trigger("eventLeave",Object.assign(Object.assign({},T),{draggedEl:l.subjectEl,view:h})),u.dispatch({type:"REMOVE_EVENTS",eventStore:E}),u.emitter.trigger("eventRemove",T);let R=_.defs[y.defId],N=_.instances[b.instanceId],I=new $e(p,R,N);p.dispatch({type:"MERGE_EVENTS",eventStore:_});let $={event:I,relatedEvents:kr(_,p,N),revert(){p.dispatch({type:"REMOVE_EVENTS",eventStore:_})}};p.emitter.trigger("eventAdd",$),l.isTouch&&p.dispatch({type:"SELECT_EVENT",eventInstanceId:b.instanceId}),p.emitter.trigger("drop",Object.assign(Object.assign({},Fy(S.dateSpan,p)),{draggedEl:l.subjectEl,jsEvent:l.origEvent,view:S.context.viewApi})),p.emitter.trigger("eventReceive",Object.assign(Object.assign({},$),{draggedEl:l.subjectEl,view:S.context.viewApi}))}}else u.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:t}=this,{options:r}=t.context,o=this.dragging=new Pi(e.el);o.pointer.selector=Li.SELECTOR,o.touchScrollAllowed=!1,o.autoScroller.isEnabled=r.dragScroll;let a=this.hitDragging=new Ga(this.dragging,zu);a.useSubjectCenter=e.useEventCenter,a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("pointerup",this.handlePointerUp),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,t){let r=this.component.context,o=this.receivingContext;o&&o!==e&&(o===r?o.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:It(),isEvent:!0}}):o.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})}clearDrag(){let e=this.component.context,{receivingContext:t}=this;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Li.SELECTOR=".fc-event-draggable, .fc-event-resizable";function eD(n,e,t,r){let o=n.dateSpan,a=e.dateSpan,l=o.range.start,u=a.range.start,h={};o.allDay!==a.allDay&&(h.allDay=a.allDay,h.hasEnd=e.context.options.allDayMaintainDuration,a.allDay?l=Ie(t):l=t);let p=ms(l,u,n.context.dateEnv,n.componentId===e.componentId?n.largeUnit:null);p.milliseconds&&(h.allDay=!1);let m={datesDelta:p,standardProps:h};for(let y of r)y(m,n,e);return m}function tD(n){let{options:e}=n.context,t=e.eventLongPressDelay;return t==null&&(t=e.longPressDelay),t}class nD extends Es{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=a=>{let{component:l}=this,u=this.querySegEl(a),h=xs(u),p=this.eventRange=h.eventRange;this.dragging.minDistance=l.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(a.origEvent.target)||a.isTouch&&this.component.props.eventSelection!==p.instance.instanceId)},this.handleDragStart=a=>{let{context:l}=this.component,u=this.eventRange;this.relevantEvents=yd(l.getCurrentData().eventStore,this.eventRange.instance.instanceId);let h=this.querySegEl(a);this.draggingSegEl=h,this.draggingSeg=xs(h),l.calendarApi.unselect(),l.emitter.trigger("eventResizeStart",{el:h,event:new $e(l,u.def,u.instance),jsEvent:a.origEvent,view:l.viewApi})},this.handleHitUpdate=(a,l,u)=>{let{context:h}=this.component,p=this.relevantEvents,m=this.hitDragging.initialHit,y=this.eventRange.instance,b=null,w=null,E=!1,_={affectedEvents:p,mutatedEvents:It(),isEvent:!0};a&&(a.componentId===m.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(m,a)||(b=rD(m,a,u.subjectEl.classList.contains("fc-event-resizer-start"),y.range))),b&&(w=xd(p,h.getCurrentData().eventUiBases,b,h),_.mutatedEvents=w,oy(_,a.dateProfile,h)||(E=!0,b=null,w=null,_.mutatedEvents=null)),w?h.dispatch({type:"SET_EVENT_RESIZE",state:_}):h.dispatch({type:"UNSET_EVENT_RESIZE"}),E?od():ad(),l||(b&&Qa(m,a)&&(b=null),this.validMutation=b,this.mutatedRelevantEvents=w)},this.handleDragEnd=a=>{let{context:l}=this.component,u=this.eventRange.def,h=this.eventRange.instance,p=new $e(l,u,h),m=this.relevantEvents,y=this.mutatedRelevantEvents;if(l.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:p,jsEvent:a.origEvent,view:l.viewApi}),this.validMutation){let b=new $e(l,y.defs[u.defId],h?y.instances[h.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:y});let w={oldEvent:p,event:b,relatedEvents:kr(y,l,h),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:m})}};l.emitter.trigger("eventResize",Object.assign(Object.assign({},w),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||_e(0),endDelta:this.validMutation.endDelta||_e(0),jsEvent:a.origEvent,view:l.viewApi})),l.emitter.trigger("eventChange",w)}else l.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,r=this.dragging=new Pi(e.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=t.context.options.dragScroll;let o=this.hitDragging=new Ga(this.dragging,Ed(e));o.emitter.on("pointerdown",this.handlePointerDown),o.emitter.on("dragstart",this.handleDragStart),o.emitter.on("hitupdate",this.handleHitUpdate),o.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return ft(e.subjectEl,".fc-event")}}function rD(n,e,t,r){let o=n.context.dateEnv,a=n.dateSpan.range.start,l=e.dateSpan.range.start,u=ms(a,l,o,n.largeUnit);if(t){if(o.add(r.start,u)<r.end)return{startDelta:u}}else if(o.add(r.end,u)>r.start)return{endDelta:u};return null}class sD{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let o=this.context.options.unselectCancel,a=xv(r.origEvent);this.matchesCancel=!!ft(a,o),this.matchesEvent=!!ft(a,Li.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:o}=this,{documentPointer:a}=this,l=o.getCurrentData();if(!a.wasTouchScroll){if(l.dateSelection&&!this.isRecentPointerDateSelect){let u=o.options.unselectAuto;u&&(!u||!this.matchesCancel)&&o.calendarApi.unselect(r)}l.eventSelection&&!this.matchesEvent&&o.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new By(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const iD={fixedMirrorParent:U},oD={dateClick:U,eventDragStart:U,eventDragStop:U,eventDrop:U,eventResizeStart:U,eventResizeStop:U,eventResize:U,drop:U,eventReceive:U,eventLeave:U};Dd.dataAttrPrefix="";var aD=cn({name:"@fullcalendar/interaction",componentInteractions:[K1,J1,Li,nD],calendarInteractions:[sD],elementDraggingImpl:Pi,optionRefiners:iD,listenerRefiners:oD});function mg(n,e){const t=new Date(n);return t.setDate(t.getDate()+e),t}function lD(n,e){const t=new Date(n);return t.setMonth(t.getMonth()+e),t}function cD(n){return n.toISOString().split("T")[0]}function uD(n){const[e,t,r]=n.split("-").map(Number);return new Date(e,t-1,r)}function Ld(n,e,t,r,o){const a=[],l=new Map(e.map(h=>[h.id,h])),u=new Set(t.map(h=>`${h.choreId}-${h.instanceDate}`));for(const h of n){const p=uD(h.date),m=h.assigneeId?l.get(h.assigneeId):null,y=(m==null?void 0:m.color)||"#9CA3AF";if(h.recurrence==="none"){if(p>=r&&p<=o){const b=`${h.id}-${h.date}`;a.push({id:h.id,choreId:h.id,title:h.title,description:h.description,date:h.date,dueTime:h.dueTime,endTime:h.endTime,allDay:h.allDay,assigneeId:h.assigneeId,assigneeName:m==null?void 0:m.name,color:y,isRecurring:!1,priority:h.priority,categoryId:h.categoryId,isCompleted:u.has(b)})}}else{let b=new Date(p),w=0;const E=100;for(;b<=o&&w<E;){if(b>=r){const _=cD(b),S=`${h.id}-${_}`;a.push({id:`${h.id}-${_}`,choreId:h.id,title:h.title,description:h.description,date:_,dueTime:h.dueTime,endTime:h.endTime,allDay:h.allDay,assigneeId:h.assigneeId,assigneeName:m==null?void 0:m.name,color:y,isRecurring:!0,priority:h.priority,categoryId:h.categoryId,isCompleted:u.has(S)})}switch(h.recurrence){case"daily":b=mg(b,1);break;case"weekly":b=mg(b,7);break;case"monthly":b=lD(b,1);break}w++}}}return a}function Ud(){const n=new Date,e=new Date(n.getFullYear(),n.getMonth()-1,1),t=new Date(n.getFullYear(),n.getMonth()+4,0);return{start:e,end:t}}const dD={low:"Low",medium:"Medium",high:"High"},hD={low:"bg-blue-500",medium:"bg-yellow-500",high:"bg-red-500"};function fD({instance:n,chore:e,position:t,onEdit:r,onComplete:o,onClose:a}){const l={x:Math.min(t.x,window.innerWidth-320),y:Math.min(t.y,window.innerHeight-300)},u=p=>new Date(p).toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric",year:"numeric"}),h=()=>n.dueTime?n.endTime?`${n.dueTime} - ${n.endTime}`:n.dueTime:"All day";return f.jsxs("div",{className:"event-popover fixed z-[200] bg-surface-primary border border-border rounded-fluent-lg shadow-fluent-28 w-80 animate-fluent-appear",style:{left:l.x,top:l.y},children:[f.jsx("div",{className:"h-2 rounded-t-fluent-lg",style:{backgroundColor:n.color}}),f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsx("h3",{className:`text-lg font-semibold text-content-primary pr-2 ${n.isCompleted?"line-through opacity-70":""}`,children:n.title}),f.jsx("button",{onClick:a,className:"text-content-secondary hover:text-content-primary p-1 hover:bg-subtle-background-hover rounded-fluent-sm transition-all flex-shrink-0",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-content-secondary mb-2",children:[f.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),f.jsxs("div",{children:[f.jsx("div",{children:u(n.date)}),f.jsx("div",{className:"text-xs",children:h()})]})]}),n.assigneeName&&f.jsxs("div",{className:"flex items-center gap-2 text-sm text-content-secondary mb-2",children:[f.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),f.jsx("span",{children:n.assigneeName})]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-content-secondary mb-2",children:[f.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),f.jsx("span",{className:`px-2 py-0.5 text-xs text-white rounded-fluent-sm ${hD[n.priority]}`,children:dD[n.priority]})]}),n.description&&f.jsx("div",{className:"text-sm text-content-secondary mb-3 line-clamp-2",children:n.description}),n.isRecurring&&f.jsxs("div",{className:"flex items-center gap-2 text-xs text-content-secondary mb-3",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),f.jsx("span",{children:"Recurring event"})]}),n.isCompleted&&f.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 mb-3",children:[f.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),f.jsx("span",{children:"Completed"})]}),f.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-3 border-t border-border",children:[f.jsx("button",{onClick:o,className:`flex-1 py-2 px-3 rounded-fluent-sm text-sm font-medium transition-all ${n.isCompleted?"bg-surface-tertiary text-content-secondary hover:bg-subtle-background-hover":"bg-green-500 text-white hover:bg-green-600"}`,children:n.isCompleted?"Mark Incomplete":"Mark Complete"}),f.jsx("button",{onClick:r,className:"flex-1 py-2 px-3 rounded-fluent-sm text-sm font-medium bg-accent text-white hover:bg-accent-hover transition-all",children:"Edit"})]})]})]})}const gg={low:"",medium:"",high:""},Wy=z.forwardRef(({onAddClick:n,onEventClick:e,searchQuery:t,hiddenMembers:r=new Set},o)=>{const{state:a,updateChore:l,completeChore:u,uncompleteChore:h}=ln(),p=z.useRef(null),[m,y]=z.useState({visible:!1,position:{x:0,y:0},instance:null,chore:null});z.useImperativeHandle(o,()=>({gotoDate:A=>{var M;return(M=p.current)==null?void 0:M.getApi().gotoDate(A)},today:()=>{var A;return(A=p.current)==null?void 0:A.getApi().today()},changeView:A=>{var M;return(M=p.current)==null?void 0:M.getApi().changeView(A)},next:()=>{var A;return(A=p.current)==null?void 0:A.getApi().next()},prev:()=>{var A;return(A=p.current)==null?void 0:A.getApi().prev()}})),z.useEffect(()=>{const A=M=>{const H=M.target;m.visible&&!H.closest(".event-popover")&&y(G=>({...G,visible:!1}))};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[m.visible]);const b=z.useMemo(()=>{const{start:A,end:M}=Ud();return Ld(a.chores,a.teamMembers,a.completions,A,M)},[a.chores,a.teamMembers,a.completions]),w=z.useMemo(()=>{let A=b;if(r.size>0&&(A=A.filter(M=>!M.assigneeId||!r.has(M.assigneeId))),t){const M=t.toLowerCase();A=A.filter(H=>{var G,te;return H.title.toLowerCase().includes(M)||((G=H.assigneeName)==null?void 0:G.toLowerCase().includes(M))||((te=H.description)==null?void 0:te.toLowerCase().includes(M))})}return A},[b,t,r]),E=z.useMemo(()=>w.map(A=>{let M=A.date,H=A.date;const G=A.allDay!==!1&&!A.dueTime;if(A.dueTime)if(M=`${A.date}T${A.dueTime}:00`,A.endTime)H=`${A.date}T${A.endTime}:00`;else{const[te,ee]=A.dueTime.split(":").map(Number),ve=(te+1)%24;H=`${A.date}T${String(ve).padStart(2,"0")}:${String(ee).padStart(2,"0")}:00`}return{id:A.id,title:A.title,start:M,end:H,allDay:G,backgroundColor:A.isCompleted?"#10B981":A.color,borderColor:A.isCompleted?"#10B981":A.color,classNames:[A.isCompleted?"event-completed":"",`priority-${A.priority}`].filter(Boolean),extendedProps:{choreId:A.choreId,isRecurring:A.isRecurring,isCompleted:A.isCompleted,priority:A.priority,instanceDate:A.date,assigneeName:A.assigneeName,description:A.description,dueTime:A.dueTime,endTime:A.endTime}}}),[w]),_=A=>{const M=A.event.extendedProps.choreId,H=A.event.extendedProps.instanceDate,G=a.chores.find(ee=>ee.id===M),te=w.find(ee=>ee.choreId===M&&ee.date===H);if(G&&te){const ee=A.el.getBoundingClientRect();y({visible:!0,position:{x:ee.left,y:ee.bottom+8},instance:te,chore:G})}},S=A=>{var te;const M=A.startStr.split("T")[0],H=A.allDay?void 0:A.startStr.slice(11,16),G=A.allDay?void 0:A.endStr.slice(11,16);n({date:M,startTime:H,endTime:G,allDay:A.allDay}),(te=p.current)==null||te.getApi().unselect()},T=async A=>{const M=A.event.extendedProps.choreId,H=A.event.extendedProps.isRecurring,G=a.chores.find(te=>te.id===M);if(!G){A.revert();return}if(H){const te=A.event.start;if(te){const ee=te.toISOString().split("T")[0],ve=A.event.allDay?void 0:te.toTimeString().slice(0,5);await l({...G,date:ee,dueTime:ve||G.dueTime})}}else{const te=A.event.start;if(te){const ee=te.toISOString().split("T")[0],ve=A.event.allDay?void 0:te.toTimeString().slice(0,5);await l({...G,date:ee,dueTime:ve||G.dueTime})}}},R=async A=>{const M=A.event.extendedProps.choreId,H=a.chores.find(ee=>ee.id===M);if(!H||!A.event.start||!A.event.end){A.revert();return}const G=A.event.start.toTimeString().slice(0,5),te=A.event.end.toTimeString().slice(0,5);await l({...H,dueTime:G,endTime:te})},N=()=>{m.chore&&m.instance&&(e(m.chore,m.instance.date),y(A=>({...A,visible:!1})))},I=async()=>{var A;if(m.instance&&m.chore){if(m.instance.isCompleted){const M=a.completions.find(H=>H.choreId===m.instance.choreId&&H.instanceDate===m.instance.date);M&&await h(M.id)}else{const M=m.chore.assigneeId||((A=a.teamMembers[0])==null?void 0:A.id)||"unknown";await u(m.instance.choreId,m.instance.date,M)}y(M=>({...M,visible:!1}))}},$=()=>{y(A=>({...A,visible:!1}))};return f.jsxs("div",{className:"flex-1 p-3 sm:p-6 overflow-hidden",children:[f.jsx("div",{className:"fluent-card p-3 sm:p-4 h-full flex flex-col",children:f.jsx("div",{className:"flex-1 min-h-0 calendar-container",children:f.jsx(Cy,{ref:p,plugins:[HT,k1,B1,aD],initialView:"dayGridMonth",events:E,eventClick:_,select:S,eventDrop:T,eventResize:R,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},buttonText:{today:"Today",month:"Month",week:"Week",day:"Day",list:"Agenda"},height:"100%",editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:3,eventDisplay:"block",nowIndicator:!0,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",slotDuration:"00:30:00",scrollTime:"08:00:00",allDaySlot:!0,allDayText:"All day",titleFormat:{year:"numeric",month:"short"},dayHeaderFormat:{weekday:"short",day:"numeric"},slotLabelFormat:{hour:"numeric",minute:"2-digit",hour12:!0},eventTimeFormat:{hour:"numeric",minute:"2-digit",hour12:!0},eventContent:A=>{const M=A.event.extendedProps.isCompleted,H=A.event.extendedProps.priority;return A.view.type==="dayGridMonth"?f.jsxs("div",{className:`flex items-center gap-1 px-1 py-0.5 overflow-hidden ${M?"line-through opacity-70":""}`,children:[!M&&H&&f.jsx("span",{className:"text-[10px] flex-shrink-0",children:gg[H]}),M&&f.jsx("svg",{className:"w-3 h-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),f.jsx("span",{className:"truncate text-xs",children:A.event.title})]}):f.jsxs("div",{className:`flex flex-col h-full px-1 py-0.5 overflow-hidden ${M?"line-through opacity-70":""}`,children:[f.jsxs("div",{className:"flex items-center gap-1",children:[!M&&H&&f.jsx("span",{className:"text-[10px] flex-shrink-0",children:gg[H]}),M&&f.jsx("svg",{className:"w-3 h-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),f.jsx("span",{className:"truncate text-xs font-medium",children:A.event.title})]}),A.event.extendedProps.assigneeName&&f.jsx("span",{className:"text-[10px] opacity-80 truncate",children:A.event.extendedProps.assigneeName})]})}})})}),m.visible&&m.instance&&m.chore&&f.jsx(fD,{instance:m.instance,chore:m.chore,position:m.position,onEdit:N,onComplete:I,onClose:$})]})});Wy.displayName="Calendar";const pD={low:"Low",medium:"Medium",high:"High"},mD={low:"bg-blue-500",medium:"bg-yellow-500",high:"bg-red-500"};function gD({onAddClick:n,onEventClick:e}){const{state:t,completeChore:r,uncompleteChore:o}=ln(),[a,l]=z.useState("all"),[u,h]=z.useState("date"),p=z.useMemo(()=>{const{start:w,end:E}=Ud();return Ld(t.chores,t.teamMembers,t.completions,w,E)},[t.chores,t.teamMembers,t.completions]),m=z.useMemo(()=>{let w=[...p];return a==="pending"?w=w.filter(E=>!E.isCompleted):a==="completed"&&(w=w.filter(E=>E.isCompleted)),w.sort((E,_)=>{if(u==="date")return E.date.localeCompare(_.date);if(u==="priority"){const S={high:0,medium:1,low:2};return S[E.priority]-S[_.priority]}else if(u==="assignee"){const S=E.assigneeName||"Unassigned",T=_.assigneeName||"Unassigned";return S.localeCompare(T)}return 0}),w},[p,a,u]),y=async w=>{var _;const E=t.chores.find(S=>S.id===w.choreId);if(E)if(w.isCompleted){const S=t.completions.find(T=>T.choreId===w.choreId&&T.instanceDate===w.date);S&&await o(S.id)}else{const S=E.assigneeId||((_=t.teamMembers[0])==null?void 0:_.id)||"unknown";await r(w.choreId,w.date,S)}},b=w=>{const E=new Date(w),_=new Date,S=new Date(_);return S.setDate(S.getDate()+1),w===_.toISOString().split("T")[0]?"Today":w===S.toISOString().split("T")[0]?"Tomorrow":E.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})};return f.jsx("div",{className:"flex-1 p-3 sm:p-6 overflow-hidden",children:f.jsxs("div",{className:"fluent-card p-3 sm:p-4 h-full flex flex-col",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("div",{className:"flex rounded-fluent-md border border-border overflow-hidden",children:["all","pending","completed"].map(w=>f.jsx("button",{onClick:()=>l(w),className:`px-3 py-1.5 text-sm capitalize transition-all duration-fast ${a===w?"bg-accent text-white":"bg-surface-secondary text-content-secondary hover:bg-subtle-background-hover"}`,children:w},w))})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("select",{value:u,onChange:w=>h(w.target.value),className:"fluent-input text-sm py-1.5",children:[f.jsx("option",{value:"date",children:"Sort by Date"}),f.jsx("option",{value:"priority",children:"Sort by Priority"}),f.jsx("option",{value:"assignee",children:"Sort by Assignee"})]}),f.jsxs("button",{onClick:n,className:"fluent-button px-3 sm:px-4 py-2 flex items-center gap-2 text-sm sm:text-base",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),f.jsx("span",{className:"hidden sm:inline",children:"Add Chore"}),f.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]}),f.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:m.length===0?f.jsx("div",{className:"flex items-center justify-center h-full text-content-secondary",children:"No chores found"}):f.jsx("div",{className:"space-y-2",children:m.map(w=>{const E=t.chores.find(_=>_.id===w.choreId);return E?f.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-fluent-md border border-border transition-all duration-fast hover:bg-subtle-background-hover ${w.isCompleted?"opacity-60":""}`,children:[f.jsx("button",{onClick:()=>y(w),className:`w-5 h-5 rounded-fluent-sm border-2 flex-shrink-0 flex items-center justify-center transition-all duration-fast ${w.isCompleted?"bg-green-500 border-green-500 text-white":"border-border hover:border-accent"}`,children:w.isCompleted&&f.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),f.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>e(E,w.date),children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:`text-sm font-medium text-content-primary ${w.isCompleted?"line-through":""}`,children:w.title}),w.isRecurring&&f.jsx("svg",{className:"w-4 h-4 text-content-secondary flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})]}),f.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-content-secondary",children:[f.jsx("span",{children:b(w.date)}),w.dueTime&&f.jsx("span",{children:w.dueTime}),w.assigneeName&&f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:w.color}}),w.assigneeName]})]})]}),f.jsx("div",{className:`px-2 py-0.5 rounded-fluent-sm text-xs text-white flex-shrink-0 ${mD[w.priority]}`,children:pD[w.priority]})]},w.id):null})})})]})})}function vD(n){const{chore:e,members:t,completions:r,availability:o,chores:a,options:l}=n;if(!l.enabled||t.length===0)return null;const u=new Date().toISOString().split("T")[0];let h=[...t];if(l.respectAvailability){const p=new Set(o.filter(m=>m.startDate<=u&&m.endDate>=u).map(m=>m.memberId));h=h.filter(m=>!p.has(m.id))}if(l.respectWorkingHours&&e.dueTime){const p=e.dueTime;h=h.filter(m=>{if(!m.workingHours)return!0;const{start:y,end:b,days:w}=m.workingHours,_=new Date(e.date).getDay();return w.includes(_)?p>=y&&p<=b:!1})}if(l.respectSkills&&e.categoryId){const p=h.filter(m=>!(!m.skills||m.skills.length===0));p.length>0&&(h=p)}if(h.length===0)return null;switch(l.rotationType){case"round-robin":return vg(e,h,r);case"least-loaded":return yD(h,a,l.balanceWorkload);case"random":return wD(h);default:return vg(e,h,r)}}function vg(n,e,t){const r=t.filter(u=>u.choreId===n.id).sort((u,h)=>new Date(h.completedAt).getTime()-new Date(u.completedAt).getTime());if(r.length===0)return e[0].id;const o=r[0].completedBy,a=e.findIndex(u=>u.id===o);if(a===-1)return e[0].id;const l=(a+1)%e.length;return e[l].id}function yD(n,e,t){const r=new Map;n.forEach(p=>r.set(p.id,0));const o=new Date,a=new Date(o.getTime()-o.getDay()*24*60*60*1e3),l=new Date(a.getTime()+10080*60*1e3),u=a.toISOString().split("T")[0],h=l.toISOString().split("T")[0];if(e.forEach(p=>{if(!(!p.assigneeId||!r.has(p.assigneeId)))if(p.recurrence==="none"){if(p.date>=u&&p.date<=h){const m=r.get(p.assigneeId)||0;r.set(p.assigneeId,m+(p.estimatedMinutes||30))}}else{const m=p.estimatedMinutes||30;let y=0;switch(p.recurrence){case"daily":y=m*7;break;case"weekly":y=m;break;case"monthly":y=m/4;break}const b=r.get(p.assigneeId)||0;r.set(p.assigneeId,b+y)}}),t){let p=1/0,m=n[0].id;return n.forEach(y=>{const b=r.get(y.id)||0,w=y.weeklyCapacityMinutes||480,E=b/w;E<p&&(p=E,m=y.id)}),m}else{let p=1/0,m=n[0].id;return n.forEach(y=>{const b=r.get(y.id)||0;b<p&&(p=b,m=y.id)}),m}}function wD(n){const e=Math.floor(Math.random()*n.length);return n[e].id}const fa={enabled:!1,rotationType:"round-robin",respectSkills:!1,respectAvailability:!0,respectWorkingHours:!1,balanceWorkload:!0};function bD(n){const e={...fa,enabled:!0,...n.options},t=vD({...n,options:e});if(!t)return{assigneeId:null,assigneeName:null,reason:"No eligible members available"};const r=n.members.find(a=>a.id===t);let o="";switch(e.rotationType){case"round-robin":o="Next in rotation";break;case"least-loaded":o="Lowest workload";break;case"random":o="Randomly selected";break}return{assigneeId:t,assigneeName:(r==null?void 0:r.name)||null,reason:o}}const xD={low:"bg-blue-500",medium:"bg-yellow-500",high:"bg-red-500"};function SD({isOpen:n,onClose:e,editChore:t,defaultDate:r,instanceDate:o,defaultValues:a}){const{state:l,addChore:u,updateChore:h,deleteChore:p,completeChore:m,uncompleteChore:y,isChoreCompleted:b}=ln(),[w,E]=z.useState(""),[_,S]=z.useState(""),[T,R]=z.useState(""),[N,I]=z.useState(""),[$,A]=z.useState(""),[M,H]=z.useState(""),[G,te]=z.useState("none"),[ee,ve]=z.useState("medium"),[Ae,Ne]=z.useState(""),[Pe,ye]=z.useState(""),[me,K]=z.useState(fa),oe=o||((t==null?void 0:t.date)??""),J=t?b(t.id,oe):!1,O=t?l.completions.find(Q=>Q.choreId===t.id&&Q.instanceDate===oe):null;z.useEffect(()=>{var Q;t?(E(t.title),S(t.description||""),R(t.date),I(t.dueTime||""),A(t.endTime||""),H(t.assigneeId||""),te(t.recurrence),ve(t.priority||"medium"),Ne(t.categoryId||""),ye(((Q=t.estimatedMinutes)==null?void 0:Q.toString())||""),K(t.autoAssign||fa)):(E(""),S(""),R((a==null?void 0:a.date)||r||new Date().toISOString().split("T")[0]),I((a==null?void 0:a.startTime)||""),A((a==null?void 0:a.endTime)||""),H(""),te("none"),ve("medium"),Ne(""),ye(""),K(fa))},[t,r,a,n]);const F=Q=>{if(Q.preventDefault(),!w.trim()||!T)return;const se={title:w.trim(),description:_.trim()||void 0,date:T,dueTime:N||void 0,endTime:$||void 0,assigneeId:M||null,recurrence:G,priority:ee,categoryId:Ae||void 0,estimatedMinutes:Pe?parseInt(Pe):void 0,autoAssign:G!=="none"?me:void 0};t?h({...t,...se}):u(se),e()},ge=()=>{t&&confirm("Are you sure you want to delete this chore?")&&(p(t.id),e())},we=()=>{t&&(J&&O?y(O.id):M?m(t.id,oe,M):alert("Please assign someone to complete this chore"))};return n?f.jsx("div",{className:"fixed inset-0 bg-overlay flex items-end sm:items-center justify-center z-50 p-0 sm:p-4",children:f.jsxs("div",{className:"fluent-card w-full sm:max-w-lg sm:mx-4 animate-fluent-appear rounded-t-fluent-xl sm:rounded-fluent-lg max-h-[90vh] overflow-y-auto shadow-fluent-28",children:[f.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 border-b border-border sticky top-0 fluent-surface",children:[f.jsx("h3",{className:"fluent-title text-lg font-semibold text-content-primary",children:t?"Edit Chore":"Add New Chore"}),f.jsx("button",{onClick:e,className:"text-content-secondary hover:text-content-primary hover:bg-subtle-background-hover rounded-fluent-sm transition-all duration-fast p-1.5",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("form",{onSubmit:F,className:"p-4 sm:p-6 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"Title"}),f.jsx("input",{type:"text",value:w,onChange:Q=>E(Q.target.value),placeholder:"e.g., Clean kitchen",className:"fluent-input w-full",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"Description (optional)"}),f.jsx("textarea",{value:_,onChange:Q=>S(Q.target.value),placeholder:"Add notes or instructions...",className:"fluent-input w-full min-h-[80px] resize-y",rows:3})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"Date"}),f.jsx("input",{type:"date",value:T,onChange:Q=>R(Q.target.value),className:"fluent-input w-full",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"Start Time"}),f.jsx("input",{type:"time",value:N,onChange:Q=>I(Q.target.value),className:"fluent-input w-full"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"End Time"}),f.jsx("input",{type:"time",value:$,onChange:Q=>A(Q.target.value),className:"fluent-input w-full",min:N})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-2",children:"Priority"}),f.jsx("div",{className:"flex gap-2",children:["low","medium","high"].map(Q=>f.jsx("button",{type:"button",onClick:()=>ve(Q),className:`flex-1 px-3 py-2 rounded-fluent-sm font-medium text-sm transition-all duration-fast capitalize ${ee===Q?`${xD[Q]} text-white`:"bg-surface-tertiary text-content-secondary hover:bg-subtle-background-hover"}`,children:Q},Q))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"Assign to"}),f.jsxs("select",{value:M,onChange:Q=>H(Q.target.value),className:"fluent-select w-full",children:[f.jsx("option",{value:"",children:"Unassigned"}),l.teamMembers.map(Q=>f.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),l.categories.length>0&&f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"Category"}),f.jsxs("select",{value:Ae,onChange:Q=>Ne(Q.target.value),className:"fluent-select w-full",children:[f.jsx("option",{value:"",children:"No category"}),l.categories.map(Q=>f.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"Repeat"}),f.jsxs("select",{value:G,onChange:Q=>te(Q.target.value),className:"fluent-select w-full",children:[f.jsx("option",{value:"none",children:"Does not repeat"}),f.jsx("option",{value:"daily",children:"Daily"}),f.jsx("option",{value:"weekly",children:"Weekly"}),f.jsx("option",{value:"monthly",children:"Monthly"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"Est. time (min)"}),f.jsx("input",{type:"number",value:Pe,onChange:Q=>ye(Q.target.value),placeholder:"e.g., 30",min:"0",className:"fluent-input w-full"})]})]}),G!=="none"&&f.jsxs("div",{className:"fluent-surface p-4 rounded-fluent-md border border-border space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-content-primary",children:"Auto-Assignment"}),f.jsx("p",{className:"text-xs text-content-secondary",children:"Automatically rotate assignment for recurring instances"})]}),f.jsx("button",{type:"button",onClick:()=>K(Q=>({...Q,enabled:!Q.enabled})),className:`relative w-12 h-6 rounded-full transition-colors ${me.enabled?"bg-brand-primary":"bg-surface-tertiary"}`,children:f.jsx("span",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-all ${me.enabled?"left-7":"left-1"}`})})]}),me.enabled&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-content-secondary mb-1",children:"Rotation Type"}),f.jsxs("select",{value:me.rotationType,onChange:Q=>K(se=>({...se,rotationType:Q.target.value})),className:"fluent-select w-full text-sm",children:[f.jsx("option",{value:"round-robin",children:"Round Robin"}),f.jsx("option",{value:"least-loaded",children:"Least Loaded"}),f.jsx("option",{value:"random",children:"Random"})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:me.respectAvailability,onChange:Q=>K(se=>({...se,respectAvailability:Q.target.checked})),className:"w-4 h-4 rounded border-border accent-brand-primary"}),f.jsx("span",{className:"text-content-primary",children:"Skip unavailable members"})]}),f.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:me.respectWorkingHours,onChange:Q=>K(se=>({...se,respectWorkingHours:Q.target.checked})),className:"w-4 h-4 rounded border-border accent-brand-primary"}),f.jsx("span",{className:"text-content-primary",children:"Respect working hours"})]}),me.rotationType==="least-loaded"&&f.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:me.balanceWorkload,onChange:Q=>K(se=>({...se,balanceWorkload:Q.target.checked})),className:"w-4 h-4 rounded border-border accent-brand-primary"}),f.jsx("span",{className:"text-content-primary",children:"Balance by capacity ratio"})]})]}),l.teamMembers.length>0&&f.jsx("div",{className:"pt-2 border-t border-border",children:f.jsxs("p",{className:"text-xs text-content-secondary",children:["Next assignment preview:"," ",f.jsx("span",{className:"text-content-primary font-medium",children:(()=>{const Q=bD({chore:{id:(t==null?void 0:t.id)||"preview",title:w,date:T,dueTime:N,assigneeId:M||null,recurrence:G,priority:ee,categoryId:Ae},members:l.teamMembers,completions:l.completions,availability:l.availability,chores:l.chores,options:me});return Q.assigneeName?`${Q.assigneeName} (${Q.reason})`:Q.reason})()})]})})]})]}),t&&f.jsx("div",{className:"pt-2",children:f.jsxs("button",{type:"button",onClick:we,className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-fluent-md font-medium transition-all duration-fast ${J?"bg-green-500 text-white hover:bg-green-600":"bg-surface-tertiary text-content-secondary hover:bg-subtle-background-hover border border-border"}`,children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:J?"M5 13l4 4L19 7":"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),J?"Completed":"Mark as Complete"]})}),f.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[t&&f.jsx("button",{type:"button",onClick:ge,className:"px-4 py-2 text-red-500 hover:text-red-600 hover:bg-red-500/10 rounded-fluent-sm font-medium transition-all duration-fast",children:"Delete"}),f.jsx("div",{className:"flex-1"}),f.jsx("button",{type:"button",onClick:e,className:"fluent-button-subtle px-4 py-2 text-content-secondary hover:text-content-primary font-medium",children:"Cancel"}),f.jsx("button",{type:"submit",className:"fluent-button px-4 py-2",children:t?"Save":"Add Chore"})]})]})]})}):null}function _D(){const{signIn:n,signUp:e,resetPassword:t}=td(),[r,o]=z.useState("signIn"),[a,l]=z.useState(""),[u,h]=z.useState(""),[p,m]=z.useState(null),[y,b]=z.useState(!1),[w,E]=z.useState(null),_=async N=>{if(N.preventDefault(),m(null),E(null),b(!0),r==="forgotPassword"){const{error:I}=await t(a);I?m(I.message):E("Check your email for a password reset link!")}else if(r==="signUp"){const{error:I}=await e(a,u);I?m(I.message):E("Check your email for a confirmation link!")}else{const{error:I}=await n(a,u);I&&m(I.message)}b(!1)},S=N=>{o(N),m(null),E(null)},T=()=>{switch(r){case"signUp":return"Create an account";case"forgotPassword":return"Reset your password";default:return"Sign in to your account"}},R=()=>{if(y)return"Loading...";switch(r){case"signUp":return"Sign Up";case"forgotPassword":return"Send Reset Link";default:return"Sign In"}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"theme-background"}),f.jsxs("div",{className:"min-h-screen flex items-center justify-center relative px-4 py-8",children:[f.jsx("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4",children:f.jsx(Pa,{})}),f.jsxs("div",{className:"fluent-card p-6 sm:p-8 w-full max-w-md animate-fluent-appear",children:[f.jsx("div",{className:"flex justify-center mb-6",children:f.jsx(La,{size:"lg",showText:!0})}),f.jsx("p",{className:"text-center text-content-secondary mb-4 sm:mb-6 text-sm sm:text-base",children:T()}),f.jsxs("form",{onSubmit:_,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"Email"}),f.jsx("input",{type:"email",value:a,onChange:N=>l(N.target.value),className:"fluent-input w-full",required:!0})]}),r!=="forgotPassword"&&f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"Password"}),f.jsx("input",{type:"password",value:u,onChange:N=>h(N.target.value),className:"fluent-input w-full",required:!0,minLength:6})]}),p&&f.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-fluent-sm text-red-500 text-sm",children:p}),w&&f.jsx("div",{className:"p-3 bg-green-500/10 border border-green-500/30 rounded-fluent-sm text-green-500 text-sm",children:w}),f.jsx("button",{type:"submit",disabled:y,className:"fluent-button w-full py-2.5",children:R()})]}),r==="signIn"&&f.jsx("div",{className:"mt-3 text-center",children:f.jsx("button",{onClick:()=>S("forgotPassword"),className:"text-content-secondary hover:text-brand text-sm transition-colors duration-fast",children:"Forgot your password?"})}),f.jsx("div",{className:"mt-4 text-center",children:r==="forgotPassword"?f.jsx("button",{onClick:()=>S("signIn"),className:"text-brand hover:underline text-sm transition-colors duration-fast",children:"Back to sign in"}):f.jsx("button",{onClick:()=>S(r==="signUp"?"signIn":"signUp"),className:"text-brand hover:underline text-sm transition-colors duration-fast",children:r==="signUp"?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})]})}function Bd(n,e){const t=new Date,r=new Date(t.getTime()-10080*60*1e3);return e.map(o=>{const a=n.filter(u=>u.assigneeId===o.id),l=a.filter(u=>new Date(u.date)>=r);return{memberId:o.id,memberName:o.name,totalAssignments:a.length,recentAssignments:l.length}})}function ED(n,e){if(e.length===0)return null;const t=Bd(n,e);t.sort((o,a)=>o.recentAssignments!==a.recentAssignments?o.recentAssignments-a.recentAssignments:o.totalAssignments-a.totalAssignments);const r=t[0];return e.find(o=>o.id===r.memberId)||null}function kD(n,e){const t=new Map;if(e.length===0)return t;const r=n.filter(a=>!a.assigneeId),o=Bd(n,e);for(const a of r){o.sort((u,h)=>u.recentAssignments-h.recentAssignments);const l=o[0];t.set(a.id,l.memberId),l.recentAssignments++,l.totalAssignments++}return t}function CD(n){const e=new Date,t=e.toISOString().split("T")[0],r=new Date(e.getTime()+1440*60*1e3).toISOString().split("T")[0];return n.filter(o=>o.date===t||o.date===r)}function AD(n,e){const t=Bd(n,e),r=[];if(t.length===0)return{isBalanced:!0,suggestions:[],stats:t};const o=t.map(m=>m.recentAssignments),a=Math.max(...o),l=Math.min(...o),u=o.reduce((m,y)=>m+y,0)/o.length,h=a-l<=2;if(!h){const m=t.filter(b=>b.recentAssignments>u+1),y=t.filter(b=>b.recentAssignments<u-1);m.length>0&&r.push(`${m.map(b=>b.memberName).join(", ")} ${m.length===1?"has":"have"} more chores than average`),y.length>0&&r.push(`Consider assigning more to ${y.map(b=>b.memberName).join(", ")}`)}const p=n.filter(m=>!m.assigneeId).length;return p>0&&r.push(`${p} chore${p===1?"":"s"} unassigned`),{isBalanced:h,suggestions:r,stats:t}}async function TD(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.log("This browser does not support notifications"),!1)}function Vy(){return"Notification"in window&&Notification.permission==="granted"}function DD(n,e){if(!Vy())return;const t=new Notification(n,{icon:"/chore-app/favicon.ico",badge:"/chore-app/favicon.ico",...e});setTimeout(()=>t.close(),5e3)}function RD(n,e){const t=e?` (${e.name})`:"";DD(`Chore Reminder: ${n.title}`,{body:`Due: ${ND(n.date)}${t}`,tag:`chore-${n.id}`})}function yg(n,e){const t=new Date().toISOString().split("T")[0],r=new Map(e.map(u=>[u.id,u])),o=n.filter(u=>u.date===t),a=`notified-chores-${t}`,l=new Set(JSON.parse(sessionStorage.getItem(a)||"[]"));for(const u of o)if(!l.has(u.id)){const h=u.assigneeId?r.get(u.assigneeId):void 0;RD(u,h),l.add(u.id)}sessionStorage.setItem(a,JSON.stringify([...l]))}function ND(n){return new Date(n+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}const jD="210936263317-2hrvenu5509i73usg6nvajcemnrkh33s.apps.googleusercontent.com",ID="https://www.googleapis.com/auth/calendar.events",OD="https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest";let qy=!1,Gy=!1,gi=null;function MD(){return!0}async function PD(){return new Promise(n=>{const e=document.createElement("script");e.src="https://apis.google.com/js/api.js",e.async=!0,e.defer=!0,e.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({discoveryDocs:[OD]}),qy=!0,wg(n)})},document.body.appendChild(e);const t=document.createElement("script");t.src="https://accounts.google.com/gsi/client",t.async=!0,t.defer=!0,t.onload=()=>{gi=window.google.accounts.oauth2.initTokenClient({client_id:jD,scope:ID,callback:()=>{}}),Gy=!0,wg(n)},document.body.appendChild(t)})}function wg(n){qy&&Gy&&n(!0)}function Qy(){var n,e;return!!((e=(n=window.gapi)==null?void 0:n.client)!=null&&e.getToken())}function LD(){return new Promise(n=>{var e,t;if(!gi){n(!1);return}gi.callback=r=>{if(r.error){console.error("Google sign-in error:",r.error),n(!1);return}n(!0)},((t=(e=window.gapi)==null?void 0:e.client)==null?void 0:t.getToken())===null?gi.requestAccessToken({prompt:"consent"}):gi.requestAccessToken({prompt:""})})}function UD(){var e,t;const n=(t=(e=window.gapi)==null?void 0:e.client)==null?void 0:t.getToken();n&&window.google.accounts.oauth2.revoke(n.access_token,()=>{window.gapi.client.setToken(null)})}async function BD(n,e){if(!Qy())return console.error("Not signed in to Google"),null;try{const t={summary:n.title,description:e?`Assigned to: ${e.name}`:"Chore from Office Chore App",start:{date:n.date},end:{date:n.date},colorId:e?$D(e.color):void 0};return(await window.gapi.client.calendar.events.insert({calendarId:"primary",resource:t})).result.id||null}catch(t){return console.error("Error creating calendar event:",t),null}}async function HD(n,e){const t=new Map(e.map(a=>[a.id,a]));let r=0,o=0;for(const a of n){const l=a.assigneeId?t.get(a.assigneeId):void 0;await BD(a,l)?r++:o++}return{success:r,failed:o}}function $D(n){return{"#ef4444":"11","#f97316":"6","#f59e0b":"5","#84cc16":"10","#22c55e":"10","#14b8a6":"7","#3b82f6":"9","#8b5cf6":"1","#ec4899":"4","#6b7280":"8"}[n]||"9"}function bg(n){const e=new Date,t=n.toLowerCase();if(t.includes("today"))return e.toISOString().split("T")[0];if(t.includes("tomorrow"))return new Date(e.getTime()+864e5).toISOString().split("T")[0];if(t.includes("next week"))return new Date(e.getTime()+6048e5).toISOString().split("T")[0];const r=t.match(/in\s+(\d+)\s+days?/);if(r){const l=parseInt(r[1]);return new Date(e.getTime()+l*24*60*60*1e3).toISOString().split("T")[0]}const o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(let l=0;l<o.length;l++)if(t.includes(o[l])){const u=e.getDay();let h=l-u;return h<=0&&(h+=7),new Date(e.getTime()+h*24*60*60*1e3).toISOString().split("T")[0]}const a=n.match(/(\d{1,2})[\/\-](\d{1,2})(?:[\/\-](\d{2,4}))?/);if(a){const l=parseInt(a[1]),u=parseInt(a[2]),h=a[3]?parseInt(a[3]):e.getFullYear();return`${h<100?2e3+h:h}-${String(l).padStart(2,"0")}-${String(u).padStart(2,"0")}`}return null}function xg(n){var r;const e=n.toLowerCase(),t=e.match(/at\s+(\d{1,2})(?::(\d{2}))?\s*(am|pm)?/i);if(t){let o=parseInt(t[1]);const a=t[2]?parseInt(t[2]):0,l=(r=t[3])==null?void 0:r.toLowerCase();return l==="pm"&&o<12&&(o+=12),l==="am"&&o===12&&(o=0),`${String(o).padStart(2,"0")}:${String(a).padStart(2,"0")}`}return e.includes("morning")?"09:00":e.includes("noon")||e.includes("lunch")?"12:00":e.includes("afternoon")?"14:00":e.includes("evening")?"18:00":e.includes("night")?"20:00":null}function Sg(n){const e=n.toLowerCase();return e.includes("high priority")||e.includes("urgent")||e.includes("important")||e.includes("asap")?"high":e.includes("low priority")||e.includes("whenever")||e.includes("not urgent")?"low":"medium"}function _g(n){const e=n.toLowerCase();return e.includes("every day")||e.includes("daily")?"daily":e.includes("every week")||e.includes("weekly")?"weekly":e.includes("every month")||e.includes("monthly")?"monthly":"none"}function Eg(n,e){const t=n.toLowerCase().trim(),r=e.find(u=>u.name.toLowerCase()===t);if(r)return r;const o=e.find(u=>u.name.toLowerCase().startsWith(t));if(o)return o;const a=e.find(u=>u.name.toLowerCase().includes(t));if(a)return a;const l=e.find(u=>t.includes(u.name.toLowerCase()));return l||null}function ja(n,e){const t=n.toLowerCase().trim(),r=e.find(l=>l.title.toLowerCase()===t);if(r)return r;const o=e.find(l=>l.title.toLowerCase().includes(t));if(o)return o;const a=e.find(l=>t.includes(l.title.toLowerCase()));return a||null}function zD(n,e){const t=n.toLowerCase().trim();if(t.match(/^(hi|hello|hey|good morning|good afternoon|good evening|howdy|yo)(\s|!|$)/i))return{type:"greeting"};if(t==="help"||t==="?"||t.includes("what can you do"))return{type:"help"};if(t.includes("my stats")||t.includes("my progress")||t.includes("how am i doing")||t.includes("summary")||t.includes("dashboard"))return{type:"show_stats"};if(t.includes("overdue")||t.includes("past due")||t.includes("missed"))return{type:"show_overdue"};if(t.includes("list chores")||t.includes("show chores")||t.includes("my chores")||t.includes("upcoming chores")||t.includes("what's due")||t.includes("what is due")||t.includes("what do i have"))return{type:"list_chores"};if(t.includes("list team")||t.includes("show team")||t.includes("who is on")||t.includes("team members"))return{type:"list_members"};const r=[/(?:complete|finish|done|mark as done|mark complete|check off)\s+["']?(.+?)["']?$/i,/i(?:'ve| have)? (?:completed|finished|done)\s+["']?(.+?)["']?$/i,/["']?(.+?)["']?\s+is (?:done|complete|finished)$/i];for(const u of r){const h=n.match(u);if(h)return{type:"complete_chore",data:{title:h[1].trim()}}}const o=[/(?:delete|remove|cancel)\s+["']?(.+?)["']?$/i,/(?:get rid of|take off)\s+["']?(.+?)["']?$/i];for(const u of o){const h=n.match(u);if(h)return{type:"delete_chore",data:{title:h[1].trim()}}}const a=[/add (?:a )?(?:chore|task) (?:called |named |for )?["']?([^"']+?)["']?(?:\s+(?:on|for|due)\s+(.+))?$/i,/create (?:a )?(?:chore|task) (?:called |named |for )?["']?([^"']+?)["']?(?:\s+(?:on|for|due)\s+(.+))?$/i,/new (?:chore|task)[:\s]+["']?([^"']+?)["']?(?:\s+(?:on|for|due)\s+(.+))?$/i,/schedule ["']?([^"']+?)["']?(?:\s+(?:on|for|due)\s+(.+))?$/i,/remind me to\s+["']?(.+?)["']?(?:\s+(?:on|for|due)\s+(.+))?$/i];for(const u of a){const h=n.match(u);if(h){const p=h[1].trim(),m=h[2]||n,y=bg(m)||new Date().toISOString().split("T")[0],b=xg(n),w=_g(n),E=Sg(n);let _;const S=n.match(/(?:assign(?:ed)? to|for)\s+(\w+)/i);if(S){const T=Eg(S[1],e);T&&(_=T.name)}return{type:"add_chore",data:{title:p,date:y,time:b||void 0,recurrence:w,priority:E,assigneeName:_}}}}const l=[/assign\s+["']?(.+?)["']?\s+to\s+(\w+)/i,/give\s+["']?(.+?)["']?\s+to\s+(\w+)/i,/(\w+)\s+should\s+(?:do|handle)\s+["']?(.+?)["']?/i];for(const u of l){const h=n.match(u);if(h){let p,m;u.source.includes("should")?(m=h[1].trim(),p=h[2].trim()):(p=h[1].trim(),m=h[2].trim());const y=Eg(m,e);return{type:"assign_chore",data:{title:p,assigneeName:y==null?void 0:y.name}}}}if(t.length>3){const u=bg(n)||new Date().toISOString().split("T")[0],h=xg(n),p=_g(n),m=Sg(n);let y=n.replace(/\b(today|tomorrow|next week|monday|tuesday|wednesday|thursday|friday|saturday|sunday)\b/gi,"").replace(/\b(daily|weekly|monthly|every day|every week|every month)\b/gi,"").replace(/\b(high priority|low priority|urgent|important|asap)\b/gi,"").replace(/\bat\s+\d{1,2}(?::\d{2})?\s*(am|pm)?/gi,"").replace(/\b(morning|afternoon|evening|night|noon|lunch)\b/gi,"").replace(/\b(on|for|due|in \d+ days?)\b/gi,"").replace(/\s+/g," ").trim();if(y.length>2)return{type:"add_chore",data:{title:y,date:u,time:h||void 0,recurrence:p,priority:m}}}return{type:"unknown"}}function FD(n,e){const{chores:t,teamMembers:r,completions:o}=e;switch(n.type){case"greeting":const a=["Hello! I'm your chore assistant. How can I help you today?","Hi there! Ready to help you manage your chores.","Hey! What can I help you with?"];return{text:a[Math.floor(Math.random()*a.length)],quickActions:[{label:"Add a chore",action:"add a chore called "},{label:"Show chores",action:"show my chores"},{label:"My stats",action:"show my stats"}]};case"help":return{text:`Here's what I can help you with:

**Add chores:**
- "Add a chore called Clean kitchen tomorrow"
- "Remind me to take out trash at 8pm"
- "Schedule vacuum weekly on Monday"
- "Add urgent task: Fix bug"

**Manage chores:**
- "Complete clean kitchen"
- "Delete meeting prep"
- "Assign dishes to John"

**View info:**
- "Show my chores"
- "Show my stats"
- "What's overdue?"
- "Who's on the team?"

Just type naturally and I'll understand!`,quickActions:[{label:"Add a chore",action:"add a chore called "},{label:"Show chores",action:"show my chores"},{label:"Show overdue",action:"what's overdue"}]};case"show_stats":{const l=new Date().toISOString().split("T")[0],u=new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0],h=t.length,p=o.filter(_=>_.instanceDate>=u).length,m=t.filter(_=>_.date>=l&&!o.some(S=>S.choreId===_.id&&S.instanceDate===_.date)).length,y=t.filter(_=>_.date<l&&_.recurrence==="none"&&!o.some(S=>S.choreId===_.id&&S.instanceDate===_.date)).length,w=r.map(_=>({name:_.name,count:o.filter(S=>S.completedBy===_.id&&S.instanceDate>=u).length,points:_.points||0})).sort((_,S)=>S.count-_.count)[0];let E=`**This Week's Summary:**

`;return E+=`- Total chores: ${h}
`,E+=`- Completed this week: ${p}
`,E+=`- Pending: ${m}
`,y>0&&(E+=`- **Overdue: ${y}** 
`),w&&w.count>0&&(E+=`
 Top performer: ${w.name} (${w.count} completed, ${w.points} pts)`),{text:E,quickActions:y>0?[{label:"Show overdue",action:"what's overdue"}]:void 0}}case"show_overdue":{const l=new Date().toISOString().split("T")[0],u=t.filter(p=>p.date<l&&p.recurrence==="none"&&!o.some(m=>m.choreId===p.id&&m.instanceDate===p.date));if(u.length===0)return{text:"Great news! You have no overdue chores. "};const h=u.slice(0,5).map(p=>{const m=r.find(y=>y.id===p.assigneeId);return`- ${p.title} (due ${bu(p.date)})${m?` - ${m.name}`:""}`}).join(`
`);return{text:` **Overdue chores (${u.length}):**

${h}${u.length>5?`

...and ${u.length-5} more`:""}`,quickActions:[{label:"Complete first",action:`complete ${u[0].title}`}]}}case"list_chores":{const l=new Date().toISOString().split("T")[0],u=t.filter(p=>p.date>=l).sort((p,m)=>p.date.localeCompare(m.date)).slice(0,7);return u.length===0?{text:"No upcoming chores found. Would you like to add one?",quickActions:[{label:"Add a chore",action:"add a chore called "}]}:{text:`**Upcoming chores:**

${u.map(p=>{const m=r.find(E=>E.id===p.assigneeId),y=m?` (${m.name})`:"",b=p.priority==="high"?" ":p.priority==="low"?" ":"",w=p.dueTime?` at ${p.dueTime}`:"";return`- ${p.title}${b} - ${bu(p.date)}${w}${y}`}).join(`
`)}`,quickActions:[{label:"Add more",action:"add a chore called "},{label:"Complete one",action:"complete "}]}}case"list_members":return r.length===0?{text:"No team members yet. Add some from the sidebar!"}:{text:`**Team members:**

${r.map(u=>{const h=t.filter(p=>p.assigneeId===u.id).length;return`- ${u.name} (${u.points||0} pts, ${h} assigned)`}).join(`
`)}`};case"add_chore":{const l=n.data;let u=`I'll add "${l.title}"`;return l.date&&(u+=` for ${bu(l.date)}`),l.time&&(u+=` at ${l.time}`),l.recurrence&&l.recurrence!=="none"&&(u+=` (${l.recurrence})`),l.priority&&l.priority!=="medium"&&(u+=` [${l.priority} priority]`),l.assigneeName&&(u+=` assigned to ${l.assigneeName}`),{text:u+". Creating it now..."}}case"complete_chore":{const l=n.data,u=ja(l.title,t);return u?{text:`Marking "${u.title}" as complete...`}:{text:`I couldn't find a chore matching "${l.title}". Try "show my chores" to see available ones.`,quickActions:[{label:"Show chores",action:"show my chores"}]}}case"delete_chore":{const l=n.data,u=ja(l.title,t);return u?{text:`I'll delete "${u.title}". Please confirm this action from the calendar.`}:{text:`I couldn't find a chore matching "${l.title}". Try "show my chores" to see available ones.`,quickActions:[{label:"Show chores",action:"show my chores"}]}}case"assign_chore":{const l=n.data;return l.assigneeName?{text:`Assigning "${l.title}" to ${l.assigneeName}...`}:{text:`I couldn't find that team member. Available members: ${r.map(u=>u.name).join(", ")}`}}case"unknown":default:return{text:`I'm not sure what you mean. Try "help" to see what I can do, or just describe the chore you want to add!`,quickActions:[{label:"Help",action:"help"},{label:"Add a chore",action:"add a chore called "}]}}}function bu(n){const e=new Date(n+"T00:00:00"),t=new Date,r=new Date(t.getTime()+1440*60*1e3);return n===t.toISOString().split("T")[0]?"today":n===r.toISOString().split("T")[0]?"tomorrow":e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function Gt(){return`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function WD({onClose:n}){const{state:e,addChore:t,updateChore:r,completeChore:o}=ln(),[a,l]=z.useState([{id:"welcome",role:"assistant",content:`Hi! I'm your chore assistant. I can help you add, complete, and manage chores. Try saying "help" to see what I can do!`,timestamp:new Date,quickActions:[{label:"Add a chore",action:"add a chore called "},{label:"Show chores",action:"show my chores"},{label:"Help",action:"help"}]}]),[u,h]=z.useState(""),[p,m]=z.useState(!1),y=z.useRef(null),b=z.useRef(null),w=()=>{var S;(S=y.current)==null||S.scrollIntoView({behavior:"smooth"})};z.useEffect(()=>{w()},[a]),z.useEffect(()=>{var S;(S=b.current)==null||S.focus()},[]);const E=S=>{var T;S.endsWith(" ")?(h(S),(T=b.current)==null||T.focus()):(h(S),setTimeout(()=>{var N;const R=(N=b.current)==null?void 0:N.closest("form");R&&R.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},100))},_=async S=>{var $;if(S.preventDefault(),!u.trim()||p)return;const T={id:Gt(),role:"user",content:u.trim(),timestamp:new Date};l(A=>[...A,T]),h(""),m(!0);const R=zD(T.content,e.teamMembers),N={chores:e.chores,teamMembers:e.teamMembers,completions:e.completions},I=FD(R,N);if(R.type==="add_chore"&&R.data){const A=e.teamMembers.find(M=>{var H,G;return M.name.toLowerCase()===((G=(H=R.data)==null?void 0:H.assigneeName)==null?void 0:G.toLowerCase())});try{await t({title:R.data.title,date:R.data.date,dueTime:R.data.time||void 0,assigneeId:(A==null?void 0:A.id)||null,recurrence:R.data.recurrence||"none",priority:R.data.priority||"medium"});const M={id:Gt(),role:"assistant",content:`Done! "${R.data.title}" has been added to the calendar.`,timestamp:new Date,quickActions:[{label:"Add another",action:"add a chore called "},{label:"Show chores",action:"show my chores"}]};setTimeout(()=>{l(H=>[...H,M]),m(!1)},500)}catch{const M={id:Gt(),role:"assistant",content:"Sorry, there was an error adding the chore. Please try again.",timestamp:new Date};setTimeout(()=>{l(H=>[...H,M]),m(!1)},500)}}else if(R.type==="complete_chore"&&R.data){const A=ja(R.data.title,e.chores);if(A){const M=A.assigneeId||(($=e.teamMembers[0])==null?void 0:$.id);if(M)try{const H=new Date().toISOString().split("T")[0];await o(A.id,H,M);const G={id:Gt(),role:"assistant",content:`Great job! "${A.title}" has been marked as complete. `,timestamp:new Date,quickActions:[{label:"Show chores",action:"show my chores"},{label:"My stats",action:"show my stats"}]};setTimeout(()=>{l(te=>[...te,G]),m(!1)},500)}catch{const H={id:Gt(),role:"assistant",content:"Sorry, there was an error completing the chore. Please try again.",timestamp:new Date};setTimeout(()=>{l(G=>[...G,H]),m(!1)},500)}else{const H={id:Gt(),role:"assistant",content:"No team members available to complete this chore. Please add team members first.",timestamp:new Date};setTimeout(()=>{l(G=>[...G,H]),m(!1)},500)}}else{const M={id:Gt(),role:"assistant",content:I.text,timestamp:new Date,quickActions:I.quickActions};setTimeout(()=>{l(H=>[...H,M]),m(!1)},300)}}else if(R.type==="assign_chore"&&R.data){const A=ja(R.data.title,e.chores),M=e.teamMembers.find(H=>{var G,te;return H.name.toLowerCase()===((te=(G=R.data)==null?void 0:G.assigneeName)==null?void 0:te.toLowerCase())});if(A&&M)try{await r({...A,assigneeId:M.id});const H={id:Gt(),role:"assistant",content:`Done! "${A.title}" has been assigned to ${M.name}.`,timestamp:new Date};setTimeout(()=>{l(G=>[...G,H]),m(!1)},500)}catch{const H={id:Gt(),role:"assistant",content:"Sorry, there was an error assigning the chore. Please try again.",timestamp:new Date};setTimeout(()=>{l(G=>[...G,H]),m(!1)},500)}else{const H={id:Gt(),role:"assistant",content:A?`Couldn't find team member "${R.data.assigneeName}". Available: ${e.teamMembers.map(G=>G.name).join(", ")}`:`Couldn't find a chore matching "${R.data.title}".`,timestamp:new Date,quickActions:[{label:"Show chores",action:"show my chores"}]};setTimeout(()=>{l(G=>[...G,H]),m(!1)},500)}}else{const A={id:Gt(),role:"assistant",content:I.text,timestamp:new Date,quickActions:I.quickActions};setTimeout(()=>{l(M=>[...M,A]),m(!1)},300)}};return f.jsxs("div",{className:"fixed inset-2 sm:inset-auto sm:bottom-24 sm:right-6 sm:w-96 sm:h-[500px] fluent-card z-50 flex flex-col overflow-hidden animate-slide-up",children:[f.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white px-4 py-3 flex items-center justify-between flex-shrink-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),f.jsx("span",{className:"font-semibold",children:"Chore Assistant"}),f.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:"AI"})]}),f.jsx("button",{onClick:n,className:"text-white/80 hover:text-white",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.map(S=>f.jsxs("div",{children:[f.jsx("div",{className:`flex ${S.role==="user"?"justify-end":"justify-start"}`,children:f.jsx("div",{className:`max-w-[85%] px-4 py-2 rounded-2xl ${S.role==="user"?"bg-accent text-white rounded-br-md":"bg-surface-tertiary text-content-primary rounded-bl-md"}`,children:f.jsx("p",{className:"text-sm whitespace-pre-wrap",children:S.content})})}),S.role==="assistant"&&S.quickActions&&S.quickActions.length>0&&f.jsx("div",{className:"flex flex-wrap gap-2 mt-2 ml-1",children:S.quickActions.map((T,R)=>f.jsx("button",{onClick:()=>E(T.action),className:"text-xs px-3 py-1.5 bg-accent/10 text-accent hover:bg-accent/20 rounded-full transition-colors",children:T.label},R))})]},S.id)),p&&f.jsx("div",{className:"flex justify-start",children:f.jsx("div",{className:"bg-surface-tertiary px-4 py-2 rounded-2xl rounded-bl-md",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-2 h-2 bg-content-secondary rounded-full animate-bounce"}),f.jsx("div",{className:"w-2 h-2 bg-content-secondary rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),f.jsx("div",{className:"w-2 h-2 bg-content-secondary rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),f.jsx("div",{ref:y})]}),f.jsx("form",{onSubmit:_,className:"p-4 border-t border-border flex-shrink-0",children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{ref:b,type:"text",value:u,onChange:S=>h(S.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border border-border rounded-full bg-surface-primary text-content-primary placeholder-content-secondary focus:outline-none focus:ring-2 focus:ring-accent",disabled:p}),f.jsx("button",{type:"submit",disabled:!u.trim()||p,className:"w-10 h-10 bg-accent text-white rounded-full flex items-center justify-center hover:bg-accent-hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})}function VD(){const{state:n,updateChore:e}=ln(),[t,r]=z.useState(!1),[o,a]=z.useState(!1),[l,u]=z.useState(!1),[h,p]=z.useState(!1),[m,y]=z.useState(!1),[b,w]=z.useState(!1),[E,_]=z.useState(!1),[S,T]=z.useState(null),R=AD(n.chores,n.teamMembers),N=CD(n.chores),I=n.chores.filter(ee=>!ee.assigneeId).length,$=ED(n.chores,n.teamMembers);z.useEffect(()=>{p(Vy())},[]),z.useEffect(()=>{const ee=MD();y(ee),PD().then(()=>{w(Qy())})},[]),z.useEffect(()=>{h&&n.chores.length>0&&yg(n.chores,n.teamMembers)},[h,n.chores,n.teamMembers]);const A=async()=>{u(!0);const ee=kD(n.chores,n.teamMembers);for(const[ve,Ae]of ee){const Ne=n.chores.find(Pe=>Pe.id===ve);Ne&&await e({...Ne,assigneeId:Ae})}u(!1)},M=async()=>{const ee=await TD();p(ee),ee&&yg(n.chores,n.teamMembers)},H=async()=>{const ee=await LD();w(ee)},G=()=>{UD(),w(!1),T(null)},te=async()=>{_(!0),T(null);const ee=await HD(n.chores,n.teamMembers);T(ee),_(!1)};return f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:()=>r(!t),className:"fixed bottom-4 right-4 sm:bottom-6 sm:right-6 w-12 h-12 sm:w-14 sm:h-14 bg-accent hover:bg-accent-hover text-white rounded-full shadow-lg flex items-center justify-center z-40 transition-transform hover:scale-105",title:"Calendar Agent",children:[f.jsx("svg",{className:"w-6 h-6 sm:w-7 sm:h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),(I>0||!R.isBalanced)&&f.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:I>0?I:"!"})]}),t&&f.jsxs("div",{className:"fixed bottom-20 sm:bottom-24 right-2 sm:right-6 left-2 sm:left-auto sm:w-80 fluent-card overflow-hidden animate-slide-up z-40",children:[f.jsxs("div",{className:"bg-accent text-white px-4 py-3 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),f.jsx("span",{className:"font-semibold",children:"Calendar Agent"})]}),f.jsx("button",{onClick:()=>r(!1),className:"text-white/80 hover:text-white",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"p-4 space-y-4 max-h-96 overflow-y-auto",children:[f.jsxs("button",{onClick:()=>{r(!1),setTimeout(()=>a(!0),150)},className:"w-full py-3 px-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-md font-medium hover:from-purple-600 hover:to-blue-600 flex items-center justify-center gap-2",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),"Chat with Assistant"]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-content-primary mb-2",children:"Notifications"}),h?f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 rounded-md text-green-600 dark:text-green-400",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),f.jsx("span",{className:"text-sm",children:"Reminders enabled"})]}):f.jsxs("button",{onClick:M,className:"w-full py-2 px-4 bg-surface-tertiary text-content-primary rounded-md text-sm hover:bg-surface-secondary flex items-center justify-center gap-2 transition-colors",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Enable Reminders"]})]}),m&&f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-content-primary mb-2",children:"Google Calendar"}),b?f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-500/10 rounded-md text-green-600 dark:text-green-400 text-sm",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Connected"]}),f.jsx("button",{onClick:te,disabled:E||n.chores.length===0,className:"w-full py-2 px-4 bg-accent text-white rounded-md text-sm hover:bg-accent-hover disabled:opacity-50 flex items-center justify-center gap-2 transition-colors",children:E?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Syncing..."]}):f.jsxs(f.Fragment,{children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Sync to Google Calendar"]})}),S&&f.jsxs("p",{className:"text-xs text-center text-content-secondary",children:["Synced ",S.success," chore",S.success!==1?"s":"",S.failed>0&&`, ${S.failed} failed`]}),f.jsx("button",{onClick:G,className:"w-full py-1 px-2 text-content-secondary text-xs hover:text-content-primary transition-colors",children:"Disconnect"})]}):f.jsxs("button",{onClick:H,className:"w-full py-2 px-4 bg-surface-tertiary text-content-primary rounded-md text-sm hover:bg-surface-secondary flex items-center justify-center gap-2 transition-colors",children:[f.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:f.jsx("path",{fill:"currentColor",d:"M19.5 22h-15A2.5 2.5 0 012 19.5v-15A2.5 2.5 0 014.5 2h15A2.5 2.5 0 0122 4.5v15a2.5 2.5 0 01-2.5 2.5zM9 18h6v-1H9v1zm3-2.5l3.5-3.5-1-1-2.5 2.5-2.5-2.5-1 1 3.5 3.5zM9 6v1h6V6H9z"})}),"Connect Google Calendar"]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-content-primary mb-2",children:"Workload Balance"}),f.jsx("div",{className:`p-3 rounded-md ${R.isBalanced?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-yellow-50 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"}`,children:R.isBalanced?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),f.jsx("span",{className:"text-sm",children:"Workload is balanced"})]}):f.jsx("div",{className:"text-sm space-y-1",children:R.suggestions.map((ee,ve)=>f.jsx("p",{children:ee},ve))})})]}),R.stats.length>0&&f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-content-primary mb-2",children:"Team Stats (Last 7 Days)"}),f.jsx("div",{className:"space-y-2",children:R.stats.map(ee=>f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsx("span",{className:"text-content-secondary",children:ee.memberName}),f.jsxs("span",{className:"text-content-primary font-medium",children:[ee.recentAssignments," chores"]})]},ee.memberId))})]}),N.length>0&&f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-content-primary mb-2",children:"Due Today/Tomorrow"}),f.jsxs("div",{className:"space-y-1",children:[N.slice(0,5).map(ee=>f.jsxs("div",{className:"text-sm text-content-secondary flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-accent"}),ee.title]},ee.id)),N.length>5&&f.jsxs("p",{className:"text-xs text-content-secondary",children:["+",N.length-5," more"]})]})]}),$&&f.jsx("div",{className:"p-3 bg-accent/10 rounded-md",children:f.jsxs("p",{className:"text-sm text-content-accent",children:[f.jsx("strong",{children:"Suggestion:"})," Assign next chore to"," ",f.jsx("strong",{children:$.name})," (least busy)"]})}),I>0&&n.teamMembers.length>0&&f.jsx("button",{onClick:A,disabled:l,className:"w-full py-2 px-4 bg-accent text-white rounded-md font-medium hover:bg-accent-hover disabled:opacity-50 flex items-center justify-center gap-2 transition-colors",children:l?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Assigning..."]}):f.jsxs(f.Fragment,{children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Auto-Assign ",I," Chore",I!==1?"s":""]})})]})]}),o&&f.jsx(WD,{onClose:()=>a(!1)})]})}function qD({members:n,chores:e,dateRange:t}){const r=z.useMemo(()=>{const u=new Date,h=(t==null?void 0:t.start)||u.toISOString().split("T")[0],p=new Date(u.getTime()+10080*60*1e3),m=(t==null?void 0:t.end)||p.toISOString().split("T")[0];return n.map(y=>{const b=e.filter(S=>S.assigneeId!==y.id?!1:S.recurrence==="none"?S.date>=h&&S.date<=m:S.date<=m);let w=0;b.forEach(S=>{const T=S.estimatedMinutes||30;if(S.recurrence==="none")w+=T;else if(S.recurrence==="daily"){const R=new Date(Math.max(new Date(S.date).getTime(),new Date(h).getTime())),N=new Date(m),I=Math.ceil((N.getTime()-R.getTime())/(1e3*60*60*24))+1;w+=T*Math.max(0,I)}else if(S.recurrence==="weekly"){const R=new Date(Math.max(new Date(S.date).getTime(),new Date(h).getTime())),N=new Date(m),I=Math.ceil((N.getTime()-R.getTime())/(1e3*60*60*24*7))+1;w+=T*Math.max(0,I)}else S.recurrence==="monthly"&&(w+=T)});const E=y.weeklyCapacityMinutes||480,_=E>0?Math.round(w/E*100):0;return{member:y,assignedMinutes:w,capacityMinutes:E,utilizationPercent:_,choreCount:b.length}}).sort((y,b)=>b.utilizationPercent-y.utilizationPercent)},[n,e,t]),o=Math.max(...r.map(u=>Math.max(u.assignedMinutes,u.capacityMinutes)),1),a=u=>u<=70?"bg-green-500":u<=90?"bg-yellow-500":"bg-red-500",l=u=>{const h=Math.floor(u/60),p=u%60;return h===0?`${p}m`:p===0?`${h}h`:`${h}h ${p}m`};return n.length===0?f.jsx("div",{className:"text-center py-8 text-content-secondary",children:"No team members yet. Add team members to see workload."}):f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[f.jsxs("div",{className:"fluent-surface p-3 rounded-fluent-md border border-border text-center",children:[f.jsx("div",{className:"text-lg font-bold text-green-500",children:r.filter(u=>u.utilizationPercent<=70).length}),f.jsx("div",{className:"text-xs text-content-secondary",children:"Under Capacity"})]}),f.jsxs("div",{className:"fluent-surface p-3 rounded-fluent-md border border-border text-center",children:[f.jsx("div",{className:"text-lg font-bold text-yellow-500",children:r.filter(u=>u.utilizationPercent>70&&u.utilizationPercent<=90).length}),f.jsx("div",{className:"text-xs text-content-secondary",children:"Near Capacity"})]}),f.jsxs("div",{className:"fluent-surface p-3 rounded-fluent-md border border-border text-center",children:[f.jsx("div",{className:"text-lg font-bold text-red-500",children:r.filter(u=>u.utilizationPercent>90).length}),f.jsx("div",{className:"text-xs text-content-secondary",children:"Over Capacity"})]})]}),f.jsx("div",{className:"space-y-3",children:r.map(({member:u,assignedMinutes:h,capacityMinutes:p,utilizationPercent:m,choreCount:y})=>f.jsxs("div",{className:"fluent-surface p-3 rounded-fluent-md border border-border",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[u.avatarUrl?f.jsx("img",{src:u.avatarUrl,alt:u.name,className:"w-6 h-6 rounded-full object-cover"}):f.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:u.color},children:u.name.charAt(0).toUpperCase()}),f.jsx("span",{className:"text-sm font-medium text-content-primary",children:u.name}),f.jsxs("span",{className:"text-xs text-content-secondary",children:["(",y," chores)"]})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("span",{className:`text-sm font-bold ${m<=70?"text-green-500":m<=90?"text-yellow-500":"text-red-500"}`,children:[m,"%"]}),f.jsxs("span",{className:"text-xs text-content-secondary ml-1",children:["(",l(h)," / ",l(p),")"]})]})]}),f.jsxs("div",{className:"relative h-4 bg-surface-tertiary rounded-full overflow-hidden",children:[f.jsx("div",{className:"absolute h-full bg-surface-secondary",style:{width:`${p/o*100}%`}}),f.jsx("div",{className:`absolute h-full ${a(m)} transition-all duration-300`,style:{width:`${h/o*100}%`}}),f.jsx("div",{className:"absolute h-full w-0.5 bg-content-secondary",style:{left:`${p/o*100}%`}})]})]},u.id))}),f.jsxs("div",{className:"flex justify-center gap-6 pt-4 text-xs text-content-secondary",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),f.jsx("span",{children:"Under 70%"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500"}),f.jsx("span",{children:"70-90%"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-red-500"}),f.jsx("span",{children:"Over 90%"})]})]})]})}function kg(n){const e=new Date(n),r=new Date().getTime()-e.getTime(),o=Math.floor(r/(1e3*60)),a=Math.floor(r/(1e3*60*60)),l=Math.floor(r/(1e3*60*60*24));return o<1?"Just now":o<60?`${o}m ago`:a<24?`${a}h ago`:l<7?`${l}d ago`:e.toLocaleDateString()}function GD({onClose:n}){const{state:e}=ln(),[t,r]=z.useState("overview"),o=z.useMemo(()=>[...e.completions].sort((u,h)=>new Date(h.completedAt).getTime()-new Date(u.completedAt).getTime()),[e.completions]),a=z.useMemo(()=>{const u=new Date().toISOString().split("T")[0],h=new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0],p=new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],m=e.completions.filter(_=>_.instanceDate===u).length,y=e.completions.filter(_=>_.instanceDate>=h).length,b=e.completions.filter(_=>_.instanceDate>=p).length,w=e.chores.filter(_=>_.date===u&&!e.completions.some(S=>S.choreId===_.id&&S.instanceDate===u)).length,E=e.chores.filter(_=>_.date<u&&_.recurrence==="none"?!e.completions.some(S=>S.choreId===_.id&&S.instanceDate===_.date):!1).length;return{totalChores:e.chores.length,completedToday:m,completedThisWeek:y,completedThisMonth:b,pendingToday:w,overdue:E}},[e.chores,e.completions]),l=z.useMemo(()=>{const u=new Date(Date.now()-6048e5).toISOString().split("T")[0],h=new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0];return e.teamMembers.map(p=>{const m=e.completions.filter(N=>N.completedBy===p.id),y=e.chores.filter(N=>N.assigneeId===p.id),b=[...new Set(m.map(N=>N.instanceDate))].sort().reverse();let w=0,E=0,_=0,S=null;for(const N of b){const I=new Date(N);S===null?_=1:(S.getTime()-I.getTime())/864e5===1?_++:(E=Math.max(E,_),_=1),S=I}E=Math.max(E,_);let R=new Date;w=0;for(let N=0;N<365;N++){const I=R.toISOString().split("T")[0];if(b.includes(I))w++,R=new Date(R.getTime()-1440*60*1e3);else break}return{memberId:p.id,memberName:p.name,memberColor:p.color,memberAvatar:p.avatarUrl,totalCompleted:m.length,completedThisWeek:m.filter(N=>N.instanceDate>=u).length,completedThisMonth:m.filter(N=>N.instanceDate>=h).length,currentStreak:w,longestStreak:E,completionRate:y.length>0?Math.round(m.length/Math.max(y.length,1)*100):0,totalAssigned:y.length,points:p.points||0,badges:p.badges||[],workloadMinutes:y.reduce((N,I)=>N+(I.estimatedMinutes||0),0)}}).sort((p,m)=>m.totalCompleted-p.totalCompleted)},[e.teamMembers,e.completions,e.chores]);return f.jsx("div",{className:"fixed inset-0 bg-overlay flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"fluent-card w-full max-w-4xl max-h-[90vh] overflow-hidden animate-fluent-appear shadow-fluent-28",children:[f.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[f.jsx("h2",{className:"fluent-title text-xl font-semibold text-content-primary",children:"Dashboard"}),f.jsx("button",{onClick:n,className:"text-content-secondary hover:text-content-primary hover:bg-subtle-background-hover rounded-fluent-sm transition-all duration-fast p-1.5",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex border-b border-border px-6",children:[f.jsx("button",{onClick:()=>r("overview"),className:`px-4 py-3 text-sm font-medium transition-colors ${t==="overview"?"text-brand-primary border-b-2 border-brand-primary":"text-content-secondary hover:text-content-primary"}`,children:"Overview"}),f.jsx("button",{onClick:()=>r("activity"),className:`px-4 py-3 text-sm font-medium transition-colors ${t==="activity"?"text-brand-primary border-b-2 border-brand-primary":"text-content-secondary hover:text-content-primary"}`,children:"Activity"}),f.jsx("button",{onClick:()=>r("workload"),className:`px-4 py-3 text-sm font-medium transition-colors ${t==="workload"?"text-brand-primary border-b-2 border-brand-primary":"text-content-secondary hover:text-content-primary"}`,children:"Workload"}),f.jsx("button",{onClick:()=>r("achievements"),className:`px-4 py-3 text-sm font-medium transition-colors ${t==="achievements"?"text-brand-primary border-b-2 border-brand-primary":"text-content-secondary hover:text-content-primary"}`,children:"Achievements"})]}),f.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:t==="overview"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[f.jsxs("div",{className:"fluent-surface p-4 rounded-fluent-md border border-border",children:[f.jsx("div",{className:"text-2xl font-bold text-content-primary",children:a.completedToday}),f.jsx("div",{className:"text-sm text-content-secondary",children:"Completed Today"})]}),f.jsxs("div",{className:"fluent-surface p-4 rounded-fluent-md border border-border",children:[f.jsx("div",{className:"text-2xl font-bold text-content-primary",children:a.pendingToday}),f.jsx("div",{className:"text-sm text-content-secondary",children:"Pending Today"})]}),f.jsxs("div",{className:"fluent-surface p-4 rounded-fluent-md border border-border",children:[f.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:a.overdue}),f.jsx("div",{className:"text-sm text-content-secondary",children:"Overdue"})]}),f.jsxs("div",{className:"fluent-surface p-4 rounded-fluent-md border border-border",children:[f.jsx("div",{className:"text-2xl font-bold text-content-primary",children:a.completedThisWeek}),f.jsx("div",{className:"text-sm text-content-secondary",children:"This Week"})]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"fluent-title text-lg font-semibold text-content-primary mb-4",children:"Leaderboard"}),f.jsxs("div",{className:"space-y-2",children:[l.map((u,h)=>f.jsxs("div",{className:"fluent-surface flex items-center gap-4 p-4 rounded-fluent-md border border-border",children:[f.jsx("div",{className:`w-8 h-8 rounded-fluent-circle flex items-center justify-center font-bold text-sm ${h===0?"bg-yellow-500 text-white":h===1?"bg-gray-400 text-white":h===2?"bg-amber-700 text-white":"bg-surface-tertiary text-content-secondary"}`,children:h+1}),f.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[u.memberAvatar?f.jsx("img",{src:u.memberAvatar,alt:u.memberName,className:"w-8 h-8 rounded-fluent-circle object-cover flex-shrink-0"}):f.jsx("div",{className:"w-8 h-8 rounded-fluent-circle flex-shrink-0 flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:u.memberColor},children:u.memberName.charAt(0).toUpperCase()}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("span",{className:"font-medium text-content-primary truncate block",children:u.memberName}),u.badges.length>0&&f.jsxs("div",{className:"flex gap-1 mt-0.5",children:[u.badges.slice(0,3).map(p=>{const m=Jg(p);return m?f.jsx("span",{title:m.name,className:"text-xs",children:m.icon},p):null}),u.badges.length>3&&f.jsxs("span",{className:"text-xs text-content-secondary",children:["+",u.badges.length-3]})]})]})]}),f.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-bold text-brand-primary",children:u.points}),f.jsx("div",{className:"text-xs text-content-secondary",children:"Points"})]}),f.jsxs("div",{className:"text-center hidden sm:block",children:[f.jsx("div",{className:"font-bold text-content-primary",children:u.totalCompleted}),f.jsx("div",{className:"text-xs text-content-secondary",children:"Total"})]}),f.jsxs("div",{className:"text-center hidden md:block",children:[f.jsx("div",{className:"font-bold text-content-primary",children:u.completedThisWeek}),f.jsx("div",{className:"text-xs text-content-secondary",children:"Week"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"font-bold text-orange-500",children:u.currentStreak}),f.jsx("div",{className:"text-xs text-content-secondary",children:"Streak"})]})]})]},u.memberId)),l.length===0&&f.jsx("p",{className:"text-content-secondary text-center py-8",children:"No team members yet. Add team members to see stats."})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"fluent-title text-lg font-semibold text-content-primary mb-4",children:"Recent Completions"}),f.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[o.slice(0,5).map(u=>{const h=e.chores.find(m=>m.id===u.choreId),p=e.teamMembers.find(m=>m.id===u.completedBy);return f.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-fluent-sm hover:bg-subtle-background-hover",children:[f.jsx("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("span",{className:"text-sm text-content-primary",children:(h==null?void 0:h.title)||"Unknown chore"}),f.jsxs("span",{className:"text-xs text-content-secondary ml-2",children:["by ",(p==null?void 0:p.name)||"Unknown"]})]}),f.jsx("span",{className:"text-xs text-content-secondary flex-shrink-0",children:kg(u.completedAt)})]},u.id)}),e.completions.length===0&&f.jsx("p",{className:"text-content-secondary text-center py-8",children:"No completions yet. Complete some chores to see activity."}),e.completions.length>5&&f.jsx("button",{onClick:()=>r("activity"),className:"w-full text-center text-sm text-brand-primary hover:text-brand-primary/80 py-2",children:"View all activity "})]})]})]}):t==="activity"?f.jsxs("div",{children:[f.jsxs("h3",{className:"fluent-title text-lg font-semibold text-content-primary mb-4",children:["Activity Feed (",o.length," completions)"]}),f.jsxs("div",{className:"space-y-3",children:[o.map(u=>{var y;const h=e.chores.find(b=>b.id===u.choreId),p=e.teamMembers.find(b=>b.id===u.completedBy),m=u.pointsEarned||0;return f.jsxs("div",{className:"fluent-surface flex items-center gap-4 p-4 rounded-fluent-md border border-border hover:shadow-fluent-4 transition-all",children:[p!=null&&p.avatarUrl?f.jsx("img",{src:p.avatarUrl,alt:p.name,className:"w-10 h-10 rounded-fluent-circle object-cover flex-shrink-0"}):f.jsx("div",{className:"w-10 h-10 rounded-fluent-circle flex-shrink-0 flex items-center justify-center text-white font-bold",style:{backgroundColor:(p==null?void 0:p.color)||"#888"},children:((y=p==null?void 0:p.name)==null?void 0:y.charAt(0).toUpperCase())||"?"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-medium text-content-primary",children:(p==null?void 0:p.name)||"Unknown"}),f.jsx("span",{className:"text-content-secondary",children:"completed"}),f.jsx("span",{className:"font-medium text-content-primary truncate",children:(h==null?void 0:h.title)||"Unknown chore"})]}),f.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-content-secondary",children:[f.jsx("span",{children:kg(u.completedAt)}),f.jsx("span",{children:""}),f.jsx("span",{children:new Date(u.instanceDate).toLocaleDateString()}),m>0&&f.jsxs(f.Fragment,{children:[f.jsx("span",{children:""}),f.jsxs("span",{className:"text-brand-primary font-medium",children:["+",m," pts"]})]})]})]}),f.jsx("div",{className:"flex-shrink-0",children:f.jsx("div",{className:"w-8 h-8 rounded-fluent-circle bg-green-500/20 flex items-center justify-center",children:f.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]},u.id)}),o.length===0&&f.jsxs("div",{className:"text-center py-12",children:[f.jsx("svg",{className:"w-12 h-12 mx-auto text-content-secondary opacity-50 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),f.jsx("p",{className:"text-content-secondary",children:"No completions yet. Complete some chores to see activity."})]})]})]}):t==="achievements"?f.jsx("div",{className:"space-y-6",children:["completion","streak","points","special"].map(u=>{const h=Ua.filter(m=>m.type===u),p=h.filter(m=>e.teamMembers.some(y=>{var b;return(b=y.badges)==null?void 0:b.includes(m.id)})).length;return f.jsxs("div",{children:[f.jsxs("h3",{className:"fluent-title text-lg font-semibold text-content-primary mb-3 capitalize",children:[u," Badges (",p,"/",h.length,")"]}),f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:h.map(m=>{const y=e.teamMembers.filter(w=>{var E;return(E=w.badges)==null?void 0:E.includes(m.id)}),b=y.length>0;return f.jsxs("div",{className:`fluent-surface p-4 rounded-fluent-md border border-border text-center transition-all ${b?"hover:shadow-fluent-8":"opacity-50"}`,children:[f.jsx("div",{className:`text-3xl mb-2 ${b?"":"grayscale"}`,children:m.icon}),f.jsx("div",{className:`text-sm font-medium ${b?"text-content-primary":"text-content-secondary"}`,children:m.name}),f.jsx("div",{className:"text-xs text-content-secondary mt-1",children:m.description}),b&&f.jsxs("div",{className:"mt-2 flex justify-center gap-1",children:[y.slice(0,3).map(w=>f.jsx("div",{className:"w-5 h-5 rounded-full text-white text-xs flex items-center justify-center",style:{backgroundColor:w.color},title:w.name,children:w.name.charAt(0)},w.id)),y.length>3&&f.jsxs("span",{className:"text-xs text-content-secondary",children:["+",y.length-3]})]})]},m.id)})})]},u)})}):t==="workload"?f.jsxs("div",{children:[f.jsx("h3",{className:"fluent-title text-lg font-semibold text-content-primary mb-4",children:"Team Workload (This Week)"}),f.jsx(qD,{members:e.teamMembers,chores:e.chores})]}):null})]})})}const QD=["Cooking","Cleaning","Organizing","Laundry","Dishes","Yard Work","Pet Care","Shopping","Repairs","Childcare"];function YD({skills:n,onChange:e,placeholder:t="Add a skill..."}){const[r,o]=z.useState(""),[a,l]=z.useState(!1),u=y=>{const b=y.trim();b&&!n.includes(b)&&e([...n,b]),o(""),l(!1)},h=y=>{e(n.filter(b=>b!==y))},p=y=>{y.key==="Enter"&&r.trim()?(y.preventDefault(),u(r)):y.key==="Backspace"&&!r&&n.length>0&&h(n[n.length-1])},m=QD.filter(y=>!n.includes(y)&&y.toLowerCase().includes(r.toLowerCase()));return f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:n.map(y=>f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-brand-primary/10 text-brand-primary rounded-fluent-sm text-sm",children:[y,f.jsx("button",{type:"button",onClick:()=>h(y),className:"hover:bg-brand-primary/20 rounded-full p-0.5 transition-colors",children:f.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},y))}),f.jsx("input",{type:"text",value:r,onChange:y=>{o(y.target.value),l(!0)},onKeyDown:p,onFocus:()=>l(!0),onBlur:()=>setTimeout(()=>l(!1),200),placeholder:t,className:"w-full px-3 py-2 border border-border rounded-fluent-md bg-input-background text-content-primary placeholder-content-disabled focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent transition-all"}),a&&m.length>0&&f.jsx("div",{className:"absolute z-10 w-full mt-1 bg-surface-primary border border-border rounded-fluent-md shadow-fluent-16 max-h-40 overflow-y-auto",children:m.map(y=>f.jsx("button",{type:"button",onClick:()=>u(y),className:"w-full px-3 py-2 text-left text-content-primary hover:bg-subtle-background-hover transition-colors text-sm",children:y},y))})]})}const KD=[{value:0,label:"Sun"},{value:1,label:"Mon"},{value:2,label:"Tue"},{value:3,label:"Wed"},{value:4,label:"Thu"},{value:5,label:"Fri"},{value:6,label:"Sat"}];function JD({member:n,onClose:e}){var T,R,N;const{updateMember:t,getMemberStats:r}=ln(),o=z.useRef(null),[a,l]=z.useState({name:n.name,email:n.email||"",avatarUrl:n.avatarUrl||"",skills:n.skills||[],workingHoursStart:((T=n.workingHours)==null?void 0:T.start)||"09:00",workingHoursEnd:((R=n.workingHours)==null?void 0:R.end)||"17:00",workingDays:((N=n.workingHours)==null?void 0:N.days)||[1,2,3,4,5],weeklyCapacityMinutes:n.weeklyCapacityMinutes||480}),[u,h]=z.useState("profile"),[p,m]=z.useState(!1),y=r(n.id),b=async I=>{I.preventDefault(),m(!0);const $={...n,name:a.name,email:a.email||void 0,avatarUrl:a.avatarUrl||void 0,skills:a.skills.length>0?a.skills:void 0,workingHours:{start:a.workingHoursStart,end:a.workingHoursEnd,days:a.workingDays},weeklyCapacityMinutes:a.weeklyCapacityMinutes};await t($),m(!1),e()},w=I=>{const $=a.workingDays.includes(I)?a.workingDays.filter(A=>A!==I):[...a.workingDays,I].sort();l({...a,workingDays:$})},E=I=>{var A;const $=(A=I.target.files)==null?void 0:A[0];if($){const M=new FileReader;M.onloadend=()=>{l({...a,avatarUrl:M.result})},M.readAsDataURL($)}},_=n.badges||[],S=Ua;return f.jsx("div",{className:"fixed inset-0 bg-overlay flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"fluent-card w-full max-w-4xl max-h-[90vh] overflow-hidden animate-fluent-appear shadow-fluent-28",children:[f.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[f.jsx("h2",{className:"fluent-title text-xl font-semibold text-content-primary",children:"Member Profile"}),f.jsx("button",{onClick:e,className:"text-content-secondary hover:text-content-primary hover:bg-subtle-background-hover rounded-fluent-sm transition-all duration-fast p-1.5",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"flex border-b border-border",children:[f.jsx("button",{onClick:()=>h("profile"),className:`px-6 py-3 text-sm font-medium transition-colors ${u==="profile"?"text-brand-primary border-b-2 border-brand-primary":"text-content-secondary hover:text-content-primary"}`,children:"Profile"}),f.jsx("button",{onClick:()=>h("badges"),className:`px-6 py-3 text-sm font-medium transition-colors ${u==="badges"?"text-brand-primary border-b-2 border-brand-primary":"text-content-secondary hover:text-content-primary"}`,children:"Badges & Stats"})]}),f.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-160px)]",children:u==="profile"?f.jsxs("form",{onSubmit:b,className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("div",{className:"relative",children:[a.avatarUrl?f.jsx("img",{src:a.avatarUrl,alt:a.name,className:"w-24 h-24 rounded-fluent-circle object-cover border-2 border-border"}):f.jsx("div",{className:"w-24 h-24 rounded-fluent-circle flex items-center justify-center text-3xl font-bold text-white",style:{backgroundColor:n.color},children:a.name.charAt(0).toUpperCase()}),f.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:E,className:"hidden"})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("button",{type:"button",onClick:()=>{var I;return(I=o.current)==null?void 0:I.click()},className:"px-4 py-2 bg-surface-secondary hover:bg-surface-tertiary text-content-primary rounded-fluent-md transition-colors text-sm",children:"Upload Photo"}),a.avatarUrl&&f.jsx("button",{type:"button",onClick:()=>l({...a,avatarUrl:""}),className:"ml-2 px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-fluent-md transition-colors text-sm",children:"Remove"}),f.jsx("p",{className:"text-xs text-content-secondary mt-2",children:"Or paste an image URL below"}),f.jsx("input",{type:"url",value:a.avatarUrl,onChange:I=>l({...a,avatarUrl:I.target.value}),placeholder:"https://example.com/avatar.jpg",className:"mt-2 w-full px-3 py-2 border border-border rounded-fluent-md bg-input-background text-content-primary placeholder-content-disabled focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent transition-all text-sm"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-content-primary mb-2",children:"Name"}),f.jsx("input",{type:"text",value:a.name,onChange:I=>l({...a,name:I.target.value}),required:!0,className:"w-full px-3 py-2 border border-border rounded-fluent-md bg-input-background text-content-primary placeholder-content-disabled focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent transition-all"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-content-primary mb-2",children:"Email"}),f.jsx("input",{type:"email",value:a.email,onChange:I=>l({...a,email:I.target.value}),placeholder:"member@example.com",className:"w-full px-3 py-2 border border-border rounded-fluent-md bg-input-background text-content-primary placeholder-content-disabled focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent transition-all"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-content-primary mb-2",children:"Skills"}),f.jsx(YD,{skills:a.skills,onChange:I=>l({...a,skills:I})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-content-primary mb-2",children:"Working Hours"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"time",value:a.workingHoursStart,onChange:I=>l({...a,workingHoursStart:I.target.value}),className:"px-3 py-2 border border-border rounded-fluent-md bg-input-background text-content-primary focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent transition-all"}),f.jsx("span",{className:"text-content-secondary",children:"to"}),f.jsx("input",{type:"time",value:a.workingHoursEnd,onChange:I=>l({...a,workingHoursEnd:I.target.value}),className:"px-3 py-2 border border-border rounded-fluent-md bg-input-background text-content-primary focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent transition-all"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-content-primary mb-2",children:"Working Days"}),f.jsx("div",{className:"flex gap-2",children:KD.map(I=>f.jsx("button",{type:"button",onClick:()=>w(I.value),className:`w-10 h-10 rounded-fluent-sm text-sm font-medium transition-colors ${a.workingDays.includes(I.value)?"bg-brand-primary text-white":"bg-surface-secondary text-content-secondary hover:bg-surface-tertiary"}`,children:I.label},I.value))})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-medium text-content-primary mb-2",children:["Weekly Capacity: ",Math.floor(a.weeklyCapacityMinutes/60),"h ",a.weeklyCapacityMinutes%60,"m"]}),f.jsx("input",{type:"range",min:0,max:2400,step:30,value:a.weeklyCapacityMinutes,onChange:I=>l({...a,weeklyCapacityMinutes:parseInt(I.target.value)}),className:"w-full accent-brand-primary"}),f.jsxs("div",{className:"flex justify-between text-xs text-content-secondary mt-1",children:[f.jsx("span",{children:"0h"}),f.jsx("span",{children:"20h"}),f.jsx("span",{children:"40h"})]})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border",children:[f.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-content-primary hover:bg-subtle-background-hover rounded-fluent-md transition-colors",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-brand-primary text-white rounded-fluent-md hover:bg-brand-primary/90 transition-colors disabled:opacity-50",children:p?"Saving...":"Save Profile"})]})]}):f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"fluent-surface p-4 rounded-fluent-md border border-border text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-brand-primary",children:n.points||0}),f.jsx("div",{className:"text-sm text-content-secondary",children:"Points"})]}),f.jsxs("div",{className:"fluent-surface p-4 rounded-fluent-md border border-border text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-content-primary",children:y.totalCompleted}),f.jsx("div",{className:"text-sm text-content-secondary",children:"Completed"})]}),f.jsxs("div",{className:"fluent-surface p-4 rounded-fluent-md border border-border text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-orange-500",children:y.currentStreak}),f.jsx("div",{className:"text-sm text-content-secondary",children:"Current Streak"})]}),f.jsxs("div",{className:"fluent-surface p-4 rounded-fluent-md border border-border text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-content-primary",children:y.longestStreak}),f.jsx("div",{className:"text-sm text-content-secondary",children:"Best Streak"})]})]}),f.jsxs("div",{children:[f.jsxs("h3",{className:"text-lg font-semibold text-content-primary mb-3",children:["Earned Badges (",_.length,")"]}),_.length>0?f.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:_.map(I=>{const $=Jg(I);return $?f.jsxs("div",{className:"fluent-surface p-3 rounded-fluent-md border border-border text-center hover:shadow-fluent-8 transition-shadow",children:[f.jsx("div",{className:"text-3xl mb-1",children:$.icon}),f.jsx("div",{className:"text-sm font-medium text-content-primary",children:$.name}),f.jsx("div",{className:"text-xs text-content-secondary",children:$.description})]},I):null})}):f.jsx("p",{className:"text-content-secondary text-center py-6",children:"No badges earned yet. Complete chores to earn badges!"})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-content-primary mb-3",children:"Available Badges"}),f.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:S.filter(I=>!_.includes(I.id)).map(I=>f.jsxs("div",{className:"fluent-surface p-3 rounded-fluent-md border border-border text-center opacity-50",children:[f.jsx("div",{className:"text-3xl mb-1 grayscale",children:I.icon}),f.jsx("div",{className:"text-sm font-medium text-content-secondary",children:I.name}),f.jsx("div",{className:"text-xs text-content-disabled",children:I.description})]},I.id))})]})]})})]})})}function ZD({member:n,onClose:e}){const{state:t,addAvailability:r,deleteAvailability:o}=ln(),[a,l]=z.useState(""),[u,h]=z.useState(""),[p,m]=z.useState(""),y=t.availability.filter(_=>_.memberId===n.id),b=async _=>{_.preventDefault(),a&&u&&(await r(n.id,a,u,p||void 0),l(""),h(""),m(""))},w=async _=>{await o(_)},E=_=>new Date(_).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});return f.jsx("div",{className:"fixed inset-0 bg-overlay flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"fluent-card w-full max-w-md max-h-[90vh] overflow-hidden animate-fluent-appear shadow-fluent-28",children:[f.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-4 h-4 rounded-fluent-circle",style:{backgroundColor:n.color}}),f.jsxs("h2",{className:"fluent-title text-lg font-semibold text-content-primary",children:[n.name,"'s Availability"]})]}),f.jsx("button",{onClick:e,className:"text-content-secondary hover:text-content-primary hover:bg-subtle-background-hover rounded-fluent-sm transition-all duration-fast p-1.5",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:[f.jsxs("form",{onSubmit:b,className:"mb-6",children:[f.jsx("h3",{className:"text-sm font-medium text-content-primary mb-3",children:"Set Unavailable Period"}),f.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-content-secondary mb-1",children:"Start Date"}),f.jsx("input",{type:"date",value:a,onChange:_=>l(_.target.value),className:"fluent-input text-sm w-full",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-content-secondary mb-1",children:"End Date"}),f.jsx("input",{type:"date",value:u,onChange:_=>h(_.target.value),min:a,className:"fluent-input text-sm w-full",required:!0})]})]}),f.jsxs("div",{className:"mb-3",children:[f.jsx("label",{className:"block text-xs text-content-secondary mb-1",children:"Reason (optional)"}),f.jsx("input",{type:"text",value:p,onChange:_=>m(_.target.value),placeholder:"e.g., Vacation, Sick leave...",className:"fluent-input text-sm w-full"})]}),f.jsx("button",{type:"submit",className:"fluent-button w-full py-2 text-sm",children:"Add Unavailable Period"})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-content-primary mb-3",children:"Unavailable Periods"}),y.length===0?f.jsx("p",{className:"text-sm text-content-secondary italic text-center py-4",children:"No unavailable periods set"}):f.jsx("ul",{className:"space-y-2",children:y.map(_=>f.jsxs("li",{className:"flex items-center justify-between p-3 rounded-fluent-sm bg-surface-tertiary border border-border",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"text-sm text-content-primary",children:[E(_.startDate)," - ",E(_.endDate)]}),_.reason&&f.jsx("div",{className:"text-xs text-content-secondary mt-0.5",children:_.reason})]}),f.jsx("button",{onClick:()=>w(_.id),className:"text-content-secondary hover:text-red-500 hover:bg-red-500/10 rounded-fluent-sm p-1.5 transition-all duration-fast",title:"Remove period",children:f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},_.id))})]})]})]})})}function XD({onClick:n}){return f.jsx("button",{onClick:n,className:"fixed bottom-4 left-4 sm:bottom-6 sm:left-6 w-14 h-14 bg-brand-primary hover:bg-brand-primary/90 text-white rounded-full shadow-lg flex items-center justify-center z-30 transition-all hover:scale-105 active:scale-95","aria-label":"Add new chore",children:f.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}const eR=[{key:"c",description:"Create new chore"},{key:"t",description:"Go to today"},{key:" or j",description:"Next period"},{key:" or k",description:"Previous period"},{key:"1 or d",description:"Day view"},{key:"2 or w",description:"Week view"},{key:"3 or m",description:"Month view"},{key:"4 or a",description:"Agenda view"},{key:"/",description:"Focus search"},{key:"Escape",description:"Close modal/popover"},{key:"?",description:"Show keyboard shortcuts"}];function tR({isOpen:n,onClose:e}){return n?f.jsx("div",{className:"fixed inset-0 bg-overlay flex items-center justify-center z-[200] p-4",onClick:e,children:f.jsxs("div",{className:"fluent-card w-full max-w-md animate-fluent-appear",onClick:t=>t.stopPropagation(),children:[f.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[f.jsx("h3",{className:"fluent-title text-lg font-semibold text-content-primary",children:"Keyboard Shortcuts"}),f.jsx("button",{onClick:e,className:"text-content-secondary hover:text-content-primary hover:bg-subtle-background-hover rounded-fluent-sm transition-all duration-fast p-1.5",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsx("div",{className:"p-6",children:f.jsx("div",{className:"space-y-2",children:eR.map(t=>f.jsxs("div",{className:"flex items-center justify-between py-1",children:[f.jsx("span",{className:"text-sm text-content-secondary",children:t.description}),f.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-surface-tertiary text-content-primary rounded-fluent-sm border border-border",children:t.key})]},t.key))})}),f.jsx("div",{className:"px-6 py-4 border-t border-border",children:f.jsxs("p",{className:"text-xs text-content-secondary text-center",children:["Press ",f.jsx("kbd",{className:"px-1.5 py-0.5 text-xs font-mono bg-surface-tertiary rounded border border-border",children:"?"})," anytime to show this help"]})})]})}):null}function nR({onContinue:n}){const[e,t]=z.useState("verifying"),[r,o]=z.useState(null);return z.useEffect(()=>{const l=setTimeout(async()=>{const u=window.location.hash;if(u.includes("access_token"))t("success"),window.history.replaceState(null,"",window.location.pathname);else if(u.includes("error")){const p=new URLSearchParams(u.substring(1)).get("error_description")||"Verification failed";o(decodeURIComponent(p.replace(/\+/g," "))),t("error")}else t("success")},500);return()=>clearTimeout(l)},[]),f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"theme-background"}),f.jsxs("div",{className:"min-h-screen flex items-center justify-center relative px-4 py-8",children:[f.jsx("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4",children:f.jsx(Pa,{})}),f.jsxs("div",{className:"fluent-card p-6 sm:p-8 w-full max-w-md animate-fluent-appear text-center",children:[f.jsx("div",{className:"flex justify-center mb-6",children:f.jsx(La,{size:"lg",showText:!0})}),e==="verifying"&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand"})}),f.jsx("h2",{className:"text-xl font-semibold text-content-primary mb-2",children:"Verifying your email..."}),f.jsx("p",{className:"text-content-secondary text-sm",children:"Please wait while we confirm your email address."})]}),e==="success"&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center",children:f.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),f.jsx("h2",{className:"text-xl font-semibold text-content-primary mb-2",children:"Email Verified!"}),f.jsx("p",{className:"text-content-secondary text-sm mb-6",children:"Your email has been successfully verified. You can now sign in to your account."}),f.jsx("button",{onClick:n,className:"fluent-button w-full py-2.5",children:"Continue to Sign In"})]}),e==="error"&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center",children:f.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),f.jsx("h2",{className:"text-xl font-semibold text-content-primary mb-2",children:"Verification Failed"}),f.jsx("p",{className:"text-content-secondary text-sm mb-2",children:"We couldn't verify your email address."}),r&&f.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-fluent-sm text-red-500 text-sm mb-6",children:r}),f.jsx("button",{onClick:n,className:"fluent-button w-full py-2.5",children:"Back to Sign In"})]})]})]})]})}function rR({onComplete:n}){const[e,t]=z.useState("input"),[r,o]=z.useState(""),[a,l]=z.useState(""),[u,h]=z.useState(null),p=async y=>{if(y.preventDefault(),h(null),r!==a){h("Passwords do not match");return}if(r.length<6){h("Password must be at least 6 characters");return}t("loading");const{error:b}=await je.auth.updateUser({password:r});b?(h(b.message),t("error")):t("success")},m=async()=>{await je.auth.signOut(),window.history.replaceState(null,"",window.location.pathname),n()};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"theme-background"}),f.jsxs("div",{className:"min-h-screen flex items-center justify-center relative px-4 py-8",children:[f.jsx("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4",children:f.jsx(Pa,{})}),f.jsxs("div",{className:"fluent-card p-6 sm:p-8 w-full max-w-md animate-fluent-appear",children:[f.jsx("div",{className:"flex justify-center mb-6",children:f.jsx(La,{size:"lg",showText:!0})}),e==="success"?f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center",children:f.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),f.jsx("h2",{className:"text-xl font-semibold text-content-primary mb-2",children:"Password Updated!"}),f.jsx("p",{className:"text-content-secondary text-sm mb-6",children:"Your password has been successfully reset. You can now sign in with your new password."}),f.jsx("button",{onClick:m,className:"fluent-button w-full py-2.5",children:"Continue to Sign In"})]}):f.jsxs(f.Fragment,{children:[f.jsx("h2",{className:"text-xl font-semibold text-content-primary text-center mb-2",children:"Reset Your Password"}),f.jsx("p",{className:"text-content-secondary text-sm text-center mb-6",children:"Enter your new password below."}),f.jsxs("form",{onSubmit:p,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"New Password"}),f.jsx("input",{type:"password",value:r,onChange:y=>o(y.target.value),className:"fluent-input w-full",required:!0,minLength:6,placeholder:"Enter new password",disabled:e==="loading"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"fluent-label block text-sm font-medium text-content-primary mb-1",children:"Confirm Password"}),f.jsx("input",{type:"password",value:a,onChange:y=>l(y.target.value),className:"fluent-input w-full",required:!0,minLength:6,placeholder:"Confirm new password",disabled:e==="loading"})]}),u&&f.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-fluent-sm text-red-500 text-sm",children:u}),f.jsx("button",{type:"submit",disabled:e==="loading",className:"fluent-button w-full py-2.5",children:e==="loading"?"Updating...":"Reset Password"})]}),f.jsx("div",{className:"mt-4 text-center",children:f.jsx("button",{onClick:m,className:"text-content-secondary hover:text-brand text-sm transition-colors duration-fast",disabled:e==="loading",children:"Cancel and return to sign in"})})]})]})]})]})}function sR(){const{state:n}=ln(),{user:e,loading:t,isEmailVerification:r,isPasswordReset:o,clearEmailVerification:a,clearPasswordReset:l}=td(),u=z.useRef(null),[h,p]=z.useState(!1),[m,y]=z.useState(null),[b,w]=z.useState(void 0),[E,_]=z.useState(void 0),[S,T]=z.useState(!1),[R,N]=z.useState(!1),[I,$]=z.useState("calendar"),[A,M]=z.useState(""),[H,G]=z.useState(!1),[te,ee]=z.useState(new Set),[ve,Ae]=z.useState(null),[Ne,Pe]=z.useState(null),ye=z.useRef(null),me=z.useMemo(()=>{const{start:se,end:Se}=Ud(),be=Ld(n.chores,n.teamMembers,n.completions,se,Se);return new Set(be.map(Te=>Te.date))},[n.chores,n.teamMembers,n.completions]),K=z.useCallback(se=>{var Se;(Se=u.current)==null||Se.gotoDate(se)},[]),oe=z.useCallback(se=>{ee(Se=>{const be=new Set(Se);return be.has(se)?be.delete(se):be.add(se),be})},[]),J=se=>{y(null),w(void 0),_(se),p(!0)},O=(se,Se)=>{y(se),w(Se),_(void 0),p(!0)},F=()=>{p(!1),y(null),w(void 0),_(void 0)},ge=()=>{T(!S)},we=()=>{N(!0)},Q=se=>{var be,Te,lt,tr,ks,nr,jr,Cs,As;const Se=se.target.tagName==="INPUT"||se.target.tagName==="TEXTAREA";if(se.key==="Escape"){if(H){G(!1);return}if(ve){Ae(null);return}if(Ne){Pe(null);return}if(h){F();return}if(R){N(!1);return}if(document.activeElement===ye.current){(be=ye.current)==null||be.blur();return}}if(!Se)switch(se.key.toLowerCase()){case"c":!h&&!R&&!H&&J();break;case"t":(Te=u.current)==null||Te.today();break;case"?":G(!0);break;case"/":se.preventDefault(),(lt=ye.current)==null||lt.focus();break;case"1":case"d":I==="calendar"&&((tr=u.current)==null||tr.changeView("timeGridDay"));break;case"2":case"w":I==="calendar"&&((ks=u.current)==null||ks.changeView("timeGridWeek"));break;case"3":case"m":I==="calendar"&&((nr=u.current)==null||nr.changeView("dayGridMonth"));break;case"4":case"a":I==="calendar"?(jr=u.current)==null||jr.changeView("listWeek"):$("list");break;case"j":case"arrowright":(Cs=u.current)==null||Cs.next();break;case"k":case"arrowleft":(As=u.current)==null||As.prev();break}};return t?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"theme-background"}),f.jsx("div",{className:"h-screen flex items-center justify-center",children:f.jsxs("div",{className:"text-center glass-card p-8",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent mx-auto"}),f.jsx("p",{className:"mt-4 text-content-secondary",children:"Loading..."})]})})]}):r?f.jsx(nR,{onContinue:a}):o?f.jsx(rR,{onComplete:l}):e?n.loading?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"theme-background"}),f.jsx("div",{className:"h-screen flex items-center justify-center",children:f.jsxs("div",{className:"text-center glass-card p-8",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent mx-auto"}),f.jsx("p",{className:"mt-4 text-content-secondary",children:"Loading chores..."})]})})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"theme-background","aria-hidden":"true"}),f.jsx("a",{href:"#main-content",className:"skip-link",children:"Skip to main content"}),f.jsxs("div",{className:"h-screen flex flex-col relative",onKeyDown:Q,tabIndex:-1,children:[f.jsx(LS,{onMenuClick:ge,onDashboardClick:we,viewMode:I,onViewModeChange:$,searchQuery:A,onSearchChange:M,searchInputRef:ye}),f.jsxs("main",{id:"main-content",className:"flex flex-1 overflow-hidden relative",children:[S&&f.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>T(!1)}),f.jsx("div",{className:`
              fixed lg:relative inset-y-0 left-0 z-50 lg:z-auto
              transform transition-transform duration-300 ease-in-out
              ${S?"translate-x-0":"-translate-x-full lg:translate-x-0"}
            `,children:f.jsx(c_,{onClose:()=>T(!1),onDateSelect:K,eventDates:me,hiddenMembers:te,onToggleMemberVisibility:oe,onProfileOpen:Ae,onAvailabilityOpen:Pe})}),I==="calendar"?f.jsx(Wy,{ref:u,onAddClick:J,onEventClick:O,searchQuery:A,hiddenMembers:te}):f.jsx(gD,{onAddClick:J,onEventClick:O})]}),f.jsx(SD,{isOpen:h,onClose:F,editChore:m,instanceDate:b,defaultValues:E}),f.jsx(VD,{}),f.jsx(XD,{onClick:()=>J()}),R&&f.jsx(GD,{onClose:()=>N(!1)}),ve&&f.jsx(JD,{member:ve,onClose:()=>Ae(null)}),Ne&&f.jsx(ZD,{member:Ne,onClose:()=>Pe(null)}),f.jsx(tR,{isOpen:H,onClose:()=>G(!1)})]})]}):f.jsx(_D,{})}X0.createRoot(document.getElementById("root")).render(f.jsx(pa.StrictMode,{children:f.jsx(MS,{children:f.jsx(OS,{children:f.jsx(o_,{children:f.jsx(sR,{})})})})}));
